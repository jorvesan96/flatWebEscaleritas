"use strict";(self.webpackChunkflatWebEscaleritas=self.webpackChunkflatWebEscaleritas||[]).push([[792],{76:(Ms,Cr,ct)=>{ct.d(Cr,{Am:()=>Ba,Bd:()=>he,FA:()=>Ne,Fy:()=>qr,I9:()=>hi,Im:()=>Wo,Ku:()=>Zo,Ll:()=>cn,T9:()=>rn,Uj:()=>Ft,XA:()=>Mt,ZQ:()=>Ye,bD:()=>xs,cY:()=>xt,eX:()=>se,g:()=>ue,gR:()=>Qn,hp:()=>lc,jZ:()=>Tn,lT:()=>pr,lV:()=>Wr,mS:()=>Ct,nr:()=>W,p7:()=>ln,sr:()=>Ln,tD:()=>Wi,u:()=>le,zW:()=>Y,zw:()=>Le});const Z=function(N){const P=[];let L=0;for(let ie=0;ie<N.length;ie++){let H=N.charCodeAt(ie);H<128?P[L++]=H:H<2048?(P[L++]=H>>6|192,P[L++]=63&H|128):55296==(64512&H)&&ie+1<N.length&&56320==(64512&N.charCodeAt(ie+1))?(H=65536+((1023&H)<<10)+(1023&N.charCodeAt(++ie)),P[L++]=H>>18|240,P[L++]=H>>12&63|128,P[L++]=H>>6&63|128,P[L++]=63&H|128):(P[L++]=H>>12|224,P[L++]=H>>6&63|128,P[L++]=63&H|128)}return P},Ue={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(N,P){if(!Array.isArray(N))throw Error("encodeByteArray takes an array as a parameter");this.init_();const L=P?this.byteToCharMapWebSafe_:this.byteToCharMap_,ie=[];for(let H=0;H<N.length;H+=3){const Se=N[H],Fe=H+1<N.length,$e=Fe?N[H+1]:0,Qr=H+2<N.length,Pe=Qr?N[H+2]:0;let Sr=(15&$e)<<2|Pe>>6,vs=63&Pe;Qr||(vs=64,Fe||(Sr=64)),ie.push(L[Se>>2],L[(3&Se)<<4|$e>>4],L[Sr],L[vs])}return ie.join("")},encodeString(N,P){return this.HAS_NATIVE_SUPPORT&&!P?btoa(N):this.encodeByteArray(Z(N),P)},decodeString(N,P){return this.HAS_NATIVE_SUPPORT&&!P?atob(N):function(N){const P=[];let L=0,ie=0;for(;L<N.length;){const H=N[L++];if(H<128)P[ie++]=String.fromCharCode(H);else if(H>191&&H<224){const Se=N[L++];P[ie++]=String.fromCharCode((31&H)<<6|63&Se)}else if(H>239&&H<365){const Qr=((7&H)<<18|(63&N[L++])<<12|(63&N[L++])<<6|63&N[L++])-65536;P[ie++]=String.fromCharCode(55296+(Qr>>10)),P[ie++]=String.fromCharCode(56320+(1023&Qr))}else{const Se=N[L++],Fe=N[L++];P[ie++]=String.fromCharCode((15&H)<<12|(63&Se)<<6|63&Fe)}}return P.join("")}(this.decodeStringToByteArray(N,P))},decodeStringToByteArray(N,P){this.init_();const L=P?this.charToByteMapWebSafe_:this.charToByteMap_,ie=[];for(let H=0;H<N.length;){const Se=L[N.charAt(H++)],$e=H<N.length?L[N.charAt(H)]:0;++H;const Pe=H<N.length?L[N.charAt(H)]:64;++H;const at=H<N.length?L[N.charAt(H)]:64;if(++H,null==Se||null==$e||null==Pe||null==at)throw new wn;ie.push(Se<<2|$e>>4),64!==Pe&&(ie.push($e<<4&240|Pe>>2),64!==at&&ie.push(Pe<<6&192|at))}return ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let N=0;N<this.ENCODED_VALS.length;N++)this.byteToCharMap_[N]=this.ENCODED_VALS.charAt(N),this.charToByteMap_[this.byteToCharMap_[N]]=N,this.byteToCharMapWebSafe_[N]=this.ENCODED_VALS_WEBSAFE.charAt(N),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[N]]=N,N>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(N)]=N,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(N)]=N)}}};class wn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ft=function(N){return function(N){const P=Z(N);return Ue.encodeByteArray(P,!0)}(N).replace(/\./g,"")},le=function(N){try{return Ue.decodeString(N,!0)}catch(P){console.error("base64Decode failed: ",P)}return null};function Le(N,P){if(!(P instanceof Object))return P;switch(P.constructor){case Date:return new Date(P.getTime());case Object:void 0===N&&(N={});break;case Array:N=[];break;default:return P}for(const L in P)!P.hasOwnProperty(L)||!pt(L)||(N[L]=Le(N[L],P[L]));return N}function pt(N){return"__proto__"!==N}function Ct(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const gt=()=>{try{return Ct().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const N=process.env.__FIREBASE_DEFAULTS__;return N?JSON.parse(N):void 0})()||(()=>{if(typeof document>"u")return;let N;try{N=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const P=N&&le(N[1]);return P&&JSON.parse(P)})()}catch(N){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${N}`)}},rn=()=>{var N;return null===(N=gt())||void 0===N?void 0:N.config},Mt=N=>{var P;return null===(P=gt())||void 0===P?void 0:P[`_${N}`]};class xt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((P,L)=>{this.resolve=P,this.reject=L})}wrapCallback(P){return(L,ie)=>{L?this.reject(L):this.resolve(ie),"function"==typeof P&&(this.promise.catch(()=>{}),1===P.length?P(L):P(L,ie))}}}function qr(N,P){if(N.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ie=P||"demo-project",H=N.iat||0,Se=N.sub||N.user_id;if(!Se)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Fe=Object.assign({iss:`https://securetoken.google.com/${ie}`,aud:ie,iat:H,exp:H+3600,auth_time:H,sub:Se,user_id:Se,firebase:{sign_in_provider:"custom",identities:{}}},N);return[Ft(JSON.stringify({alg:"none",type:"JWT"})),Ft(JSON.stringify(Fe)),""].join(".")}function Ye(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Tn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function cn(){var N;const P=null===(N=gt())||void 0===N?void 0:N.forceEnvironment;if("node"===P)return!0;if("browser"===P)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function he(){return typeof window<"u"||ln()}function ln(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ln(){const N="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof N&&void 0!==N.id}function Wr(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pr(){const N=Ye();return N.indexOf("MSIE ")>=0||N.indexOf("Trident/")>=0}function W(){return!cn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y(){try{return"object"==typeof indexedDB}catch{return!1}}function se(){return new Promise((N,P)=>{try{let L=!0;const ie="validate-browser-context-for-indexeddb-analytics-module",H=self.indexedDB.open(ie);H.onsuccess=()=>{H.result.close(),L||self.indexedDB.deleteDatabase(ie),N(!0)},H.onupgradeneeded=()=>{L=!1},H.onerror=()=>{var Se;P((null===(Se=H.error)||void 0===Se?void 0:Se.message)||"")}}catch(L){P(L)}})}class ue extends Error{constructor(P,L,ie){super(L),this.code=P,this.customData=ie,this.name="FirebaseError",Object.setPrototypeOf(this,ue.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ne.prototype.create)}}class Ne{constructor(P,L,ie){this.service=P,this.serviceName=L,this.errors=ie}create(P,...L){const ie=L[0]||{},H=`${this.service}/${P}`,Se=this.errors[P],Fe=Se?function wt(N,P){return N.replace(Cn,(L,ie)=>{const H=P[ie];return null!=H?String(H):`<${ie}?>`})}(Se,ie):"Error";return new ue(H,`${this.serviceName}: ${Fe} (${H}).`,ie)}}const Cn=/\{\$([^}]+)}/g;function Qn(N,P){return Object.prototype.hasOwnProperty.call(N,P)}function Wo(N){for(const P in N)if(Object.prototype.hasOwnProperty.call(N,P))return!1;return!0}function xs(N,P){if(N===P)return!0;const L=Object.keys(N),ie=Object.keys(P);for(const H of L){if(!ie.includes(H))return!1;const Se=N[H],Fe=P[H];if(di(Se)&&di(Fe)){if(!xs(Se,Fe))return!1}else if(Se!==Fe)return!1}for(const H of ie)if(!L.includes(H))return!1;return!0}function di(N){return null!==N&&"object"==typeof N}function Ba(N){const P=[];for(const[L,ie]of Object.entries(N))Array.isArray(ie)?ie.forEach(H=>{P.push(encodeURIComponent(L)+"="+encodeURIComponent(H))}):P.push(encodeURIComponent(L)+"="+encodeURIComponent(ie));return P.length?"&"+P.join("&"):""}function hi(N){const P={};return N.replace(/^\?/,"").split("&").forEach(ie=>{if(ie){const[H,Se]=ie.split("=");P[decodeURIComponent(H)]=decodeURIComponent(Se)}}),P}function lc(N){const P=N.indexOf("?");if(!P)return"";const L=N.indexOf("#",P);return N.substring(P,L>0?L:void 0)}function Wi(N,P){const L=new Kr(N,P);return L.subscribe.bind(L)}class Kr{constructor(P,L){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=L,this.task.then(()=>{P(this)}).catch(ie=>{this.error(ie)})}next(P){this.forEachObserver(L=>{L.next(P)})}error(P){this.forEachObserver(L=>{L.error(P)}),this.close(P)}complete(){this.forEachObserver(P=>{P.complete()}),this.close()}subscribe(P,L,ie){let H;if(void 0===P&&void 0===L&&void 0===ie)throw new Error("Missing Observer.");H=function Ko(N,P){if("object"!=typeof N||null===N)return!1;for(const L of P)if(L in N&&"function"==typeof N[L])return!0;return!1}(P,["next","error","complete"])?P:{next:P,error:L,complete:ie},void 0===H.next&&(H.next=_s),void 0===H.error&&(H.error=_s),void 0===H.complete&&(H.complete=_s);const Se=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?H.error(this.finalError):H.complete()}catch{}}),this.observers.push(H),Se}unsubscribeOne(P){void 0===this.observers||void 0===this.observers[P]||(delete this.observers[P],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(P){if(!this.finalized)for(let L=0;L<this.observers.length;L++)this.sendOne(L,P)}sendOne(P,L){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[P])try{L(this.observers[P])}catch(ie){typeof console<"u"&&console.error&&console.error(ie)}})}close(P){this.finalized||(this.finalized=!0,void 0!==P&&(this.finalError=P),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _s(){}function Zo(N){return N&&N._delegate?N._delegate:N}},187:(Ms,Cr,ct)=>{function b(t,e){return Object.is(t,e)}let ke=null,Me=!1,Z=1;const Ut=Symbol("SIGNAL");function Ue(t){const e=ke;return ke=t,e}const le={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _e(t){if(Me)throw new Error("");if(null===ke)return;ke.consumerOnSignalRead(t);const e=ke.nextProducerIndex++;qr(ke),e<ke.producerNode.length&&ke.producerNode[e]!==t&&xt(ke)&&Mt(ke.producerNode[e],ke.producerIndexOfThis[e]),ke.producerNode[e]!==t&&(ke.producerNode[e]=t,ke.producerIndexOfThis[e]=xt(ke)?rn(t,ke,e):0),ke.producerLastReadVersion[e]=t.version}function pt(t){if((!xt(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Z)){if(!t.producerMustRecompute(t)&&!Kn(t))return t.dirty=!1,void(t.lastCleanEpoch=Z);t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Z}}function Ct(t){if(void 0===t.liveConsumerNode)return;const e=Me;Me=!0;try{for(const n of t.liveConsumerNode)n.dirty||kt(n)}finally{Me=e}}function ar(){return!1!==ke?.consumerAllowSignalWrites}function kt(t){t.dirty=!0,Ct(t),t.consumerMarkedDirty?.(t)}function nt(t){return t&&(t.nextProducerIndex=0),Ue(t)}function gt(t,e){if(Ue(e),t&&void 0!==t.producerNode&&void 0!==t.producerIndexOfThis&&void 0!==t.producerLastReadVersion){if(xt(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Mt(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Kn(t){qr(t);for(let e=0;e<t.producerNode.length;e++){const n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(pt(n),r!==n.version))return!0}return!1}function fr(t){if(qr(t),xt(t))for(let e=0;e<t.producerNode.length;e++)Mt(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function rn(t,e,n){if(Ye(t),0===t.liveConsumerNode.length&&Tn(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=rn(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Mt(t,e){if(Ye(t),1===t.liveConsumerNode.length&&Tn(t))for(let r=0;r<t.producerNode.length;r++)Mt(t.producerNode[r],t.producerIndexOfThis[r]);const n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){const r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];qr(i),i.producerIndexOfThis[r]=e}}function xt(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function qr(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Ye(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Tn(t){return void 0!==t.producerNode}const he=Symbol("UNSET"),ln=Symbol("COMPUTING"),Ln=Symbol("ERRORED"),Wr={...le,value:he,dirty:!0,error:null,equal:b,producerMustRecompute:t=>t.value===he||t.value===ln,producerRecomputeValue(t){if(t.value===ln)throw new Error("Detected cycle in computations.");const e=t.value;t.value=ln;const n=nt(t);let r;try{r=t.computation()}catch(i){r=Ln,t.error=i}finally{gt(t,n)}e!==he&&e!==Ln&&r!==Ln&&t.equal(e,r)?t.value=e:(t.value=r,t.version++)}};let pr=function gs(){throw new Error};function qo(){pr()}let W=null;function Ee(t,e){ar()||qo(),t.equal(t.value,e)||(t.value=e,function Cn(t){t.version++,function Le(){Z++}(),Ct(t),W?.()}(t))}const wt={...le,equal:b,value:void 0};function qe(t){return"function"==typeof t}function Hn(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const An=Hn(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Qn(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(qe(r))try{r()}catch(s){e=s instanceof An?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{xs(s)}catch(o){e=e??[],o instanceof An?e=[...e,...o.errors]:e.push(o)}}if(e)throw new An(e)}}add(e){var n;if(e&&e!==this)if(this.closed)xs(e);else{if(e instanceof zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Qn(n,e)}remove(e){const{_finalizers:n}=this;n&&Qn(n,e),e instanceof zt&&e._removeParent(this)}}zt.EMPTY=(()=>{const t=new zt;return t.closed=!0,t})();const Wo=zt.EMPTY;function cc(t){return t instanceof zt||t&&"closed"in t&&qe(t.remove)&&qe(t.add)&&qe(t.unsubscribe)}function xs(t){qe(t)?t():t.unsubscribe()}const di={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Os={setTimeout(t,e,...n){const{delegate:r}=Os;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Os;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ba(t){Os.setTimeout(()=>{const{onUnhandledError:e}=di;if(!e)throw t;e(t)})}function hi(){}const lc=Kr("C",void 0,void 0);function Kr(t,e,n){return{kind:t,value:e,error:n}}let Dr=null;function Ko(t){if(di.useDeprecatedSynchronousErrorHandling){const e=!Dr;if(e&&(Dr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Dr;if(Dr=null,n)throw r}}else t()}class ks extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cc(e)&&e.add(this)):this.destination=Yo}static create(e,n,r){return new br(e,n,r)}next(e){this.isStopped?Qo(function Wi(t){return Kr("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Qo(function fi(t){return Kr("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qo(lc,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fs=Function.prototype.bind;function ys(t,e){return Fs.call(t,e)}class dc{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ls(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ls(r)}else Ls(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ls(n)}}}class br extends ks{constructor(e,n,r){let i;if(super(),qe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&di.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ys(e.next,s),error:e.error&&ys(e.error,s),complete:e.complete&&ys(e.complete,s)}):i=e}this.destination=new dc(i)}}function Ls(t){di.useDeprecatedSynchronousErrorHandling?function _s(t){di.useDeprecatedSynchronousErrorHandling&&Dr&&(Dr.errorThrown=!0,Dr.error=t)}(t):Ba(t)}function Qo(t,e){const{onStoppedNotification:n}=di;n&&Os.setTimeout(()=>n(t,e))}const Yo={closed:!0,next:hi,error:function Or(t){throw t},complete:hi},Ki="function"==typeof Symbol&&Symbol.observable||"@@observable";function kr(t){return t}function Jo(t){return 0===t.length?kr:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}let Wt=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function N(t){return t&&t instanceof ks||function Zo(t){return t&&qe(t.next)&&qe(t.error)&&qe(t.complete)}(t)&&cc(t)}(n)?n:new br(n,r,i);return Ko(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=ro(r))((i,s)=>{const o=new br({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Ki](){return this}pipe(...n){return Jo(n)(this)}toPromise(n){return new(n=ro(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function ro(t){var e;return null!==(e=t??di.Promise)&&void 0!==e?e:Promise}const P=Hn(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let L=(()=>{class t extends Wt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ie(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new P}next(n){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Wo:(this.currentObservers=null,s.push(n),new zt(()=>{this.currentObservers=null,Qn(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Wt;return n.source=this,n}}return t.create=(e,n)=>new ie(e,n),t})();class ie extends L{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:Wo}}class H extends L{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function Se(t){return qe(t?.lift)}function Fe(t){return e=>{if(Se(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(t,e,n,r,i){return new Qr(t,e,n,r,i)}class Qr extends ks{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Pe(t,e){return Fe((n,r)=>{let i=0;n.subscribe($e(r,s=>{r.next(t.call(e,s,i++))}))})}typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const ed="https://g.co/ng/security#xss";class ce extends Error{constructor(e,n){super(function oo(t,e){return`NG0${Math.abs(t)}${e?": "+e:""}`}(e,n)),this.code=e}}function Yi(t){return{toString:t}.toString()}const ao="__parameters__";function Bs(t,e,n){return Yi(()=>{const r=function wc(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(u,d,f){const m=u.hasOwnProperty(ao)?u[ao]:Object.defineProperty(u,ao,{value:[]})[ao];for(;m.length<=f;)m.push(null);return(m[f]=m[f]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const Qt=globalThis;function Bt(t){for(let e in t)if(t[e]===Bt)return e;throw Error("Could not find renamed property on target object.")}function Xf(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Jn(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Jn).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Tc(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ep=Bt({__forward_ref__:Bt});function Zt(t){return t.__forward_ref__=Zt,t.toString=function(){return Jn(this())},t}function Ke(t){return rd(t)?t():t}function rd(t){return"function"==typeof t&&t.hasOwnProperty(ep)&&t.__forward_ref__===Zt}function Ae(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ur(t){return{providers:t.providers||[],imports:t.imports||[]}}function id(t){return tp(t,od)||tp(t,_y)}function tp(t,e){return t.hasOwnProperty(e)?t[e]:null}function sd(t){return t&&(t.hasOwnProperty(np)||t.hasOwnProperty(DN))?t[np]:null}const od=Bt({\u0275prov:Bt}),np=Bt({\u0275inj:Bt}),_y=Bt({ngInjectableDef:Bt}),DN=Bt({ngInjectorDef:Bt});class pe{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ae({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ac(t){return t&&!!t.\u0275providers}const Ji=Bt({\u0275cmp:Bt}),Dc=Bt({\u0275dir:Bt}),ip=Bt({\u0275pipe:Bt}),Iy=Bt({\u0275mod:Bt}),js=Bt({\u0275fac:Bt}),ad=Bt({__NG_ELEMENT_ID__:Bt}),wy=Bt({__NG_ENV_ID__:Bt});function it(t){return"string"==typeof t?t:null==t?"":String(t)}function sp(t,e){throw new ce(-201,!1)}var vt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(vt||{});let Ka;function YT(){return Ka}function Vn(t){const e=Ka;return Ka=t,e}function Cy(t,e,n){const r=id(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&vt.Optional?null:void 0!==e?e:void sp()}const bc={},Dn="__NG_DI_FLAG__",ld="ngTempTokenPath",JT=/\n/gm,Ay="__source";let Qa;function co(t){const e=Qa;return Qa=t,e}function dd(t,e=vt.Default){if(void 0===Qa)throw new ce(-203,!1);return null===Qa?Cy(t,void 0,e):Qa.get(t,e&vt.Optional?null:void 0,e)}function de(t,e=vt.Default){return(YT()||dd)(Ke(t),e)}function te(t,e=vt.Default){return de(t,hd(e))}function hd(t){return typeof t>"u"||"number"==typeof t?t:(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Sc(t){const e=[];for(let n=0;n<t.length;n++){const r=Ke(t[n]);if(Array.isArray(r)){if(0===r.length)throw new ce(900,!1);let i,s=vt.Default;for(let o=0;o<r.length;o++){const a=r[o],u=up(a);"number"==typeof u?-1===u?i=a.token:s|=u:i=a}e.push(de(i,s))}else e.push(de(r))}return e}function Ja(t,e){return t[Dn]=e,t.prototype[Dn]=e,t}function up(t){return t[Dn]}const Rc=Ja(Bs("Optional"),8),lp=Ja(Bs("SkipSelf"),4);function ia(t,e){return t.hasOwnProperty(js)?t[js]:null}function Xa(t,e){t.forEach(n=>Array.isArray(n)?Xa(n,e):e(n))}function Sy(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function sa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function mi(t,e,n){let r=eu(t,e);return r>=0?t[1|r]=n:(r=~r,function pd(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function hp(t,e){const n=eu(t,e);if(n>=0)return t[1|n]}function eu(t,e){return function Ry(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}(t,e,1)}const ws={},St=[],_i=new pe(""),Py=new pe("",-1),Pc=new pe("");class gd{get(e,n=bc){if(n===bc){const r=new Error(`NullInjectorError: No provider for ${Jn(e)}!`);throw r.name="NullInjectorError",r}return n}}var tu=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(tu||{}),Zi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Zi||{}),Ts=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ts||{});function md(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Nc(t,e,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{const s=i,o=n[++r];_d(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Ny(t){return 3===t||4===t||6===t}function _d(t){return 64===t.charCodeAt(0)}function $s(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||lo(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function lo(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}const yd="ng-template";function nC(t,e,n,r){let i=0;if(r){for(;i<e.length&&"string"==typeof e[i];i+=2)if("class"===e[i]&&-1!==md(e[i+1].toLowerCase(),n,0))return!0}else if(fp(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&"string"==typeof(s=e[i]);)if(s.toLowerCase()===n)return!0}return!1}function fp(t){return 4===t.type&&t.value!==yd}function rC(t,e,n){return e===(4!==t.type||n?t.value:yd)}function pp(t,e,n){let r=4;const i=t.attrs,s=null!==i?function sC(t){for(let e=0;e<t.length;e++)if(Ny(t[e]))return e;return t.length}(i):0;let o=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!o)if(4&r){if(r=2|1&r,""!==u&&!rC(t,u,n)||""===u&&1===e.length){if(ki(r))return!1;o=!0}}else if(8&r){if(null===i||!nC(t,i,u,n)){if(ki(r))return!1;o=!0}}else{const d=e[++a],f=iC(u,i,fp(t),n);if(-1===f){if(ki(r))return!1;o=!0;continue}if(""!==d){let m;if(m=f>s?"":i[f+1].toLowerCase(),2&r&&d!==m){if(ki(r))return!1;o=!0}}}}else{if(!o&&!ki(r)&&!ki(u))return!1;if(o&&ki(u))continue;o=!1,r=u|1&r}}return ki(r)||o}function ki(t){return!(1&t)}function iC(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function mp(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function My(t,e,n=!1){for(let r=0;r<e.length;r++)if(pp(t,e[r],n))return!0;return!1}function vd(t,e){return t?":not("+e.trim()+")":e}function _p(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!ki(o)&&(e+=vd(s,i),i=""),r=o,s=s||!ki(r);n++}return""!==i&&(e+=vd(s,i)),e}function ho(t){return Yi(()=>{const e=xy(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===tu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Zi.Emulated,styles:t.styles||St,_:null,schemas:t.schemas||null,tView:null,id:""};Oy(n);const r=t.dependencies;return n.directiveDefs=nu(r,!1),n.pipeDefs=nu(r,!0),n.id=function lC(t){let e=0;const n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(const i of n)e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function uC(t){return dt(t)||zn(t)}function yp(t){return null!==t}function gr(t){return Yi(()=>({type:t.type,bootstrap:t.bootstrap||St,declarations:t.declarations||St,imports:t.imports||St,exports:t.exports||St,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ed(t,e){if(null==t)return ws;const n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];let s,o,a=Ts.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ts.None?[r,a]:r,e[s]=o):n[s]=r}return n}function tt(t){return Yi(()=>{const e=xy(t);return Oy(e),e})}function mr(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function dt(t){return t[Ji]||null}function zn(t){return t[Dc]||null}function _r(t){return t[ip]||null}function cr(t,e){const n=t[Iy]||null;if(!n&&!0===e)throw new Error(`Type ${Jn(t)} does not have '\u0275mod' property.`);return n}function xy(t){const e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||ws,exportAs:t.exportAs||null,standalone:!0===t.standalone,signals:!0===t.signals,selectors:t.selectors||St,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ed(t.inputs,e),outputs:Ed(t.outputs),debugInfo:null}}function Oy(t){t.features?.forEach(e=>e(t))}function nu(t,e){if(!t)return null;const n=e?_r:uC;return()=>("function"==typeof t?t():t).map(r=>n(r)).filter(yp)}function dC(...t){return{\u0275providers:xc(0,t),\u0275fromNgModule:!0}}function xc(t,...e){const n=[],r=new Set;let i;const s=o=>{n.push(o)};return Xa(e,o=>{const a=o;ru(a,s,[],r)&&(i||=[],i.push(a))}),void 0!==i&&Oc(i,s),n}function Oc(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:i}=t[n];kc(i,s=>{e(s,r)})}}function ru(t,e,n,r){if(!(t=Ke(t)))return!1;let i=null,s=sd(t);const o=!s&&dt(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const u=t.ngModule;if(s=sd(u),!s)return!1;i=u}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const u="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const d of u)ru(d,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let d;r.add(i);try{Xa(s.imports,f=>{ru(f,e,n,r)&&(d||=[],d.push(f))})}finally{}void 0!==d&&Oc(d,e)}if(!a){const d=ia(i)||(()=>new i);e({provide:i,useFactory:d,deps:St},i),e({provide:Pc,useValue:i,multi:!0},i),e({provide:_i,useValue:()=>de(i),multi:!0},i)}const u=s.providers;if(null!=u&&!a){const d=t;kc(u,f=>{e(f,d)})}}}return i!==t&&void 0!==t.providers}function kc(t,e){for(let n of t)Ac(n)&&(n=n.\u0275providers),Array.isArray(n)?kc(n,e):e(n)}const fC=Bt({provide:String,useValue:Bt});function Id(t){return null!==t&&"object"==typeof t&&fC in t}function aa(t){return"function"==typeof t}const Fc=new pe(""),wd={},pC={};let Ip;function iu(){return void 0===Ip&&(Ip=new gd),Ip}class Lr{}class su extends Lr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wp(e,o=>this.processProvider(o)),this.records.set(Py,ou(void 0,this)),i.has("environment")&&this.records.set(Lr,ou(void 0,this));const s=this.records.get(Fc);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Pc,St,vt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const e=Ue(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const n=co(this),r=Vn(void 0);try{return e()}finally{co(n),Vn(r)}}get(e,n=bc,r=vt.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wy))return e[wy](this);r=hd(r);const s=co(this),o=Vn(void 0);try{if(!(r&vt.SkipSelf)){let u=this.records.get(e);if(void 0===u){const d=function yC(t){return"function"==typeof t||"object"==typeof t&&t instanceof pe}(e)&&id(e);u=d&&this.injectableDefInScope(d)?ou(Td(e),wd):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u)}return(r&vt.Self?iu():this.parent).get(e,n=r&vt.Optional&&n===bc?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[ld]=a[ld]||[]).unshift(Jn(e)),s)throw a;return function ZT(t,e,n,r){const i=t[ld];throw e[Ay]&&i.unshift(e[Ay]),t.message=function cp(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=Jn(e);if(Array.isArray(e))i=e.map(Jn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Jn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(JT,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ld]=null,t}(a,e,"R3InjectorError",this.source)}throw a}finally{Vn(o),co(s)}}resolveInjectorInitializers(){const e=Ue(null),n=co(this),r=Vn(void 0);try{const s=this.get(_i,St,vt.Self);for(const o of s)o()}finally{co(n),Vn(r),Ue(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(Jn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ce(205,!1)}processProvider(e){let n=aa(e=Ke(e))?e:Ke(e&&e.provide);const r=function Cd(t){return Id(t)?ou(void 0,t.useValue):ou(Fy(t),wd)}(e);if(!aa(e)&&!0===e.multi){let i=this.records.get(n);i||(i=ou(void 0,wd,!0),i.factory=()=>Sc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){const r=Ue(null);try{return n.value===wd&&(n.value=pC,n.value=n.factory()),"object"==typeof n.value&&n.value&&function _C(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ue(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ke(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function Td(t){const e=id(t),n=null!==e?e.factory:ia(t);if(null!==n)return n;if(t instanceof pe)throw new ce(204,!1);if(t instanceof Function)return function gC(t){if(t.length>0)throw new ce(204,!1);const n=function qT(t){return t&&(t[od]||t[_y])||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new ce(204,!1)}function Fy(t,e,n){let r;if(aa(t)){const i=Ke(t);return ia(i)||Td(i)}if(Id(t))r=()=>Ke(t.useValue);else if(function Ep(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Sc(t.deps||[]));else if(function vp(t){return!(!t||!t.useExisting)}(t))r=()=>de(Ke(t.useExisting));else{const i=Ke(t&&(t.useClass||t.provide));if(!function mC(t){return!!t.deps}(t))return ia(i)||Td(i);r=()=>new i(...Sc(t.deps))}return r}function ou(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function wp(t,e){for(const n of t)Array.isArray(n)?wp(n,e):n&&Ac(n)?wp(n.\u0275providers,e):e(n)}function Xi(t,e){t instanceof su&&t.assertNotDestroyed();const r=co(t),i=Vn(void 0);try{return e()}finally{co(r),Vn(i)}}function Ly(){return void 0!==YT()||null!=function Dy(){return Qa}()}const dn=0,ye=1,Ge=2,bn=3,es=4,Rr=5,yr=6,ua=7,jt=8,Un=9,ts=10,et=11,Vc=12,By=13,lu=14,hn=15,po=16,du=17,go=18,hu=19,mo=20,_o=21,Ad=22,Jr=23,Be=25,Uc=1,Cs=7,pu=9,Bn=10;var gu=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gu||{});function Xn(t){return Array.isArray(t)&&"object"==typeof t[Uc]}function Pr(t){return Array.isArray(t)&&!0===t[Uc]}function Dp(t){return!!(4&t.flags)}function ca(t){return t.componentOffset>-1}function Dd(t){return!(1&~t.flags)}function Fi(t){return!!t.template}function la(t){return!!(512&t[Ge])}class Rp{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Pp(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}function Li(){return Rd}function Rd(t){return t.type.prototype.ngOnChanges&&(t.setInput=yi),PC}function PC(){const t=Np(this),e=t?.current;if(e){const n=t.previous;if(n===ws)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yi(t,e,n,r,i){const s=this.declaredInputs[r],o=Np(t)||function NC(t,e){return t[mu]=e}(t,{previous:ws,current:null}),a=o.current||(o.current={}),u=o.previous,d=u[s];a[s]=new Rp(d&&d.currentValue,n,u===ws),Pp(t,e,i,n)}Li.ngInherit=!0;const mu="__ngSimpleChanges__";function Np(t){return t[mu]||null}const As=function(t,e,n){};function ht(t){for(;Array.isArray(t);)t=t[dn];return t}function Hc(t,e){return ht(e[t])}function Vr(t,e){return ht(e[t.index])}function _u(t,e){return t.data[e]}function Gn(t,e){return t[e]}function Ur(t,e){const n=e[t];return Xn(n)?n:n[dn]}function kp(t){return!(128&~t[Ge])}function Nr(t,e){return null==e?null:t[e]}function Fp(t){t[du]=0}function Lp(t){1024&t[Ge]||(t[Ge]|=1024,kp(t)&&Nd(t))}function da(t){return!!(9216&t[Ge]||t[Jr]?.dirty)}function Vp(t){t[ts].changeDetectionScheduler?.notify(7),64&t[Ge]&&(t[Ge]|=1024),da(t)&&Nd(t)}function Nd(t){t[ts].changeDetectionScheduler?.notify(0);let e=p(t);for(;null!==e&&!(8192&e[Ge])&&(e[Ge]|=8192,kp(e));)e=p(e)}function Md(t,e){if(!(256&~t[Ge]))throw new ce(911,!1);null===t[_o]&&(t[_o]=[]),t[_o].push(e)}function p(t){const e=t[bn];return Pr(e)?e[bn]:e}const c={lFrame:KN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let v=!1;function Ie(){return c.bindingsEnabled}function X(){return c.lFrame.lView}function lt(){return c.lFrame.tView}function Lt(){let t=jp();for(;null!==t&&64===t.type;)t=t.parent;return t}function jp(){return c.lFrame.currentTNode}function Vi(t,e){const n=c.lFrame;n.currentTNode=t,n.isParent=e}function $p(){return c.lFrame.isParent}function $N(){return v}function HN(t){v=t}function vi(){const t=c.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function zs(){return c.lFrame.bindingIndex++}function yq(t,e){const n=c.lFrame;n.bindingIndex=n.bindingRootIndex=t,xC(e)}function xC(t){c.lFrame.currentDirectiveIndex=t}function Yy(t){c.lFrame.currentQueryIndex=t}function Eq(t){const e=t[ye];return 2===e.type?e.declTNode:1===e.type?t[Rr]:null}function qN(t,e,n){if(n&vt.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&vt.Host||(i=Eq(s),null===i||(s=s[lu],10&i.type))););if(null===i)return!1;e=i,t=s}const r=c.lFrame=WN();return r.currentTNode=e,r.lView=t,!0}function FC(t){const e=WN(),n=t[ye];c.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function WN(){const t=c.lFrame,e=null===t?null:t.child;return null===e?KN(t):e}function KN(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function QN(){const t=c.lFrame;return c.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const YN=QN;function LC(){const t=QN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Br(){return c.lFrame.selectedIndex}function Gc(t){c.lFrame.selectedIndex=t}function fn(){const t=c.lFrame;return _u(t.tView,t.selectedIndex)}let ZN=!0;function Hp(){return ZN}function yo(t){ZN=t}function Jy(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),null!=f&&(t.destroyHooks??=[]).push(n,f)}}function Zy(t,e,n){XN(t,e,3,n)}function Xy(t,e,n,r){(3&t[Ge])===n&&XN(t,e,n,r)}function VC(t,e){let n=t[Ge];(3&n)===e&&(n&=16383,n+=1,t[Ge]=n)}function XN(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let u=void 0!==r?65535&t[du]:0;u<o;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[du]+=65536),(a<s||-1==s)&&(bq(t,n,e,u),t[du]=(4294901760&t[du])+u+2),u++}function eM(t,e){As(4,t,e);const n=Ue(null);try{e.call(t)}finally{Ue(n),As(5,t,e)}}function bq(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];i?t[Ge]>>14<t[du]>>16&&(3&t[Ge])===e&&(t[Ge]+=16384,eM(a,s)):eM(a,s)}const Od=-1;class zp{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}const BC={};class qc{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=hd(r);const i=this.injector.get(e,BC,r);return i!==BC||n===BC?i:this.parentInjector.get(e,n,r)}}function jC(t){return t!==Od}function Gp(t){return 32767&t}function qp(t,e){let n=function Nq(t){return t>>16}(t),r=e;for(;n>0;)r=r[lu],n--;return r}let $C=!0;function ev(t){const e=$C;return $C=t,e}const nM=255,rM=5;let xq=0;const vo={};function tv(t,e){const n=iM(t,e);if(-1!==n)return n;const r=e[ye];r.firstCreatePass&&(t.injectorIndex=e.length,HC(r.data,t),HC(e,null),HC(r.blueprint,null));const i=nv(t,e),s=t.injectorIndex;if(jC(i)){const o=Gp(i),a=qp(i,e),u=a[ye].data;for(let d=0;d<8;d++)e[s+d]=a[o+d]|u[o+d]}return e[s+8]=i,s}function HC(t,e){t.push(0,0,0,0,0,0,0,0,e)}function iM(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function nv(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=dM(i),null===r)return Od;if(n++,i=i[lu],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Od}function zC(t,e,n){!function Oq(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ad)&&(r=n[ad]),null==r&&(r=n[ad]=xq++);const i=r&nM;e.data[t+(i>>rM)]|=1<<i}(t,e,n)}function sM(t,e,n){if(n&vt.Optional||void 0!==t)return t;sp()}function oM(t,e,n,r){if(n&vt.Optional&&void 0===r&&(r=null),!(n&(vt.Self|vt.Host))){const i=t[Un],s=Vn(void 0);try{return i?i.get(e,r,n&vt.Optional):Cy(e,r,n&vt.Optional)}finally{Vn(s)}}return sM(r,0,n)}function aM(t,e,n,r=vt.Default,i){if(null!==t){if(2048&e[Ge]&&!(r&vt.Self)){const o=function Uq(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&2048&o[Ge]&&!(512&o[Ge]);){const a=uM(s,o,n,r|vt.Self,vo);if(a!==vo)return a;let u=s.parent;if(!u){const d=o[mo];if(d){const f=d.get(n,vo,r);if(f!==vo)return f}u=dM(o),o=o[lu]}s=u}return i}(t,e,n,r,vo);if(o!==vo)return o}const s=uM(t,e,n,r,vo);if(s!==vo)return s}return oM(e,n,r,i)}function uM(t,e,n,r,i){const s=function Lq(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ad)?t[ad]:void 0;return"number"==typeof e?e>=0?e&nM:Vq:e}(n);if("function"==typeof s){if(!qN(e,t,r))return r&vt.Host?sM(i,0,r):oM(e,n,r,i);try{let o;if(o=s(r),null!=o||r&vt.Optional)return o;sp()}finally{YN()}}else if("number"==typeof s){let o=null,a=iM(t,e),u=Od,d=r&vt.Host?e[hn][Rr]:null;for((-1===a||r&vt.SkipSelf)&&(u=-1===a?nv(t,e):e[a+8],u!==Od&&lM(r,!1)?(o=e[ye],a=Gp(u),e=qp(u,e)):a=-1);-1!==a;){const f=e[ye];if(cM(s,a,f.data)){const m=Fq(a,e,n,o,r,d);if(m!==vo)return m}u=e[a+8],u!==Od&&lM(r,e[ye].data[a+8]===d)&&cM(s,a,e)?(o=f,a=Gp(u),e=qp(u,e)):a=-1}}return i}function Fq(t,e,n,r,i,s){const o=e[ye],a=o.data[t+8],f=function rv(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,u=t.directiveStart,f=s>>20,y=i?a+f:t.directiveEnd;for(let E=r?a:a+f;E<y;E++){const T=o[E];if(E<u&&n===T||E>=u&&T.type===n)return E}if(i){const E=o[u];if(E&&Fi(E)&&E.type===n)return u}return null}(a,o,n,null==r?ca(a)&&$C:r!=o&&!!(3&a.type),i&vt.Host&&s===a);return null!==f?Wc(e,o,f,a):vo}function Wc(t,e,n,r){let i=t[n];const s=e.data;if(function Sq(t){return t instanceof zp}(i)){const o=i;o.resolving&&function ud(t,e){throw e&&e.join(" > "),new ce(-200,t)}(function bt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():it(t)}(s[n]));const a=ev(o.canSeeViewProviders);o.resolving=!0;const d=o.injectImpl?Vn(o.injectImpl):null;qN(t,r,vt.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function Dq(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Rd(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}(n,s[n],e)}finally{null!==d&&Vn(d),ev(a),o.resolving=!1,YN()}}return i}function cM(t,e,n){return!!(n[e+(t>>rM)]&1<<t)}function lM(t,e){return!(t&vt.Self||t&vt.Host&&e)}class vr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aM(this._tNode,this._lView,e,hd(r),n)}}function Vq(){return new vr(Lt(),X())}function er(t){return Yi(()=>{const e=t.prototype.constructor,n=e[js]||GC(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const s=i[js]||GC(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function GC(t){return rd(t)?()=>{const e=GC(Ke(t));return e&&e()}:ia(t)}function dM(t){const e=t[ye],n=e.type;return 2===n?e.declTNode:1===n?t[Rr]:null}function mM(t,e=null,n=null,r){const i=_M(t,e,n,r);return i.resolveInjectorInitializers(),i}function _M(t,e=null,n=null,r,i=new Set){const s=[n||St,dC(t)];return r=r||("object"==typeof t?void 0:Jn(t)),new su(s,e||iu(),r||null,i)}class tr{static#e=this.THROW_IF_NOT_FOUND=bc;static#t=this.NULL=new gd;static create(e,n){if(Array.isArray(e))return mM({name:""},n,e,"");{const r=e.name??"";return mM({name:r},e.parent,e.providers,r)}}static#n=this.\u0275prov=Ae({token:tr,providedIn:"any",factory:()=>de(Py)});static#r=this.__NG_ELEMENT_ID__=-1}new pe("").__NG_ELEMENT_ID__=t=>{const e=Lt();if(null===e)throw new ce(204,!1);if(2&e.type)return e.value;if(t&vt.Optional)return null;throw new ce(204,!1)};function WC(t){return t.ngOriginalError}const vM=!0;let Kp=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=Qq;static#t=this.__NG_ENV_ID__=n=>n}return t})();class Kq extends Kp{constructor(e){super(),this._lView=e}onDestroy(e){return Md(this._lView,e),()=>function Up(t,e){if(null===t[_o])return;const n=t[_o].indexOf(e);-1!==n&&t[_o].splice(n,1)}(this._lView,e)}}function Qq(){return new Kq(X())}let ga=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new H(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();const Xt=class Yq extends L{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Ly()&&(this.destroyRef=te(Kp,{optional:!0})??void 0,this.pendingTasks=te(ga,{optional:!0})??void 0)}emit(e){const n=Ue(null);try{super.next(e)}finally{Ue(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof zt&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{e(n),void 0!==r&&this.pendingTasks?.remove(r)})}}};function sv(...t){}function EM(t){let e,n;function r(){t=sv;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function IM(t){return queueMicrotask(()=>t()),()=>{t=sv}}const KC="isAngularZone",ov=KC+"_ID";let Jq=0;class Rt{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xt(!1),this.onMicrotaskEmpty=new Xt(!1),this.onStable=new Xt(!1),this.onError=new Xt(!1);const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=vM}=e;if(typeof Zone>"u")throw new ce(908,!1);Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,function e3(t){const e=()=>{!function Xq(t){function e(){EM(()=>{t.callbackScheduled=!1,YC(t),t.isCheckStableRunning=!0,QC(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),YC(t))}(t)},n=Jq++;t._inner=t._inner.fork({name:"angular",properties:{[KC]:!0,[ov]:n,[ov+n]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(function t3(t){return CM(t,"__ignore_ng_zone__")}(u))return r.invokeTask(s,o,a,u);try{return wM(t),r.invokeTask(s,o,a,u)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),TM(t)}},onInvoke:(r,i,s,o,a,u,d)=>{try{return wM(t),r.invoke(s,o,a,u,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function n3(t){return CM(t,"__scheduler_tick__")}(u)&&e(),TM(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&("microTask"==o.change?(t._hasPendingMicrotasks=o.microTask,YC(t),QC(t)):"macroTask"==o.change&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(KC)}static assertInAngularZone(){if(!Rt.isInAngularZone())throw new ce(909,!1)}static assertNotInAngularZone(){if(Rt.isInAngularZone())throw new ce(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Zq,sv,sv);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const Zq={};function QC(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YC(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function wM(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TM(t){t._nesting--,QC(t)}class JC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xt,this.onMicrotaskEmpty=new Xt,this.onStable=new Xt,this.onError=new Xt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}function CM(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}class Eo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&WC(e);for(;n&&WC(n);)n=WC(n);return n||null}}const i3=new pe("",{providedIn:"root",factory:()=>{const t=te(Rt),e=te(Eo);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function s3(){return Ld(Lt(),X())}function Ld(t,e){return new rs(Vr(t,e))}let rs=(()=>{class t{constructor(n){this.nativeElement=n}static#e=this.__NG_ELEMENT_ID__=s3}return t})();function Yp(t){return!(128&~t.flags)}Symbol;const eA=new Map;let u3=0;const av="__ngContext__";function Zr(t,e){Xn(e)?(t[av]=e[hu],function l3(t){eA.set(t[hu],t)}(e)):t[av]=e}function FM(t){return VM(t[Vc])}function LM(t){return VM(t[es])}function VM(t){for(;null!==t&&!Pr(t);)t=t[es];return t}let nA;const Ud=new pe("",{providedIn:"root",factory:()=>S3}),S3="ng",qM=new pe(""),is=new pe("",{providedIn:"platform",factory:()=>"unknown"}),WM=new pe("",{providedIn:"root",factory:()=>function yu(){if(void 0!==nA)return nA;if(typeof document<"u")return document;throw new ce(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let KM=()=>null;function cA(t,e,n=!1){return KM(t,e,n)}const nx=new pe("",{providedIn:"root",factory:()=>!1});let mv,_v;function ax(t){return function gA(){if(void 0===_v&&(_v=null,Qt.trustedTypes))try{_v=Qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return _v}()?.createScriptURL(t)||t}class ux{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ed})`}}function vu(t){return t instanceof ux?t.changingThisBreaksApplicationSecurity:t}function rg(t,e){const n=function W3(t){return t instanceof ux&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${ed})`)}return n===e}const J3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Hd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Hd||{});function sg(t){const e=og();return e?e.sanitize(Hd.URL,t)||"":rg(t,"URL")?vu(t):function mA(t){return(t=String(t)).match(J3)?t:"unsafe:"+t}(it(t))}function _x(t){const e=og();if(e)return ax(e.sanitize(Hd.RESOURCE_URL,t)||"");if(rg(t,"ResourceURL"))return ax(vu(t));throw new ce(904,!1)}function yx(t){return function j3(t){return function pA(){if(void 0===mv&&(mv=null,Qt.trustedTypes))try{mv=Qt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return mv}()?.createScriptURL(t)||t}(t[0])}function og(){const t=X();return t&&t[ts].sanitizer}function ss(t){return t instanceof Function?t():t}var Eu=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Eu||{});let wA;function TA(t,e){return wA(t,e)}function Gd(t,e,n,r,i){if(null!=r){let s,o=!1;Pr(r)?s=r:Xn(r)&&(o=!0,r=r[dn]);const a=ht(r);0===t&&null!==n?null==i?Mx(e,n,a):Qc(e,n,a,i||null,!0):1===t&&null!==n?Qc(e,n,a,i||null,!0):2===t?function ug(t,e,n){t.removeChild(null,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function O6(t,e,n,r,i){const s=n[Cs];s!==ht(n)&&Gd(e,t,r,s,i);for(let a=Bn;a<n.length;a++){const u=n[a];Cv(u[ye],u,t,e,r,s)}}(e,t,s,n,i)}}function Iv(t,e,n){return t.createElement(e,n)}function Rx(t,e){e[ts].changeDetectionScheduler?.notify(8),Cv(t,e,e[et],2,null,null)}function Px(t,e){const n=t[pu],r=e[bn];(Xn(r)||e[hn]!==r[bn][hn])&&(t[Ge]|=gu.HasTransplantedViews),null===n?t[pu]=[e]:n.push(e)}function DA(t,e){const n=t[pu],r=n.indexOf(e);n.splice(r,1)}function ag(t,e){if(t.length<=Bn)return;const n=Bn+e,r=t[n];if(r){const i=r[po];null!==i&&i!==t&&DA(i,r),e>0&&(t[n-1][es]=r[es]);const s=sa(t,Bn+e);!function D6(t,e){Rx(t,e),e[dn]=null,e[Rr]=null}(r[ye],r);const o=s[go];null!==o&&o.detachView(s[ye]),r[bn]=null,r[es]=null,r[Ge]&=-129}return r}function wv(t,e){if(!(256&e[Ge])){const n=e[et];n.destroyNode&&Cv(t,e,n,3,null,null),function S6(t){let e=t[Vc];if(!e)return bA(t[ye],t);for(;e;){let n=null;if(Xn(e))n=e[Vc];else{const r=e[Bn];r&&(n=r)}if(!n){for(;e&&!e[es]&&e!==t;)Xn(e)&&bA(e[ye],e),e=e[bn];null===e&&(e=t),Xn(e)&&bA(e[ye],e),n=e&&e[es]}e=n}}(e)}}function bA(t,e){if(256&e[Ge])return;const n=Ue(null);try{e[Ge]&=-129,e[Ge]|=256,e[Jr]&&fr(e[Jr]),function N6(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof zp)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],u=s[o+1];As(4,a,u);try{u.call(a)}finally{As(5,a,u)}}else{As(4,i,s);try{s.call(i)}finally{As(5,i,s)}}}}}(t,e),function P6(t,e){const n=t.cleanup,r=e[ua];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[ua]=null);const i=e[_o];if(null!==i){e[_o]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(t,e),1===e[ye].type&&e[et].destroy();const r=e[po];if(null!==r&&Pr(e[bn])){r!==e[bn]&&DA(r,e);const i=e[go];null!==i&&i.detachView(t)}!function d3(t){eA.delete(t[hu])}(e)}finally{Ue(n)}}function SA(t,e,n){return function Nx(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[dn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=t.data[r.directiveStart+i];if(s===Zi.None||s===Zi.Emulated)return null}return Vr(r,n)}}(t,e.parent,n)}function Qc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Mx(t,e,n){t.appendChild(e,n)}function xx(t,e,n,r,i){null!==r?Qc(t,e,n,r,i):Mx(t,e,n)}function RA(t,e){return t.parentNode(e)}let PA,Fx=function kx(t,e,n){return 40&t.type?Vr(t,n):null};function Tv(t,e,n,r){const i=SA(t,r,e),s=e[et],a=function Ox(t,e,n){return Fx(t,e,n)}(r.parent||e[Rr],r,e);if(null!=i)if(Array.isArray(n))for(let u=0;u<n.length;u++)xx(s,i,n[u],a,!1);else xx(s,i,n,a,!1);void 0!==PA&&PA(s,r,e,n,i)}function Yc(t,e){if(null!==e){const n=e.type;if(3&n)return Vr(e,t);if(4&n)return NA(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Yc(t,r);{const i=t[e.index];return Pr(i)?NA(-1,i):ht(i)}}if(128&n)return Yc(t,e.next);if(32&n)return TA(e,t)()||ht(t[e.index]);{const r=Vx(t,e);return null!==r?Array.isArray(r)?r[0]:Yc(p(t[hn]),r):Yc(t,e.next)}}return null}function Vx(t,e){return null!==e?t[hn][Rr].projection[e.projection]:null}function NA(t,e){const n=Bn+t+1;if(n<e.length){const r=e[n],i=r[ye].firstChild;if(null!==i)return Yc(r,i)}return e[Cs]}function MA(t,e,n,r,i,s,o){for(;null!=n;){if(128===n.type){n=n.next;continue}const a=r[n.index],u=n.type;if(o&&0===e&&(a&&Zr(ht(a),r),n.flags|=2),32&~n.flags)if(8&u)MA(t,e,n.child,r,i,s,!1),Gd(e,t,i,a,s);else if(32&u){const d=TA(n,r);let f;for(;f=d();)Gd(e,t,i,f,s);Gd(e,t,i,a,s)}else 16&u?Bx(t,e,r,n,i,s):Gd(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Cv(t,e,n,r,i,s){MA(n,r,t.firstChild,e,i,s,!1)}function Bx(t,e,n,r,i,s){const o=n[hn],u=o[Rr].projection[r.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)Gd(e,t,i,u[d],s);else{let d=u;const f=o[bn];Yp(r)&&(d.flags|=128),MA(t,e,d,f,i,s,!0)}}function jx(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $x(t,e,n){const{mergedAttrs:r,classes:i,styles:s}=n;null!==r&&Nc(t,e,r),null!==i&&jx(t,e,i),null!==s&&function F6(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const ut={};function Pt(t=1){Hx(lt(),X(),Br()+t,!1)}function Hx(t,e,n,r){if(!r)if(3&~e[Ge]){const s=t.preOrderHooks;null!==s&&Xy(e,s,0,n)}else{const s=t.preOrderCheckHooks;null!==s&&Zy(e,s,n)}Gc(n)}function me(t,e=vt.Default){const n=X();return null===n?de(t,e):aM(Lt(),n,Ke(t),e)}function Gx(t,e,n,r,i,s){const o=Ue(null);try{let a=null;i&Ts.SignalBased&&(a=e[r][Ut]),null!==a&&void 0!==a.transformFn&&(s=a.transformFn(s)),i&Ts.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),null!==t.setInput?t.setInput(e,a,s,n,r):Pp(e,a,r,s)}finally{Ue(o)}}function Av(t,e,n,r,i,s,o,a,u,d,f){const m=e.blueprint.slice();return m[dn]=i,m[Ge]=204|r,(null!==d||t&&2048&t[Ge])&&(m[Ge]|=2048),Fp(m),m[bn]=m[lu]=t,m[jt]=n,m[ts]=o||t&&t[ts],m[et]=a||t&&t[et],m[Un]=u||t&&t[Un]||null,m[Rr]=s,m[hu]=function c3(){return u3++}(),m[yr]=f,m[mo]=d,m[hn]=2==e.type?t[hn]:m,m}function Jc(t,e,n,r,i){let s=t.data[e];if(null===s)s=function xA(t,e,n,r,i){const s=jp(),o=$p(),u=t.data[e]=function z6(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return function Re(){return null!==c.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=u),null!==s&&(o?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(t,e,n,r,i),function _q(){return c.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function ha(){const t=c.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Vi(s,!0),s}function cg(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function qx(t,e,n,r,i){const s=Br(),o=2&r;try{Gc(-1),o&&e.length>Be&&Hx(t,e,Be,!1),As(o?2:0,i),n(r,i)}finally{Gc(s),As(o?3:1,i)}}function OA(t,e,n){if(Dp(e)){const r=Ue(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Ue(r)}}}function kA(t,e,n){Ie()&&(function J6(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;ca(n)&&function i9(t,e,n){const r=Vr(e,t),i=Wx(n);let o=16;n.signals?o=4096:n.onPush&&(o=64);const a=Dv(t,Av(t,i,null,o,r,e,null,t[ts].rendererFactory.createRenderer(r,n),null,null,null));t[e.index]=a}(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||tv(n,e),Zr(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const u=t.data[a],d=Wc(e,t,a,n);Zr(d,e),null!==o&&s9(0,a-i,d,u,0,o),Fi(u)&&(Ur(n.index,e)[jt]=Wc(e,t,a,n))}}(t,e,n,Vr(n,e)),!(64&~n.flags)&&Zx(t,e,n))}function FA(t,e,n=Vr){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function Wx(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=LA(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function LA(t,e,n,r,i,s,o,a,u,d,f){const m=Be+r,y=m+i,E=function V6(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:ut);return n}(m,y),T="function"==typeof d?d():d;return E[ye]={type:t,blueprint:E,template:n,queries:null,viewQuery:a,declTNode:e,data:E.slice().fill(null,m),bindingStartIndex:m,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:f}}let Kx=()=>null;function Qx(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;const o=e[s];if(void 0===o)continue;r??={};let a,u=Ts.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let d=s;if(null!==i){if(!i.hasOwnProperty(s))continue;d=i[s]}0===t?Yx(r,n,d,a,u):Yx(r,n,d,a)}return r}function Yx(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],void 0!==i&&s.push(i)}function ji(t,e,n,r,i,s,o,a){const u=Vr(e,n);let f,d=e.inputs;!a&&null!=d&&(f=d[r])?($A(t,n,f,r,i),ca(e)&&function W6(t,e){const n=Ur(e,t);16&n[Ge]||(n[Ge]|=64)}(n,e.index)):3&e.type&&(r=function q6(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(u,r,i))}function VA(t,e,n,r){if(Ie()){const i=null===r?null:{"":-1},s=function X6(t,e){const n=t.directiveRegistry;let r=null,i=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(My(e,o.selectors,!1))if(r||(r=[]),Fi(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),UA(t,e,a.length)}else r.unshift(o),UA(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(t,n);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Jx(t,e,n,o,i,a),i&&function e9(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new ce(-301,!1);r.push(e[i],s)}}}(n,r,i)}n.mergedAttrs=$s(n.mergedAttrs,n.attrs)}function Jx(t,e,n,r,i,s){for(let d=0;d<r.length;d++)zC(tv(n,e),t,r[d].type);!function n9(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,r.length);for(let d=0;d<r.length;d++){const f=r[d];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,u=cg(t,e,r.length,null);for(let d=0;d<r.length;d++){const f=r[d];n.mergedAttrs=$s(n.mergedAttrs,f.hostAttrs),r9(t,n,e,u,f),t9(u,f,i),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const m=f.type.prototype;!o&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}!function G6(t,e,n){const i=e.directiveEnd,s=t.data,o=e.attrs,a=[];let u=null,d=null;for(let f=e.directiveStart;f<i;f++){const m=s[f],y=n?n.get(m):null,T=y?y.outputs:null;u=Qx(0,m.inputs,f,u,y?y.inputs:null),d=Qx(1,m.outputs,f,d,T);const A=null===u||null===o||fp(e)?null:o9(u,f,o);a.push(A)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=d}(t,n,s)}function Zx(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function vq(){return c.lFrame.currentDirectiveIndex}();try{Gc(s);for(let a=r;a<i;a++){const u=t.data[a],d=e[a];xC(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Z6(u,d)}}finally{Gc(-1),xC(o)}}function Z6(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function UA(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function t9(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Fi(e)&&(n[""]=t)}}function r9(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=ia(i.type)),o=new zp(s,Fi(i),me);t.blueprint[r]=o,n[r]=o,function Q6(t,e,n,r,i){const s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function Y6(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,r,s)}}(t,e,r,cg(t,n,i.hostVars,ut),i)}function Io(t,e,n,r,i,s){const o=Vr(t,e);!function BA(t,e,n,r,i,s,o){if(null==s)t.removeAttribute(e,i,n);else{const a=null==o?it(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}(e[et],o,s,t.value,n,r,i)}function s9(t,e,n,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)Gx(r,n,o[a++],o[a++],o[a++],o[a++])}function o9(t,e,n){let r=null,i=0;for(;i<n.length;){const s=n[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===r&&(r=[]);const o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function Xx(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function eO(t,e){const n=t.contentQueries;if(null!==n){const r=Ue(null);try{for(let i=0;i<n.length;i+=2){const o=n[i+1];if(-1!==o){const a=t.data[o];Yy(n[i]),a.contentQueries(2,e[o],o)}}}finally{Ue(r)}}}function Dv(t,e){return t[Vc]?t[By][es]=e:t[Vc]=e,t[By]=e,e}function jA(t,e,n){Yy(0);const r=Ue(null);try{e(t,n)}finally{Ue(r)}}function bv(t,e){const n=t[Un],r=n?n.get(Eo,null):null;r&&r.handleError(e)}function $A(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],u=n[s++];Gx(t.data[o],e[o],r,a,u,i)}}function a9(t,e){const n=Ur(e,t),r=n[ye];!function u9(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const i=n[dn];null!==i&&null===n[yr]&&(n[yr]=cA(i,n[Un])),HA(r,n,n[jt])}function HA(t,e,n){FC(e);try{const r=t.viewQuery;null!==r&&jA(1,r,n);const i=t.template;null!==i&&qx(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[go]?.finishViewCreation(t),t.staticContentQueries&&eO(t,e),t.staticViewQueries&&jA(2,t.viewQuery,n);const s=t.components;null!==s&&function c9(t,e){for(let n=0;n<e.length;n++)a9(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[Ge]&=-5,LC()}}function Zc(t,e){return!e||null===e.firstChild||Yp(t)}function lg(t,e,n,r,i=!1){for(;null!==n;){if(128===n.type){n=i?n.projectionNext:n.next;continue}const s=e[n.index];null!==s&&r.push(ht(s)),Pr(s)&&sO(s,r);const o=n.type;if(8&o)lg(t,e,n.child,r);else if(32&o){const a=TA(n,e);let u;for(;u=a();)r.push(u)}else if(16&o){const a=Vx(e,n);if(Array.isArray(a))r.push(...a);else{const u=p(e[hn]);lg(u[ye],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function sO(t,e){for(let n=Bn;n<t.length;n++){const r=t[n],i=r[ye].firstChild;null!==i&&lg(r[ye],r,i,e)}t[Cs]!==t[dn]&&e.push(t[Cs])}let oO=[];const f9={...le,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Nd(t.lView)},consumerOnSignalRead(){this.lView[Jr]=this}},g9={...le,consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=p(t.lView);for(;e&&!aO(e[ye]);)e=p(e);e&&Lp(e)},consumerOnSignalRead(){this.lView[Jr]=this}};function aO(t){return 2!==t.type}const m9=100;function Sv(t,e=!0,n=0){const r=t[ts],i=r.rendererFactory;i.begin?.();try{!function _9(t,e){const n=$N();try{HN(!0),GA(t,e);let r=0;for(;da(t);){if(r===m9)throw new ce(103,!1);r++,GA(t,1)}}finally{HN(n)}}(t,n)}catch(o){throw e&&bv(t,o),o}finally{i.end?.(),r.inlineEffectRunner?.flush()}}function y9(t,e,n,r){const i=e[Ge];if(!(256&~i))return;e[ts].inlineEffectRunner?.flush(),FC(e);let a=!0,u=null,d=null;aO(t)?(d=function l9(t){return t[Jr]??function d9(t){const e=oO.pop()??Object.create(f9);return e.lView=t,e}(t)}(e),u=nt(d)):null===function wn(){return ke}()?(a=!1,d=function p9(t){const e=t[Jr]??Object.create(g9);return e.lView=t,e}(e),u=nt(d)):e[Jr]&&(fr(e[Jr]),e[Jr]=null);try{Fp(e),function zN(t){return c.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&qx(t,e,n,2,r);const f=!(3&~i);if(f){const E=t.preOrderCheckHooks;null!==E&&Zy(e,E,null)}else{const E=t.preOrderHooks;null!==E&&Xy(e,E,0,null),VC(e,0)}if(function v9(t){for(let e=FM(t);null!==e;e=LM(e)){if(!(e[Ge]&gu.HasTransplantedViews))continue;const n=e[pu];for(let r=0;r<n.length;r++)Lp(n[r])}}(e),cO(e,0),null!==t.contentQueries&&eO(t,e),f){const E=t.contentCheckHooks;null!==E&&Zy(e,E)}else{const E=t.contentHooks;null!==E&&Xy(e,E,1),VC(e,1)}!function L6(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Gc(~i);else{const s=i,o=n[++r],a=n[++r];yq(o,s),a(2,e[s])}}}finally{Gc(-1)}}(t,e);const m=t.components;null!==m&&dO(e,m,0);const y=t.viewQuery;if(null!==y&&jA(2,y,r),f){const E=t.viewCheckHooks;null!==E&&Zy(e,E)}else{const E=t.viewHooks;null!==E&&Xy(e,E,2),VC(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[Ad]){for(const E of e[Ad])E();e[Ad]=null}e[Ge]&=-73}catch(f){throw Nd(e),f}finally{null!==d&&(gt(d,u),a&&function h9(t){t.lView[Jr]!==t&&(t.lView=null,oO.push(t))}(d)),LC()}}function cO(t,e){for(let n=FM(t);null!==n;n=LM(n))for(let r=Bn;r<n.length;r++)lO(n[r],e)}function E9(t,e,n){lO(Ur(e,t),n)}function lO(t,e){kp(t)&&GA(t,e)}function GA(t,e){const r=t[ye],i=t[Ge],s=t[Jr];let o=!!(0===e&&16&i);if(o||=!!(64&i&&0===e),o||=!!(1024&i),o||=!(!s?.dirty||!Kn(s)),o||=!1,s&&(s.dirty=!1),t[Ge]&=-9217,o)y9(r,t,r.template,t[jt]);else if(8192&i){cO(t,1);const a=r.components;null!==a&&dO(t,a,1)}}function dO(t,e,n){for(let r=0;r<e.length;r++)E9(t,e[r],n)}function dg(t,e){const n=$N()?64:1088;for(t[ts].changeDetectionScheduler?.notify(e);t;){t[Ge]|=n;const r=p(t);if(la(t)&&!r)return t;t=r}return null}class hg{get rootNodes(){const e=this._lView,n=e[ye];return lg(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jt]}set context(e){this._lView[jt]=e}get destroyed(){return!(256&~this._lView[Ge])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[bn];if(Pr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(ag(e,r),sa(n,r))}this._attachedToViewContainer=!1}wv(this._lView[ye],this._lView)}onDestroy(e){Md(this._lView,e)}markForCheck(){dg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ge]&=-129}reattach(){Vp(this._lView),this._lView[Ge]|=128}detectChanges(){this._lView[Ge]|=1024,Sv(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ce(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=la(this._lView),n=this._lView[po];null!==n&&!e&&DA(n,this._lView),Rx(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ce(902,!1);this._appRef=e;const n=la(this._lView),r=this._lView[po];null!==r&&!n&&Px(r,this._lView),Vp(this._lView)}}let ya=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=T9}return t})();const I9=ya,w9=class extends I9{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){const i=function qd(t,e,n,r){const i=Ue(null);try{const s=e.tView,u=Av(t,s,n,4096&t[Ge]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);u[po]=t[e.index];const f=t[go];return null!==f&&(u[go]=f.createEmbeddedView(s)),HA(s,u,n),u}finally{Ue(i)}}(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new hg(i)}};function T9(){return Rv(Lt(),X())}function Rv(t,e){return 4&t.type?new w9(e,t,Ld(t,e)):null}class Qd{}const Eg=new pe("",{providedIn:"root",factory:()=>!1}),xO=new pe(""),nD=new pe("");class gW{}class OO{}class _W{resolveComponentFactory(e){throw function mW(t){const e=Error(`No component factory found for ${Jn(t)}.`);return e.ngComponent=t,e}(e)}}class kv{static#e=this.NULL=new _W}class rD{}let va=(()=>{class t{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function yW(){const t=X(),n=Ur(Lt().index,t);return(Xn(n)?n:t)[et]}()}return t})(),vW=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>null})}return t})();const FO=new Set;function Ei(t){FO.has(t)||(FO.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ii=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ii||{});const LO={destroy(){}};function VO(t,e){!e&&function au(t){if(!Ly())throw new ce(-203,!1)}();const n=e?.injector??te(tr);return function Bi(t){return"browser"===(t??te(tr)).get(is)}(n)?(Ei("NgAfterNextRender"),function UO(t,e,n,r){const i=function IW(t,e){if(t instanceof Function)switch(e){case Ii.EarlyRead:return{earlyRead:t};case Ii.Write:return{write:t};case Ii.MixedReadWrite:return{mixedReadWrite:t};case Ii.Read:return{read:t}}return t}(t,r),s=e.get(Fv),o=s.handler??=new TW,a=[],u=[],d=()=>{for(const E of u)o.unregister(E);f()},f=e.get(Kp).onDestroy(d);let m=0;const y=(E,T)=>{if(!T)return;const A=n?(...F)=>(m--,m<1&&d(),T(...F)):T,D=Xi(e,()=>new wW(E,a,A));o.register(D),u.push(D),m++};return y(Ii.EarlyRead,i.earlyRead),y(Ii.Write,i.write),y(Ii.MixedReadWrite,i.mixedReadWrite),y(Ii.Read,i.read),{destroy:d}}(t,n,!0,e?.phase??Ii.MixedReadWrite)):LO}class wW{constructor(e,n,r){this.phase=e,this.pipelinedArgs=n,this.callbackFn=r,this.zone=te(Rt),this.errorHandler=te(Eo,{optional:!0}),te(Qd,{optional:!0})?.notify(6)}invoke(){try{const e=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,e)}catch(e){this.errorHandler?.handleError(e)}}}class TW{constructor(){this.executingCallbacks=!1,this.buckets={[Ii.EarlyRead]:new Set,[Ii.Write]:new Set,[Ii.MixedReadWrite]:new Set,[Ii.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(const e of Object.values(this.buckets))for(const n of e)n.invoke();this.executingCallbacks=!1;for(const e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(const e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}}let Fv=(()=>{class t{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const r of n)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>new t})}return t})();function Vv(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Tc(i,a):2==s&&(r=Tc(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}class $O extends kv{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=dt(e);return new Tg(n,this.ngModule)}}function HO(t,e){const n=[];for(const r in t){if(!t.hasOwnProperty(r))continue;const i=t[r];if(void 0===i)continue;const s=Array.isArray(i),o=s?i[0]:i;n.push(e?{propName:o,templateName:r,isSignal:!!((s?i[1]:Ts.None)&Ts.SignalBased)}:{propName:o,templateName:r})}return n}class Tg extends OO{get inputs(){const e=this.componentDef,n=e.inputTransforms,r=HO(e.inputs,!0);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return HO(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function aC(t){return t.map(_p).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){const s=Ue(null);try{let o=(i=i||this.ngModule)instanceof Lr?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const a=o?new qc(e,o):e,u=a.get(rD,null);if(null===u)throw new ce(407,!1);const d=a.get(vW,null),y={rendererFactory:u,sanitizer:d,inlineEffectRunner:null,afterRenderEventManager:a.get(Fv,null),changeDetectionScheduler:a.get(Qd,null)},E=u.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",A=r?function U6(t,e,n,r){const s=r.get(nx,!1)||n===Zi.ShadowDom,o=t.selectRootElement(e,s);return function B6(t){Kx(t)}(o),o}(E,r,this.componentDef.encapsulation,a):Iv(E,T,function DW(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(T));let D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let F=null;null!==A&&(F=cA(A,a,!0));const x=LA(0,null,null,1,0,null,null,null,null,null,null),V=Av(null,x,null,D,null,null,y,E,a,null,F);let ee,ve;FC(V);try{const Te=this.componentDef;let k,S=null;Te.findHostDirectiveDefs?(k=[],S=new Map,Te.findHostDirectiveDefs(Te,k,S),k.push(Te)):k=[Te];const M=function SW(t,e){const n=t[ye],r=Be;return t[r]=e,Jc(n,r,2,"#host",null)}(V,A),U=function RW(t,e,n,r,i,s,o){const a=i[ye];!function PW(t,e,n,r){for(const i of t)e.mergedAttrs=$s(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(Vv(e,e.mergedAttrs,!0),null!==n&&$x(r,n,e))}(r,t,e,o);let u=null;null!==e&&(u=cA(e,i[Un]));const d=s.rendererFactory.createRenderer(e,n);let f=16;n.signals?f=4096:n.onPush&&(f=64);const m=Av(i,Wx(n),null,f,i[t.index],t,s,d,null,null,u);return a.firstCreatePass&&UA(a,t,r.length-1),Dv(i,m),i[t.index]=m}(M,A,Te,k,V,y,E);ve=_u(x,Be),A&&function MW(t,e,n,r){if(r)Nc(t,n,["ng-version","18.2.1"]);else{const{attrs:i,classes:s}=function Mc(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!ki(i))break;i=s}r++}return{attrs:e,classes:n}}(e.selectors[0]);i&&Nc(t,n,i),s&&s.length>0&&jx(t,n,s.join(" "))}}(E,Te,A,r),void 0!==n&&function xW(t,e,n){const r=t.projection=[];for(let i=0;i<e.length;i++){const s=n[i];r.push(null!=s?Array.from(s):null)}}(ve,this.ngContentSelectors,n),ee=function NW(t,e,n,r,i,s){const o=Lt(),a=i[ye],u=Vr(o,i);Jx(a,i,o,n,null,r);for(let f=0;f<n.length;f++)Zr(Wc(i,a,o.directiveStart+f,o),i);Zx(a,i,o),u&&Zr(u,i);const d=Wc(i,a,o.directiveStart+o.componentOffset,o);if(t[jt]=i[jt]=d,null!==s)for(const f of s)f(d,e);return OA(a,o,i),d}(U,Te,k,S,V,[OW]),HA(x,V,null)}finally{LC()}return new bW(this.componentType,ee,Ld(ve,V),V,ve)}finally{Ue(s)}}}class bW extends gW{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new hg(i,void 0,!1),this.componentType=e}setInput(e,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const s=this._rootLView;$A(s[ye],s,i,e,n),this.previousInputValues.set(e,n),dg(Ur(this._tNode.index,s),1)}}get injector(){return new vr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function OW(){const t=Lt();Jy(X()[ye],t)}let Gs=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=kW}return t})();function kW(){return function qO(t,e){let n;const r=e[t.index];return Pr(r)?n=r:(n=Xx(r,e,null,t),e[t.index]=n,Dv(e,n)),WO(n,e,t,r),new zO(n,t,e)}(Lt(),X())}const FW=Gs,zO=class extends FW{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ld(this._hostTNode,this._hostLView)}get injector(){return new vr(this._hostTNode,this._hostLView)}get parentInjector(){const e=nv(this._hostTNode,this._hostLView);if(jC(e)){const n=qp(e,this._hostLView),r=Gp(e);return new vr(n[ye].data[r+8],n)}return new vr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=GO(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(n||{},s,null);return this.insertImpl(a,i,Zc(this._hostTNode,null)),a}createComponent(e,n,r,i,s){const o=e&&!function Lc(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const T=n||{};a=T.index,r=T.injector,i=T.projectableNodes,s=T.environmentInjector||T.ngModuleRef}const u=o?e:new Tg(dt(e)),d=r||this.parentInjector;if(!s&&null==u.ngModule){const A=(o?d:this.parentInjector).get(Lr,null);A&&(s=A)}dt(u.componentType??{});const E=u.create(d,i,null,s);return this.insertImpl(E.hostView,a,Zc(this._hostTNode,null)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const i=e._lView;if(function Hs(t){return Pr(t[bn])}(i)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const u=i[bn],d=new zO(u,u[Rr],u[bn]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;return function Wd(t,e,n,r=!0){const i=e[ye];if(function R6(t,e,n,r){const i=Bn+r,s=n.length;r>0&&(n[i-1][es]=e),r<s-Bn?(e[es]=n[i],Sy(n,Bn+r,e)):(n.push(e),e[es]=null),e[bn]=n;const o=e[po];null!==o&&n!==o&&Px(o,e);const a=e[go];null!==a&&a.insertView(t),Vp(e),e[Ge]|=128}(i,e,t,n),r){const o=NA(n,t),a=e[et],u=RA(a,t[Cs]);null!==u&&function b6(t,e,n,r,i,s){r[dn]=i,r[Rr]=e,Cv(t,r,n,1,i,s)}(i,t[Rr],a,e,u,o)}const s=e[yr];null!==s&&null!==s.firstChild&&(s.firstChild=null)}(o,i,s,r),e.attachToViewContainerRef(),Sy(aD(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=GO(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=ag(this._lContainer,n);r&&(sa(aD(this._lContainer),n),wv(r[ye],r))}detach(e){const n=this._adjustIndex(e,-1),r=ag(this._lContainer,n);return r&&null!=sa(aD(this._lContainer),n)?new hg(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function GO(t){return t[8]}function aD(t){return t[8]||(t[8]=[])}let WO=function QO(t,e,n,r){if(t[Cs])return;let i;i=8&n.type?ht(r):function LW(t,e){const n=t[et],r=n.createComment(""),i=Vr(e,t);return Qc(n,RA(n,i),r,function M6(t,e){return t.nextSibling(e)}(n,i),!1),r}(e,n),t[Cs]=i},uD=()=>!1;function Yd(t,e){Ei("NgSignals");const n=function Y(t){const e=Object.create(wt);e.value=t;const n=()=>(_e(e),e.value);return n[Ut]=e,n}(t),r=n[Ut];return e?.equal&&(r.equal=e.equal),n.set=i=>Ee(r,i),n.update=i=>function ue(t,e){ar()||qo(),Ee(t,e(t.value))}(r,i),n.asReadonly=ik.bind(n),n}function ik(){const t=this[Ut];if(void 0===t.readonlyFn){const e=()=>this();e[Ut]=t,t.readonlyFn=e}return t.readonlyFn}function Yt(t){let e=function mk(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let i;if(Fi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ce(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);const o=t;o.inputs=Bv(t.inputs),o.inputTransforms=Bv(t.inputTransforms),o.declaredInputs=Bv(t.declaredInputs),o.outputs=Bv(t.outputs);const a=i.hostBindings;a&&o8(t,a);const u=i.viewQuery,d=i.contentQueries;if(u&&i8(t,u),d&&s8(t,d),n8(t,i),Xf(t.outputs,i.outputs),Fi(i)&&i.data.animation){const f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(t),a===Yt&&(n=!1)}}e=Object.getPrototypeOf(e)}!function r8(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$s(i.hostAttrs,n=$s(n,i.hostAttrs))}}(r)}function n8(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];if(void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],null!==e.inputTransforms)){const i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Bv(t){return t===ws?{}:t===St?[]:t}function i8(t,e){const n=t.viewQuery;t.viewQuery=n?(r,i)=>{e(r,i),n(r,i)}:e}function s8(t,e){const n=t.contentQueries;t.contentQueries=n?(r,i,s)=>{e(r,i,s),n(r,i,s)}:e}function o8(t,e){const n=t.hostBindings;t.hostBindings=n?(r,i)=>{e(r,i),n(r,i)}:e}function Ek(t){const e=t.inputConfig,n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}class tl{}class Ik{}class _D extends tl{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new $O(this);const s=cr(e);this._bootstrapComponents=ss(s.bootstrap),this._r3Injector=_M(e,n,[{provide:tl,useValue:this},{provide:kv,useValue:this.componentFactoryResolver},...r],Jn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class yD extends Ik{constructor(e){super(),this.moduleType=e}create(e){return new _D(this.moduleType,e,[])}}class wk extends tl{constructor(e){super(),this.componentFactoryResolver=new $O(this),this.instance=null;const n=new su([...e.providers,{provide:tl,useValue:this},{provide:kv,useValue:this.componentFactoryResolver}],e.parent||iu(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function jv(t,e,n=null){return new wk({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function $v(t){return!!function vD(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function nr(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Dg(t,e,n,r,i,s,o,a,u,d){const f=n+Be,m=e.firstCreatePass?function y8(t,e,n,r,i,s,o,a,u){const d=e.consts,f=Jc(e,t,4,o||null,a||null);VA(e,n,f,Nr(d,u)),Jy(e,f);const m=f.tView=LA(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return null!==e.queries&&(e.queries.template(e,f),m.queries=e.queries.embeddedTView(f)),f}(f,e,t,r,i,s,o,a,u):e.data[f];Vi(m,!1);const y=Tk(e,t,m,n);Hp()&&Tv(e,t,y,m),Zr(y,t);const E=Xx(y,t,y,m);return t[f]=E,Dv(t,E),function KO(t,e,n){return uD(t,e,n)}(E,m,t),Dd(m)&&kA(e,t,m),null!=u&&FA(t,m,d),m}function To(t,e,n,r,i,s,o,a){const u=X(),d=lt();return Dg(u,d,t,e,n,r,i,Nr(d.consts,s),o,a),To}let Tk=function Ck(t,e,n,r){return yo(!0),e[et].createComment("")};function qs(t,e,n,r){const i=X();return nr(i,zs(),e)&&(lt(),Io(fn(),i,t,e,n,r)),qs}function oh(t,e,n,r){return nr(t,zs(),n)?e+it(n)+r:ut}function Qv(t,e){return t<<17|e<<2}function Cu(t){return t>>17&32767}function PD(t){return 2|t}function il(t){return(131068&t)>>2}function ND(t,e){return-131069&t|e<<2}function MD(t){return 1|t}function t1(t,e,n,r){const i=t[n+1],s=null===e;let o=r?Cu(i):il(i),a=!1;for(;0!==o&&(!1===a||s);){const d=t[o+1];r5(t[o],e)&&(a=!0,t[o+1]=r?MD(d):PD(d)),o=r?Cu(d):il(d)}a&&(t[n+1]=r?PD(i):MD(i))}function r5(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&eu(t,e)>=0}function jr(t,e,n){const r=X();return nr(r,zs(),e)&&ji(lt(),fn(),r,t,e,r[et],n,!1),jr}function xD(t,e,n,r,i){const o=i?"class":"style";$A(t,n,e.inputs[o],o,r)}function Yv(t,e){return function Ws(t,e,n,r){const i=X(),s=lt(),o=function pa(t){const e=c.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);s.firstUpdatePass&&function l1(t,e,n,r){const i=t.data;if(null===i[n+1]){const s=i[Br()],o=function c1(t,e){return e>=t.expandoStartIndex}(t,n);(function p1(t,e){return!!(t.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function h5(t,e,n,r){const i=function OC(t){const e=c.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Pg(n=OD(null,t,e,n,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==i)if(n=OD(i,t,e,n,r),null===s){let u=function f5(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==il(r))return t[Cu(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=OD(null,t,e,u[1],r),u=Pg(u,e.attrs,r),function p5(t,e,n,r){t[Cu(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else s=function g5(t,e,n){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Pg(r,t[s].hostAttrs,n);return Pg(r,e.attrs,n)}(t,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),n}(i,s,e,r),function t5(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Cu(o),u=il(o);t[r]=n;let f,d=!1;if(Array.isArray(n)?(f=n[1],(null===f||eu(n,f)>0)&&(d=!0)):f=n,i)if(0!==u){const y=Cu(t[a+1]);t[r+1]=Qv(y,a),0!==y&&(t[y+1]=ND(t[y+1],r)),t[a+1]=function X8(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Qv(a,0),0!==a&&(t[a+1]=ND(t[a+1],r)),a=r;else t[r+1]=Qv(u,0),0===a?a=r:t[u+1]=ND(t[u+1],r),u=r;d&&(t[r+1]=PD(t[r+1])),t1(t,f,r,!0),t1(t,f,r,!1),function n5(t,e,n,r,i){const s=i?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&eu(s,e)>=0&&(n[r+1]=MD(n[r+1]))}(e,f,t,r,s),o=Qv(a,u),s?e.classBindings=o:e.styleBindings=o}(i,s,e,n,o,r)}}(s,t,o,r),e!==ut&&nr(i,o,e)&&function h1(t,e,n,r,i,s,o,a){if(!(3&e.type))return;const u=t.data,d=u[a+1],f=function e5(t){return!(1&~t)}(d)?f1(u,e,n,i,il(d),o):void 0;Jv(f)||(Jv(s)||function Z8(t){return!(2&~t)}(d)&&(s=f1(u,null,n,i,a,o)),function k6(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=-1===r.indexOf("-")?void 0:Eu.DashCase;null==i?t.removeStyle(n,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Eu.Important),t.setStyle(n,r,i,s))}}(r,o,Hc(Br(),n),i,s))}(s,s.data[Br()],i,i[et],t,i[o+1]=function v5(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=Jn(vu(t)))),t}(e,n),r,o)}(t,e,null,!0),Yv}function OD(t,e,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],r=Pg(r,s.hostAttrs,i),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Pg(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),mi(t,o,!!n||e[++s]))}return void 0===t?null:t}function f1(t,e,n,r,i,s){const o=null===e;let a;for(;i>0;){const u=t[i],d=Array.isArray(u),f=d?u[1]:u,m=null===f;let y=n[i+1];y===ut&&(y=m?St:void 0);let E=m?hp(y,r):f===r?y:void 0;if(d&&!Jv(E)&&(E=hp(u,r)),Jv(E)&&(a=E,o))return a;const T=t[i+1];i=o?Cu(T):il(T)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(a=hp(u,r))}return a}function Jv(t){return void 0!==t}function Ze(t,e,n,r){const i=X(),s=lt(),o=Be+t,a=i[et],u=s.firstCreatePass?function $5(t,e,n,r,i,s){const o=e.consts,u=Jc(e,t,2,r,Nr(o,i));return VA(e,n,u,Nr(o,s)),null!==u.attrs&&Vv(u,u.attrs,!1),null!==u.mergedAttrs&&Vv(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,e,n,r):s.data[o],d=y1(s,i,u,a,e,t);i[o]=d;const f=Dd(u);return Vi(u,!0),$x(a,d,u),!function Zd(t){return!(32&~t.flags)}(u)&&Hp()&&Tv(s,i,d,u),0===function R(){return c.lFrame.elementDepthCount}()&&Zr(d,i),function B(){c.lFrame.elementDepthCount++}(),f&&(kA(s,i,u),OA(s,u,i)),null!==r&&FA(i,u),Ze}function Qe(){let t=Lt();$p()?function zc(){c.lFrame.isParent=!1}():(t=t.parent,Vi(t,!1));const e=t;(function xe(t){return c.skipHydrationRootTNode===t})(e)&&function Wy(){c.skipHydrationRootTNode=null}(),function ne(){c.lFrame.elementDepthCount--}();const n=lt();return n.firstCreatePass&&(Jy(n,t),Dp(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Rq(t){return!!(8&t.flags)}(e)&&xD(n,e,X(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Pq(t){return!!(16&t.flags)}(e)&&xD(n,e,X(),e.stylesWithoutHost,!1),Qe}function wi(t,e,n,r){return Ze(t,e,n,r),Qe(),wi}let y1=(t,e,n,r,i,s)=>(yo(!0),Iv(r,i,function JN(){return c.lFrame.currentNamespace}()));const sl=void 0;var Y5=["en",[["a","p"],["AM","PM"],sl],[["AM","PM"],sl,sl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],sl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],sl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",sl,"{1} 'at' {0}",sl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Q5(t){const n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===r?1:5}];let gh={};function Ti(t){const e=function J5(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=C1(e);if(n)return n;const r=e.split("-")[0];if(n=C1(r),n)return n;if("en"===r)return Y5;throw new ce(701,!1)}function C1(t){return t in gh||(gh[t]=Qt.ng&&Qt.ng.common&&Qt.ng.common.locales&&Qt.ng.common.locales[t]),gh[t]}var pn=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(pn||{});const Xv="en-US";let A1=Xv,H1=(t,e,n)=>{};function as(t,e,n,r){const i=X(),s=lt(),o=Lt();return function $D(t,e,n,r,i,s,o){const a=Dd(r),d=t.firstCreatePass&&function nO(t){return t.cleanup??=[]}(t),f=e[jt],m=function tO(t){return t[ua]??=[]}(e);let y=!0;if(3&r.type||o){const A=Vr(r,e),D=o?o(A):A,F=m.length,x=o?ee=>o(ht(ee[r.index])):r.index;let V=null;if(!o&&a&&(V=function UK(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[ua],u=i[s+2];return a.length>u?a[u]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==V)(V.__ngLastListenerFn__||V).__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,y=!1;else{s=W1(r,e,f,s),H1(A,i,s);const ee=n.listen(D,i,s);m.push(s,ee),d&&d.push(i,x,F,F+1)}}else s=W1(r,e,f,s);const E=r.outputs;let T;if(y&&null!==E&&(T=E[i])){const A=T.length;if(A)for(let D=0;D<A;D+=2){const ve=e[T[D]][T[D+1]].subscribe(s),Te=m.length;m.push(s,ve),d&&d.push(i,r.index,Te,-(Te+1))}}}(s,i,i[et],o,t,e,r),as}function q1(t,e,n,r){const i=Ue(null);try{return As(6,e,n),!1!==n(r)}catch(s){return bv(t,s),!1}finally{As(7,e,n),Ue(i)}}function W1(t,e,n,r){return function i(s){if(s===Function)return r;dg(t.componentOffset>-1?Ur(t.index,e):e,5);let a=q1(e,n,r,s),u=i.__ngNextListenerFn__;for(;u;)a=q1(e,n,u,s)&&a,u=u.__ngNextListenerFn__;return a}}function mh(t=1){return function Iq(t){return(c.lFrame.contextLView=function qy(t,e){for(;t>0;)e=e[lu],t--;return e}(t,c.lFrame.contextLView))[jt]}(t)}function HD(t,e,n){return zD(t,"",e,"",n),HD}function zD(t,e,n,r,i){const s=X(),o=oh(s,e,n,r);return o!==ut&&ji(lt(),fn(),s,t,o,s[et],i,!1),zD}function sF(t){return Gn(function Qy(){return c.lFrame.contextLView}(),Be+t)}function yt(t,e=""){const n=X(),r=lt(),i=t+Be,s=r.firstCreatePass?Jc(r,i,1,e,null):r.data[i],o=gF(r,n,s,e,t);n[i]=o,Hp()&&Tv(r,n,o,s),Vi(s,!1)}let gF=(t,e,n,r,i)=>(yo(!0),function CA(t,e){return t.createText(e)}(e[et],r));function Sn(t){return _h("",t,""),Sn}function _h(t,e,n){const r=X(),i=oh(r,t,e,n);return i!==ut&&function _a(t,e,n){const r=Hc(e,t);!function Sx(t,e,n){t.setValue(e,n)}(t[et],r,n)}(r,Br(),i),_h}function qD(t,e,n,r,i){if(t=Ke(t),Array.isArray(t))for(let s=0;s<t.length;s++)qD(t[s],e,n,r,i);else{const s=lt(),o=X(),a=Lt();let u=aa(t)?t:Ke(t.provide);const d=Fy(t),f=1048575&a.providerIndexes,m=a.directiveStart,y=a.providerIndexes>>20;if(aa(t)||!t.multi){const E=new zp(d,i,me),T=KD(u,e,i?f:f+y,m);-1===T?(zC(tv(a,o),s,u),WD(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(E),o.push(E)):(n[T]=E,o[T]=E)}else{const E=KD(u,e,f+y,m),T=KD(u,e,f,f+y),D=T>=0&&n[T];if(i&&!D||!i&&!(E>=0&&n[E])){zC(tv(a,o),s,u);const F=function d7(t,e,n,r,i){const s=new zp(t,n,me);return s.multi=[],s.index=e,s.componentProviders=0,SF(s,i,r&&!n),s}(i?l7:c7,n.length,i,r,d);!i&&D&&(n[T].providerFactory=F),WD(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(F),o.push(F)}else WD(s,t,E>-1?E:T,SF(n[i?T:E],d,!i&&r));!i&&r&&D&&n[T].componentProviders++}}}function WD(t,e,n,r){const i=aa(e),s=function ky(t){return!!t.useClass}(e);if(i||s){const u=(s?Ke(e.useClass):e).prototype.ngOnDestroy;if(u){const d=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const f=d.indexOf(n);-1===f?d.push(n,[r,u]):d[f+1].push(r,u)}else d.push(n,u)}}}function SF(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function KD(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function c7(t,e,n,r){return QD(this.multi,[])}function l7(t,e,n,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Wc(n,n[ye],this.providerFactory.index,r);s=a.slice(0,o),QD(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],QD(i,s);return s}function QD(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Rn(t,e=[]){return n=>{n.providersResolver=(r,i)=>function u7(t,e,n){const r=lt();if(r.firstCreatePass){const i=Fi(t);qD(n,r.data,r.blueprint,i,!0),qD(e,r.data,r.blueprint,i,!1)}}(r,i?i(t):t,e)}}let h7=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=xc(0,n.type),i=r.length>0?jv([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Ae({token:t,providedIn:"environment",factory:()=>new t(de(Lr))})}return t})();function RF(t){Ei("NgStandalone"),t.getStandaloneInjector=e=>e.get(h7).getOrCreateStandaloneInjector(t)}function YD(t,e,n,r){return MF(X(),vi(),t,e,n,r)}function MF(t,e,n,r,i,s){const o=e+n;return nr(t,o,i)?function wo(t,e,n){return t[e]=n}(t,o+1,s?r.call(s,i):r(i)):function Fg(t,e){const n=t[e];return n===ut?void 0:n}(t,o+1)}function Pn(t,e){const n=lt();let r;const i=t+Be;n.firstCreatePass?(r=function A7(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ia(r.type)),a=Vn(me);try{const u=ev(!1),d=s();return ev(u),function GD(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,X(),i,d),d}finally{Vn(a)}}function Nn(t,e,n){const r=t+Be,i=X(),s=Gn(i,r);return function Lg(t,e){return t[ye].data[e].pure}(i,r)?MF(i,vi(),e,s.transform,n,s):s.transform(n)}function LF(t,e){return Rv(t,e)}class Eh{constructor(e){this.full=e;const n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}}const J7=new Eh("18.2.1");let XF=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();const iL=new pe(""),aE=new pe("");let ib,nb=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,ib||(function TQ(t){ib=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n()},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static#e=this.\u0275fac=function(r){return new(r||t)(de(Rt),de(rb),de(aE))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),rb=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ib?.findTestabilityInTree(this,n,r)??null}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function Bg(t){return!!t&&"function"==typeof t.then}function sL(t){return!!t&&"function"==typeof t.subscribe}const sb=new pe("");let oL=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=te(sb,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const s=i();if(Bg(s))n.push(s);else if(sL(s)){const o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});n.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uE=new pe("");function uL(t,e){return Array.isArray(e)?e.reduce(uL,t):{...t,...e}}let Qs=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=te(i3),this.afterRenderEffectManager=te(Fv),this.zonelessEnabled=te(Eg),this.externalTestViews=new Set,this.beforeRender=new L,this.afterTick=new L,this.componentTypes=[],this.components=[],this.isStable=te(ga).hasPendingTasks.pipe(Pe(n=>!n)),this._injector=te(Lr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof OO;if(!this._injector.get(oL).done)throw!i&&function fo(t){const e=dt(t)||zn(t)||_r(t);return null!==e&&e.standalone}(n),new ce(405,!1);let o;o=i?n:this._injector.get(kv).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function CQ(t){return t.isBoundToModule}(o)?void 0:this._injector.get(tl),d=o.create(tr.NULL,[],r||o.selector,a),f=d.location.nativeElement,m=d.injector.get(iL,null);return m?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),cE(this.components,d),m?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new ce(101,!1);const r=Ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ue(r),this.afterTick.next()}}detectChangesInAttachedViews(n){let r=null;this._injector.destroyed||(r=this._injector.get(rD,null,{optional:!0}));let i=0;const s=this.afterRenderEffectManager;for(;i<10;){const o=0===i;if(n||!o){this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)bQ(a,u,o,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(i++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:a})=>da(a))&&(s.execute(),!this.allViews.some(({_lView:a})=>da(a))))break}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;cE(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(uE,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>cE(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ce(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function cE(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function bQ(t,e,n,r){(n||da(t))&&Sv(t,e,n&&!r?0:1)}class SQ{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let lL=(()=>{class t{compileModuleSync(n){return new yD(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=ss(cr(n).declarations).reduce((o,a)=>{const u=dt(a);return u&&o.push(new Tg(u)),o},[]);return new SQ(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),NQ=(()=>{class t{constructor(){this.zone=te(Rt),this.changeDetectionScheduler=te(Qd),this.applicationRef=te(Qs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ob({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new Rt({...ab(),scheduleInRootZone:n}),[{provide:Rt,useFactory:t},{provide:_i,multi:!0,useFactory:()=>{const r=te(NQ,{optional:!0});return()=>r.initialize()}},{provide:_i,multi:!0,useFactory:()=>{const r=te(xQ);return()=>{r.initialize()}}},!0===e?{provide:xO,useValue:!0}:[],{provide:nD,useValue:n??vM}]}function ab(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}let xQ=(()=>{class t{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=te(Rt),this.pendingTasks=te(ga)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rt.assertNotInAngularZone(),queueMicrotask(()=>{null!==n&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rt.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jg=(()=>{class t{constructor(){this.appRef=te(Qs),this.taskService=te(ga),this.ngZone=te(Rt),this.zonelessEnabled=te(Eg),this.disableScheduling=te(xO,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ov):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(te(nD,{optional:!0})??!1),this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof JC||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?IM:EM;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick(this.shouldRefreshViews))):this.ngZone.runOutsideAngular(()=>r(()=>this.tick(this.shouldRefreshViews)))}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ov+this.angularZoneId))}tick(n){if(this.runningTick||this.appRef.destroyed)return;const r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(n)},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,IM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Au=new pe("",{providedIn:"root",factory:()=>te(Au,vt.Optional|vt.SkipSelf)||function OQ(){return typeof $localize<"u"&&$localize.locale||Xv}()}),cb=new pe("");function dE(t){return!!t.platformInjector}let mL=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=r?.scheduleInRootZone,o=r?.ignoreChangesOutsideZone,a=[ob({ngZoneFactory:()=>function r3(t="zone.js",e){return"noop"===t?new JC:"zone.js"===t?new Rt(e):t}(r?.ngZone,{...ab({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}),scheduleInRootZone:i}),ignoreChangesOutsideZone:o}),{provide:Qd,useExisting:jg}],u=function f8(t,e,n){return new _D(t,e,n,!1)}(n.moduleType,this.injector,a);return function gL(t){const e=dE(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Rt);return n.run(()=>{dE(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get(Eo,null);let i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),dE(t)){const s=()=>e.destroy(),o=t.platformInjector.get(cb);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else t.moduleRef.onDestroy(()=>{cE(t.allPlatformModules,t.moduleRef),i.unsubscribe()});return function DQ(t,e,n){try{const r=n();return Bg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(r,n,()=>{const s=e.get(oL);return s.runInitializers(),s.donePromise.then(()=>{if(function tK(t){"string"==typeof t&&(A1=t.toLowerCase().replace(/_/g,"-"))}(e.get(Au,Xv)||Xv),dE(t)){const a=e.get(Qs);return void 0!==t.rootComponent&&a.bootstrap(t.rootComponent),a}return function BQ(t,e){const n=t.injector.get(Qs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ce(-403,!1);t.instance.ngDoBootstrap(n)}e.push(t)}(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(n,r=[]){const i=uL({},r);return function PQ(t,e,n){const r=new yD(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ce(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(cb,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(r){return new(r||t)(de(tr))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})(),Du=null;const _L=new pe("");function yL(t,e,n=[]){const r=`Platform: ${e}`,i=new pe(r);return(s=[])=>{let o=lb();if(!o||o.injector.get(_L,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function jQ(t){if(Du&&!Du.get(_L,!1))throw new ce(400,!1);(function aL(){!function uc(t){pr=t}(()=>{throw new ce(600,!1)})})(),Du=t;const e=t.get(mL);(function EL(t){t.get(qM,null)?.forEach(n=>n())})(t)}(function vL(t=[],e){return tr.create({name:e,providers:[{provide:Fc,useValue:"platform"},{provide:cb,useValue:new Set([()=>Du=null])},...t]})}(a,r))}return function $Q(){const e=lb();if(!e)throw new ce(401,!1);return e}()}}function lb(){return Du?.get(mL)??null}let Ih=(()=>{class t{static#e=this.__NG_ELEMENT_ID__=zQ}return t})();function zQ(t){return function GQ(t,e,n){if(ca(t)&&!n){const r=Ur(t.index,e);return new hg(r,r)}return 175&t.type?new hg(e[hn],e):null}(Lt(),X(),!(16&~t))}class DL{constructor(){}supports(e){return $v(e)}create(e){return new YQ(e)}}const QQ=(t,e)=>e;class YQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QQ}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){const o=!r||n&&n.currentIndex<SL(r,i,s)?n:r,a=SL(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,null==o.previousIndex)i++;else{s||(s=[]);const d=a-i,f=u-i;if(d!=f){for(let y=0;y<d;y++){const E=y<s.length?s[y]:s[y]=0,T=E+y;f<=T&&T<d&&(s[y]=E+1)}s[o.previousIndex]=f-d}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!$v(e))throw new ce(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),r=!0),n=n._next}else i=0,function m8(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,o)?(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new JQ(n,r),s,i),e}_verifyReinsertion(e,n,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const i=null===n?this._itHead:n._next;return e._next=i,e._prev=n,null===i?this._itTail=e:i._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bL),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bL),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class JQ{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class bL{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new ZQ,this.map.set(n,r)),r.add(e)}get(e,n){const i=this.map.get(e);return i?i.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function SL(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function PL(){return new gb([new DL])}let gb=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:PL});constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||PL()),deps:[[t,new lp,new Rc]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new ce(901,!1)}}return t})();const rY=yL(null,"core",[]);let iY=(()=>{class t{constructor(n){}static#e=this.\u0275fac=function(r){return new(r||t)(de(Qs))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({})}return t})();const WL=new pe("");function wh(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function Gg(t,e){Ei("NgSignals");const n=function cn(t){const e=Object.create(Wr);e.computation=t;const n=()=>{if(pt(e),_e(e),e.value===Ln)throw e.error;return e.value};return n[Ut]=e,n}(t);return e?.equal&&(n[Ut].equal=e.equal),n}function Do(t){const e=Ue(null);try{return t()}finally{Ue(e)}}let rV=null;function bu(){return rV}class zY{}const Hi=new pe("");let vb=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(qY),providedIn:"platform"})}return t})();const GY=new pe("");let qY=(()=>{class t extends vb{constructor(){super(),this._doc=te(Hi),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return bu().getBaseHref(this._doc)}onPopState(n){const r=bu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=bu().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function Eb(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function iV(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ea(t){return t&&"?"!==t[0]?"?"+t:t}let al=(()=>{class t{historyGo(n){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(oV),providedIn:"root"})}return t})();const sV=new pe("");let oV=(()=>{class t extends al{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??te(Hi).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Eb(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ea(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+Ea(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+Ea(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(de(vb),de(sV,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),WY=(()=>{class t extends al{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Eb(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ea(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static#e=this.\u0275fac=function(r){return new(r||t)(de(vb),de(sV,8))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),qg=(()=>{class t{constructor(n){this._subject=new Xt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function YY(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(iV(aV(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ea(r))}normalize(n){return t.stripTrailingSlash(function QY(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,aV(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ea(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ea(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static#e=this.normalizeQueryParams=Ea;static#t=this.joinWithSlash=Eb;static#n=this.stripTrailingSlash=iV;static#r=this.\u0275fac=function(r){return new(r||t)(de(al))};static#i=this.\u0275prov=Ae({token:t,factory:()=>function KY(){return new qg(de(al))}(),providedIn:"root"})}return t})();function aV(t){return t.replace(/\/index.html$/,"")}var Ai=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Ai||{}),on=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(on||{}),us=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(us||{});const lr={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function wE(t,e){return Ss(Ti(t)[pn.DateFormat],e)}function TE(t,e){return Ss(Ti(t)[pn.TimeFormat],e)}function CE(t,e){return Ss(Ti(t)[pn.DateTimeFormat],e)}function bs(t,e){const n=Ti(t),r=n[pn.NumberSymbols][e];if(typeof r>"u"){if(e===lr.CurrencyDecimal)return n[pn.NumberSymbols][lr.Decimal];if(e===lr.CurrencyGroup)return n[pn.NumberSymbols][lr.Group]}return r}function cV(t){if(!t[pn.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[pn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ss(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function wb(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const lJ=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,AE={},dJ=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ia=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Ia||{}),$t=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}($t||{}),Ht=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ht||{});function hJ(t,e,n,r){let i=function IJ(t){if(hV(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[i,s=1,o=1]=t.split("-").map(a=>+a);return DE(i,s-1,o)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(lJ))return function wJ(t){const e=new Date(0);let n=0,r=0;const i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,u=Number(t[6]||0),d=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,u,d),e}(r)}const e=new Date(t);if(!hV(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=wa(n,e)||e;let a,o=[];for(;e;){if(a=dJ.exec(e),!a){o.push(e);break}{o=o.concat(a.slice(1));const f=o.pop();if(!f)break;e=f}}let u=i.getTimezoneOffset();r&&(u=dV(r,u),i=function EJ(t,e,n){const r=n?-1:1,i=t.getTimezoneOffset();return function vJ(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,r*(dV(e,i)-i))}(i,r,!0));let d="";return o.forEach(f=>{const m=function yJ(t){if(Cb[t])return Cb[t];let e;switch(t){case"G":case"GG":case"GGG":e=gn(Ht.Eras,on.Abbreviated);break;case"GGGG":e=gn(Ht.Eras,on.Wide);break;case"GGGGG":e=gn(Ht.Eras,on.Narrow);break;case"y":e=dr($t.FullYear,1,0,!1,!0);break;case"yy":e=dr($t.FullYear,2,0,!0,!0);break;case"yyy":e=dr($t.FullYear,3,0,!1,!0);break;case"yyyy":e=dr($t.FullYear,4,0,!1,!0);break;case"Y":e=PE(1);break;case"YY":e=PE(2,!0);break;case"YYY":e=PE(3);break;case"YYYY":e=PE(4);break;case"M":case"L":e=dr($t.Month,1,1);break;case"MM":case"LL":e=dr($t.Month,2,1);break;case"MMM":e=gn(Ht.Months,on.Abbreviated);break;case"MMMM":e=gn(Ht.Months,on.Wide);break;case"MMMMM":e=gn(Ht.Months,on.Narrow);break;case"LLL":e=gn(Ht.Months,on.Abbreviated,Ai.Standalone);break;case"LLLL":e=gn(Ht.Months,on.Wide,Ai.Standalone);break;case"LLLLL":e=gn(Ht.Months,on.Narrow,Ai.Standalone);break;case"w":e=Tb(1);break;case"ww":e=Tb(2);break;case"W":e=Tb(1,!0);break;case"d":e=dr($t.Date,1);break;case"dd":e=dr($t.Date,2);break;case"c":case"cc":e=dr($t.Day,1);break;case"ccc":e=gn(Ht.Days,on.Abbreviated,Ai.Standalone);break;case"cccc":e=gn(Ht.Days,on.Wide,Ai.Standalone);break;case"ccccc":e=gn(Ht.Days,on.Narrow,Ai.Standalone);break;case"cccccc":e=gn(Ht.Days,on.Short,Ai.Standalone);break;case"E":case"EE":case"EEE":e=gn(Ht.Days,on.Abbreviated);break;case"EEEE":e=gn(Ht.Days,on.Wide);break;case"EEEEE":e=gn(Ht.Days,on.Narrow);break;case"EEEEEE":e=gn(Ht.Days,on.Short);break;case"a":case"aa":case"aaa":e=gn(Ht.DayPeriods,on.Abbreviated);break;case"aaaa":e=gn(Ht.DayPeriods,on.Wide);break;case"aaaaa":e=gn(Ht.DayPeriods,on.Narrow);break;case"b":case"bb":case"bbb":e=gn(Ht.DayPeriods,on.Abbreviated,Ai.Standalone,!0);break;case"bbbb":e=gn(Ht.DayPeriods,on.Wide,Ai.Standalone,!0);break;case"bbbbb":e=gn(Ht.DayPeriods,on.Narrow,Ai.Standalone,!0);break;case"B":case"BB":case"BBB":e=gn(Ht.DayPeriods,on.Abbreviated,Ai.Format,!0);break;case"BBBB":e=gn(Ht.DayPeriods,on.Wide,Ai.Format,!0);break;case"BBBBB":e=gn(Ht.DayPeriods,on.Narrow,Ai.Format,!0);break;case"h":e=dr($t.Hours,1,-12);break;case"hh":e=dr($t.Hours,2,-12);break;case"H":e=dr($t.Hours,1);break;case"HH":e=dr($t.Hours,2);break;case"m":e=dr($t.Minutes,1);break;case"mm":e=dr($t.Minutes,2);break;case"s":e=dr($t.Seconds,1);break;case"ss":e=dr($t.Seconds,2);break;case"S":e=dr($t.FractionalSeconds,1);break;case"SS":e=dr($t.FractionalSeconds,2);break;case"SSS":e=dr($t.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=SE(Ia.Short);break;case"ZZZZZ":e=SE(Ia.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=SE(Ia.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=SE(Ia.Long);break;default:return null}return Cb[t]=e,e}(f);d+=m?m(i,n,u):"''"===f?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),d}function DE(t,e,n){const r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function wa(t,e){const n=function ZY(t){return Ti(t)[pn.LocaleId]}(t);if(AE[n]??={},AE[n][e])return AE[n][e];let r="";switch(e){case"shortDate":r=wE(t,us.Short);break;case"mediumDate":r=wE(t,us.Medium);break;case"longDate":r=wE(t,us.Long);break;case"fullDate":r=wE(t,us.Full);break;case"shortTime":r=TE(t,us.Short);break;case"mediumTime":r=TE(t,us.Medium);break;case"longTime":r=TE(t,us.Long);break;case"fullTime":r=TE(t,us.Full);break;case"short":const i=wa(t,"shortTime"),s=wa(t,"shortDate");r=bE(CE(t,us.Short),[i,s]);break;case"medium":const o=wa(t,"mediumTime"),a=wa(t,"mediumDate");r=bE(CE(t,us.Medium),[o,a]);break;case"long":const u=wa(t,"longTime"),d=wa(t,"longDate");r=bE(CE(t,us.Long),[u,d]);break;case"full":const f=wa(t,"fullTime"),m=wa(t,"fullDate");r=bE(CE(t,us.Full),[f,m])}return r&&(AE[n][e]=r),r}function bE(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return null!=e&&r in e?e[r]:n})),t}function Ys(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function dr(t,e,n=0,r=!1,i=!1){return function(s,o){let a=function pJ(t,e){switch(t){case $t.FullYear:return e.getFullYear();case $t.Month:return e.getMonth();case $t.Date:return e.getDate();case $t.Hours:return e.getHours();case $t.Minutes:return e.getMinutes();case $t.Seconds:return e.getSeconds();case $t.FractionalSeconds:return e.getMilliseconds();case $t.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===$t.Hours)0===a&&-12===n&&(a=12);else if(t===$t.FractionalSeconds)return function fJ(t,e){return Ys(t,3).substring(0,e)}(a,e);const u=bs(o,lr.MinusSign);return Ys(a,e,u,r,i)}}function gn(t,e,n=Ai.Format,r=!1){return function(i,s){return function gJ(t,e,n,r,i,s){switch(n){case Ht.Months:return function tJ(t,e,n){const r=Ti(t),s=Ss([r[pn.MonthsFormat],r[pn.MonthsStandalone]],e);return Ss(s,n)}(e,i,r)[t.getMonth()];case Ht.Days:return function eJ(t,e,n){const r=Ti(t),s=Ss([r[pn.DaysFormat],r[pn.DaysStandalone]],e);return Ss(s,n)}(e,i,r)[t.getDay()];case Ht.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const d=function sJ(t){const e=Ti(t);return cV(e),(e[pn.ExtraData][2]||[]).map(r=>"string"==typeof r?wb(r):[wb(r[0]),wb(r[1])])}(e),f=function oJ(t,e,n){const r=Ti(t);cV(r);const s=Ss([r[pn.ExtraData][0],r[pn.ExtraData][1]],e)||[];return Ss(s,n)||[]}(e,i,r),m=d.findIndex(y=>{if(Array.isArray(y)){const[E,T]=y,A=o>=E.hours&&a>=E.minutes,D=o<T.hours||o===T.hours&&a<T.minutes;if(E.hours<T.hours){if(A&&D)return!0}else if(A||D)return!0}else if(y.hours===o&&y.minutes===a)return!0;return!1});if(-1!==m)return f[m]}return function XY(t,e,n){const r=Ti(t),s=Ss([r[pn.DayPeriodsFormat],r[pn.DayPeriodsStandalone]],e);return Ss(s,n)}(e,i,r)[o<12?0:1];case Ht.Eras:return function nJ(t,e){return Ss(Ti(t)[pn.Eras],e)}(e,r)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(i,s,t,e,n,r)}}function SE(t){return function(e,n,r){const i=-1*r,s=bs(n,lr.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Ia.Short:return(i>=0?"+":"")+Ys(o,2,s)+Ys(Math.abs(i%60),2,s);case Ia.ShortGMT:return"GMT"+(i>=0?"+":"")+Ys(o,1,s);case Ia.Long:return"GMT"+(i>=0?"+":"")+Ys(o,2,s)+":"+Ys(Math.abs(i%60),2,s);case Ia.Extended:return 0===r?"Z":(i>=0?"+":"")+Ys(o,2,s)+":"+Ys(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}const mJ=0,RE=4;function lV(t){const e=t.getDay(),n=0===e?-3:RE-e;return DE(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Tb(t,e=!1){return function(n,r){let i;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{const s=lV(n),o=function _J(t){const e=DE(t,mJ,1).getDay();return DE(t,0,1+(e<=RE?RE:RE+7)-e)}(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return Ys(i,t,bs(r,lr.MinusSign))}}function PE(t,e=!1){return function(n,r){return Ys(lV(n).getFullYear(),t,bs(r,lr.MinusSign),e)}}const Cb={};function dV(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function hV(t){return t instanceof Date&&!isNaN(t.valueOf())}function mV(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}const Pb=/\s+/,_V=[];let yV=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=_V,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Pb):_V}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Pb):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Pb).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static#e=this.\u0275fac=function(r){return new(r||t)(me(rs),me(va))};static#t=this.\u0275dir=tt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}return t})();class kJ{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ME=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new kJ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),EV(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{EV(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(me(Gs),me(ya),me(gb))};static#t=this.\u0275dir=tt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return t})();function EV(t,e){t.context.$implicit=e.item}let xE=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new FJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){IV("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){IV("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static#e=this.\u0275fac=function(r){return new(r||t)(me(Gs),me(ya))};static#t=this.\u0275dir=tt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return t})();class FJ{constructor(){this.$implicit=null,this.ngIf=null}}function IV(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Jn(e)}'.`)}function Js(t,e){return new ce(2100,!1)}let TV=(()=>{class t{transform(n){if(null==n)return null;if("string"!=typeof n)throw Js();return n.toUpperCase()}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275pipe=mr({name:"uppercase",type:t,pure:!0,standalone:!0})}return t})();const KJ=new pe(""),QJ=new pe("");let CV=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(null==n||""===n||n!=n)return null;try{return hJ(n,r??this.defaultOptions?.dateFormat??"mediumDate",s||this.locale,i??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(o){throw Js()}}static#e=this.\u0275fac=function(r){return new(r||t)(me(Au,16),me(KJ,24),me(QJ,24))};static#t=this.\u0275pipe=mr({name:"date",type:t,pure:!0,standalone:!0})}return t})(),sZ=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({})}return t})();const DV="browser";function OE(t){return"server"===t}let uZ=(()=>{class t{static#e=this.\u0275prov=Ae({token:t,providedIn:"root",factory:()=>function aZ(t){return t===DV}(te(is))?new cZ(te(Hi),window):new dZ})}return t})();class cZ{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const n=function lZ(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}}class dZ{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class bV{}class UZ extends zY{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Vb extends UZ{static makeCurrent(){!function HY(t){rV??=t}(new Vb)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function BZ(){return Yg=Yg||document.querySelector("base"),Yg?Yg.getAttribute("href"):null}();return null==n?null:function jZ(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){Yg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mV(document.cookie,e)}}let Yg=null,HZ=(()=>{class t{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const VE=new pe("");let LV=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(n,r),r}static#e=this.\u0275fac=function(r){return new(r||t)(de(VE),de(Rt))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class Ub{constructor(e){this._doc=e}}const Bb="ng-app-id";let VV=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=OE(s),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${Bb}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Bb),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Bb,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){const i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi),de(Ud),de(WM,8),de(is))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const jb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},$b=/%COMP%/g,WZ=new pe("",{providedIn:"root",factory:()=>!0});function BV(t,e){return e.map(n=>n.replace($b,t))}let jV=(()=>{class t{constructor(n,r,i,s,o,a,u,d=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=OE(a),this.defaultRenderer=new Hb(n,o,u,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Zi.ShadowDom&&(r={...r,encapsulation:Zi.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof HV?i.applyToHost(n):i instanceof zb&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Zi.Emulated:s=new HV(u,d,r,this.appId,f,o,a,m);break;case Zi.ShadowDom:return new JZ(u,d,n,r,o,a,this.nonce,m);default:s=new zb(u,d,r,f,o,a,m)}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||t)(de(LV),de(VV),de(Ud),de(WZ),de(Hi),de(is),de(Rt),de(WM))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class Hb{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(jb[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){($V(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&($V(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new ce(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=jb[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=jb[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Eu.DashCase|Eu.Important)?e.style.setProperty(n,r,i&Eu.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Eu.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if("string"==typeof e&&!(e=bu().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function $V(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class JZ extends Hb{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const d=BV(i.id,i.styles);for(const f of d){const m=document.createElement("style");a&&m.setAttribute("nonce",a),m.textContent=f,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class zb extends Hb{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?BV(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class HV extends zb{constructor(e,n,r,i,s,o,a,u){const d=i+"-"+r.id;super(e,n,r,s,o,a,u,d),this.contentAttr=function KZ(t){return"_ngcontent-%COMP%".replace($b,t)}(d),this.hostAttr=function QZ(t){return"_nghost-%COMP%".replace($b,t)}(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}let ZZ=(()=>{class t extends Ub{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),XZ=(()=>{class t extends Ub{constructor(n){super(n),this.delegate=te(WL,{optional:!0})}supports(n){return!!this.delegate&&this.delegate.supports(n)}addEventListener(n,r,i){return this.delegate.addEventListener(n,r,i)}removeEventListener(n,r,i){return this.delegate.removeEventListener(n,r,i)}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const zV=["alt","control","meta","shift"],eX={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tX={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let nX=(()=>{class t extends Ub{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>bu().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),zV.forEach(d=>{const f=r.indexOf(d);f>-1&&(r.splice(f,1),o+=d+".")}),o+=s,0!=r.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(n,r){let i=eX[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),zV.forEach(o=>{o!==i&&(0,tX[o])(n)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const oX=yL(rY,"browser",[{provide:is,useValue:DV},{provide:qM,useValue:function rX(){Vb.makeCurrent()},multi:!0},{provide:Hi,useFactory:function sX(){return function b3(t){nA=t}(document),document},deps:[]}]),aX=new pe(""),WV=[{provide:aE,useClass:class $Z{addToWindow(e){Qt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new ce(5103,!1);return s},Qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qt.getAllAngularRootElements=()=>e.getAllRootElements(),Qt.frameworkStabilizers||(Qt.frameworkStabilizers=[]),Qt.frameworkStabilizers.push(r=>{const i=Qt.getAllAngularTestabilities();let s=i.length;const o=function(){s--,0==s&&r()};i.forEach(a=>{a.whenStable(o)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?bu().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:iL,useClass:nb,deps:[Rt,rb,aE]},{provide:nb,useClass:nb,deps:[Rt,rb,aE]}],KV=[{provide:Fc,useValue:"root"},{provide:Eo,useFactory:function iX(){return new Eo},deps:[]},{provide:VE,useClass:ZZ,multi:!0,deps:[Hi,Rt,is]},{provide:VE,useClass:nX,multi:!0,deps:[Hi]},{provide:VE,useClass:XZ,multi:!0},jV,VV,LV,{provide:rD,useExisting:jV},{provide:bV,useClass:HZ,deps:[]},[]];let uX=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Ud,useValue:n.appId}]}}static#e=this.\u0275fac=function(r){return new(r||t)(de(aX,12))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({providers:[...KV,...WV],imports:[sZ,iY]})}return t})(),cX=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var re=ct(467);function Gb(t){return t[t.length-1]}function JV(t){return qe(Gb(t))?t.pop():void 0}function Jg(t){return function fX(t){return t&&qe(t.schedule)}(Gb(t))?t.pop():void 0}var Ah=ct(635);const ZV=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function XV(t){return qe(t?.then)}function eU(t){return qe(t[Ki])}function tU(t){return Symbol.asyncIterator&&qe(t?.[Symbol.asyncIterator])}function nU(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const rU=function gX(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function iU(t){return qe(t?.[rU])}function sU(t){return(0,Ah.AQ)(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield(0,Ah.N3)(n.read());if(i)return yield(0,Ah.N3)(void 0);yield yield(0,Ah.N3)(r)}}finally{n.releaseLock()}})}function oU(t){return qe(t?.getReader)}function cs(t){if(t instanceof Wt)return t;if(null!=t){if(eU(t))return function mX(t){return new Wt(e=>{const n=t[Ki]();if(qe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(ZV(t))return function _X(t){return new Wt(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(XV(t))return function yX(t){return new Wt(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ba)})}(t);if(tU(t))return aU(t);if(iU(t))return function vX(t){return new Wt(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(oU(t))return function EX(t){return aU(sU(t))}(t)}throw nU(t)}function aU(t){return new Wt(e=>{(function IX(t,e){var n,r,i,s;return(0,Ah.sH)(this,void 0,void 0,function*(){try{for(n=(0,Ah.xN)(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Ta(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Su(t,e=0){return Fe((n,r)=>{n.subscribe($e(r,i=>Ta(r,t,()=>r.next(i),e),()=>Ta(r,t,()=>r.complete(),e),i=>Ta(r,t,()=>r.error(i),e)))})}function Dh(t,e=0){return Fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function uU(t,e){if(!t)throw new Error("Iterable cannot be null");return new Wt(n=>{Ta(n,e,()=>{const r=t[Symbol.asyncIterator]();Ta(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Gt(t,e){return e?function bX(t,e){if(null!=t){if(eU(t))return function wX(t,e){return cs(t).pipe(Dh(e),Su(e))}(t,e);if(ZV(t))return function CX(t,e){return new Wt(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(XV(t))return function TX(t,e){return cs(t).pipe(Dh(e),Su(e))}(t,e);if(tU(t))return uU(t,e);if(iU(t))return function AX(t,e){return new Wt(n=>{let r;return Ta(n,e,()=>{r=t[rU](),Ta(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>qe(r?.return)&&r.return()})}(t,e);if(oU(t))return function DX(t,e){return uU(sU(t),e)}(t,e)}throw nU(t)}(t,e):cs(t)}function Ve(...t){return Gt(t,Jg(t))}function Xr(t,e,n=1/0){return qe(e)?Xr((r,i)=>Pe((s,o)=>e(r,s,i,o))(cs(t(r,i))),n):("number"==typeof e&&(n=e),Fe((r,i)=>function SX(t,e,n,r,i,s,o,a){const u=[];let d=0,f=0,m=!1;const y=()=>{m&&!u.length&&!d&&e.complete()},E=A=>d<r?T(A):u.push(A),T=A=>{s&&e.next(A),d++;let D=!1;cs(n(A,f++)).subscribe($e(e,F=>{i?.(F),s?E(F):e.next(F)},()=>{D=!0},void 0,()=>{if(D)try{for(d--;u.length&&d<r;){const F=u.shift();o?Ta(e,o,()=>T(F)):T(F)}y()}catch(F){e.error(F)}}))};return t.subscribe($e(e,E,()=>{m=!0,y()})),()=>{a?.()}}(r,i,t,n)))}function cl(t,e){return qe(e)?Xr(t,e,1):Xr(t,1)}function Rs(t,e){return Fe((n,r)=>{let i=0;n.subscribe($e(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Zg(t){return Fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jn(t,e){return Fe((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe($e(r,u=>{i?.unsubscribe();let d=0;const f=s++;cs(t(u,f)).subscribe(i=$e(r,m=>r.next(e?e(u,m,f,d++):m),()=>{i=null,a()}))},()=>{o=!0,a()}))})}class BE{}class jE{}class Ps{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ps?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Ps;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Ps?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const i=("a"===e.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class RX{encodeKey(e){return cU(e)}encodeValue(e){return cU(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const NX=/%(\d[a-f0-9])/gi,MX={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function cU(t){return encodeURIComponent(t).replace(NX,(e,n)=>MX[n]??e)}function $E(t){return`${t}`}class Ru{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new RX,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function PX(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],i=Array.isArray(r)?r.map($E):[$E(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Ru({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push($E(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf($E(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class xX{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function lU(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function dU(t){return typeof Blob<"u"&&t instanceof Blob}function hU(t){return typeof FormData<"u"&&t instanceof FormData}class Xg{constructor(e,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function OX(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ps,this.context??=new xX,this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+o}}else this.params=new Ru,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||lU(this.body)||dU(this.body)||hU(this.body)||function kX(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ru?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hU(this.body)?null:dU(this.body)?this.body.type||null:lU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ru?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=void 0!==e.body?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress;let d=e.headers||this.headers,f=e.params||this.params;const m=e.context??this.context;return void 0!==e.setHeaders&&(d=Object.keys(e.setHeaders).reduce((y,E)=>y.set(E,e.setHeaders[E]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((y,E)=>y.set(E,e.setParams[E]),f)),new Xg(n,r,o,{params:f,headers:d,context:m,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}}var Pu=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Pu||{});class qb{constructor(e,n=200,r="OK"){this.headers=e.headers||new Ps,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class HE extends qb{constructor(e={}){super(e),this.type=Pu.ResponseHeader}clone(e={}){return new HE({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class ll extends qb{constructor(e={}){super(e),this.type=Pu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ll({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class bh extends qb{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Wb(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}let pU=(()=>{class t{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Xg)s=n;else{let u,d;u=i.headers instanceof Ps?i.headers:new Ps(i.headers),i.params&&(d=i.params instanceof Ru?i.params:new Ru({fromObject:i.params})),s=new Xg(n,r,void 0!==i.body?i.body:null,{headers:u,context:i.context,params:d,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}const o=Ve(s).pipe(cl(u=>this.handler.handle(u)));if(n instanceof Xg||"events"===i.observe)return o;const a=o.pipe(Rs(u=>u instanceof ll));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Pe(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return a.pipe(Pe(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return a.pipe(Pe(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return a.pipe(Pe(u=>u.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Ru).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Wb(i,r))}post(n,r,i={}){return this.request("POST",n,Wb(i,r))}put(n,r,i={}){return this.request("PUT",n,Wb(i,r))}static#e=this.\u0275fac=function(r){return new(r||t)(de(BE))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const VX=/^\)\]\}',?\n/;function gU(t){if(t.url)return t.url;const e="X-Request-URL".toLocaleLowerCase();return t.headers.get(e)}let Kb=(()=>{class t{constructor(){this.fetchImpl=te(BX,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=te(Rt)}handle(n){return new Wt(r=>{const i=new AbortController;return this.doRequest(n,i.signal,r).then(Qb,s=>r.error(new bh({error:s}))),()=>i.abort()})}doRequest(n,r,i){var s=this;return(0,re.A)(function*(){const o=s.createRequestInit(n);let a;try{const T=s.ngZone.runOutsideAngular(()=>s.fetchImpl(n.urlWithParams,{signal:r,...o}));(function jX(t){t.then(Qb,Qb)})(T),i.next({type:Pu.Sent}),a=yield T}catch(T){return void i.error(new bh({error:T,status:T.status??0,statusText:T.statusText,url:n.urlWithParams,headers:T.headers}))}const u=new Ps(a.headers),d=a.statusText,f=gU(a)??n.urlWithParams;let m=a.status,y=null;if(n.reportProgress&&i.next(new HE({headers:u,status:m,statusText:d,url:f})),a.body){const T=a.headers.get("content-length"),A=[],D=a.body.getReader();let x,V,F=0;const ee=typeof Zone<"u"&&Zone.current;yield s.ngZone.runOutsideAngular((0,re.A)(function*(){for(;;){const{done:Te,value:k}=yield D.read();if(Te)break;if(A.push(k),F+=k.length,n.reportProgress){V="text"===n.responseType?(V??"")+(x??=new TextDecoder).decode(k,{stream:!0}):void 0;const S=()=>i.next({type:Pu.DownloadProgress,total:T?+T:void 0,loaded:F,partialText:V});ee?ee.run(S):S()}}}));const ve=s.concatChunks(A,F);try{const Te=a.headers.get("Content-Type")??"";y=s.parseBody(n,ve,Te)}catch(Te){return void i.error(new bh({error:Te,headers:new Ps(a.headers),status:a.status,statusText:a.statusText,url:gU(a)??n.urlWithParams}))}}0===m&&(m=y?200:0),m>=200&&m<300?(i.next(new ll({body:y,headers:u,status:m,statusText:d,url:f})),i.complete()):i.error(new bh({error:y,headers:u,status:m,statusText:d,url:f}))})()}parseBody(n,r,i){switch(n.responseType){case"json":const s=(new TextDecoder).decode(r).replace(VX,"");return""===s?null:JSON.parse(s);case"text":return(new TextDecoder).decode(r);case"blob":return new Blob([r],{type:i});case"arraybuffer":return r.buffer}}createRequestInit(n){const r={},i=n.withCredentials?"include":void 0;if(n.headers.forEach((s,o)=>r[s]=o.join(",")),n.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!n.headers.has("Content-Type")){const s=n.detectContentTypeHeader();null!==s&&(r["Content-Type"]=s)}return{body:n.serializeBody(),method:n.method,headers:r,credentials:i}}concatChunks(n,r){const i=new Uint8Array(r);let s=0;for(const o of n)i.set(o,s),s+=o.length;return i}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class BX{}function Qb(){}function mU(t,e){return e(t)}function $X(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}const zX=new pe(""),em=new pe(""),_U=new pe(""),yU=new pe("",{providedIn:"root",factory:()=>!0});function GX(){let t=null;return(e,n)=>{null===t&&(t=(te(zX,{optional:!0})??[]).reduceRight($X,mU));const r=te(ga);if(te(yU)){const s=r.add();return t(e,n).pipe(Zg(()=>r.remove(s)))}return t(e,n)}}let vU=(()=>{class t extends BE{constructor(n,r){super(),this.backend=n,this.injector=r,this.chain=null,this.pendingTasks=te(ga),this.contributeToStability=te(yU)}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(em),...this.injector.get(_U,[])]));this.chain=r.reduceRight((i,s)=>function HX(t,e,n){return(r,i)=>Xi(n,()=>e(r,s=>t(s,i)))}(i,s,this.injector),mU)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Zg(()=>this.pendingTasks.remove(r)))}return this.chain(n,r=>this.backend.handle(r))}static#e=this.\u0275fac=function(r){return new(r||t)(de(jE),de(Lr))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const YX=/^\)\]\}',?\n/;let IU=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new ce(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?Gt(r.\u0275loadImpl()):Ve(null)).pipe(jn(()=>new Wt(s=>{const o=r.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((A,D)=>o.setRequestHeader(A,D.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const A=n.detectContentTypeHeader();null!==A&&o.setRequestHeader("Content-Type",A)}if(n.responseType){const A=n.responseType.toLowerCase();o.responseType="json"!==A?A:"text"}const a=n.serializeBody();let u=null;const d=()=>{if(null!==u)return u;const A=o.statusText||"OK",D=new Ps(o.getAllResponseHeaders()),F=function JX(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return u=new HE({headers:D,status:o.status,statusText:A,url:F}),u},f=()=>{let{headers:A,status:D,statusText:F,url:x}=d(),V=null;204!==D&&(V=typeof o.response>"u"?o.responseText:o.response),0===D&&(D=V?200:0);let ee=D>=200&&D<300;if("json"===n.responseType&&"string"==typeof V){const ve=V;V=V.replace(YX,"");try{V=""!==V?JSON.parse(V):null}catch(Te){V=ve,ee&&(ee=!1,V={error:Te,text:V})}}ee?(s.next(new ll({body:V,headers:A,status:D,statusText:F,url:x||void 0})),s.complete()):s.error(new bh({error:V,headers:A,status:D,statusText:F,url:x||void 0}))},m=A=>{const{url:D}=d(),F=new bh({error:A,status:o.status||0,statusText:o.statusText||"Unknown Error",url:D||void 0});s.error(F)};let y=!1;const E=A=>{y||(s.next(d()),y=!0);let D={type:Pu.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(D.total=A.total),"text"===n.responseType&&o.responseText&&(D.partialText=o.responseText),s.next(D)},T=A=>{let D={type:Pu.UploadProgress,loaded:A.loaded};A.lengthComputable&&(D.total=A.total),s.next(D)};return o.addEventListener("load",f),o.addEventListener("error",m),o.addEventListener("timeout",m),o.addEventListener("abort",m),n.reportProgress&&(o.addEventListener("progress",E),null!==a&&o.upload&&o.upload.addEventListener("progress",T)),o.send(a),s.next({type:Pu.Sent}),()=>{o.removeEventListener("error",m),o.removeEventListener("abort",m),o.removeEventListener("load",f),o.removeEventListener("timeout",m),n.reportProgress&&(o.removeEventListener("progress",E),null!==a&&o.upload&&o.upload.removeEventListener("progress",T)),o.readyState!==o.DONE&&o.abort()}})))}static#e=this.\u0275fac=function(r){return new(r||t)(de(bV))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();const Yb=new pe(""),wU=new pe("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),TU=new pe("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class CU{}let eee=(()=>{class t{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=mV(n,this.cookieName),this.lastCookieString=n),this.lastToken}static#e=this.\u0275fac=function(r){return new(r||t)(de(Hi),de(is),de(wU))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function tee(t,e){const n=t.url.toLowerCase();if(!te(Yb)||"GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e(t);const r=te(CU).getToken(),i=te(TU);return null!=r&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var Nu=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(Nu||{});function nee(...t){const e=[pU,IU,vU,{provide:BE,useExisting:vU},{provide:jE,useFactory:()=>te(Kb,{optional:!0})??te(IU)},{provide:em,useValue:tee,multi:!0},{provide:Yb,useValue:!0},{provide:CU,useClass:eee}];for(const n of t)e.push(...n.\u0275providers);return function oa(t){return{\u0275providers:t}}(e)}const AU=new pe("");function ree(){return function dl(t,e){return{\u0275kind:t,\u0275providers:e}}(Nu.LegacyInterceptors,[{provide:AU,useFactory:GX},{provide:em,useExisting:AU,multi:!0}])}let iee=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({providers:[nee(ree())]})}return t})();function Mu(t){return!!t&&(t instanceof Wt||qe(t.lift)&&qe(t.subscribe))}const{isArray:fee}=Array,{getPrototypeOf:pee,prototype:gee,keys:mee}=Object;function xU(t){if(1===t.length){const e=t[0];if(fee(e))return{args:e,keys:null};if(function _ee(t){return t&&"object"==typeof t&&pee(t)===gee}(e)){const n=mee(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:yee}=Array;function OU(t){return Pe(e=>function vee(t,e){return yee(e)?t(...e):t(e)}(t,e))}function kU(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function FU(...t){const e=JV(t),{args:n,keys:r}=xU(t),i=new Wt(s=>{const{length:o}=n;if(!o)return void s.complete();const a=new Array(o);let u=o,d=o;for(let f=0;f<o;f++){let m=!1;cs(n[f]).subscribe($e(s,y=>{m||(m=!0,d--),a[f]=y},()=>u--,void 0,()=>{(!u||!m)&&(d||s.next(r?kU(r,a):a),s.complete())}))}});return e?i.pipe(OU(e)):i}function Sh(t=1/0){return Xr(kr,t)}function tm(...t){return function Eee(){return Sh(1)}()(Gt(t,Jg(t)))}function GE(t){return new Wt(e=>{cs(t()).subscribe(e)})}const Zs=new Wt(t=>t.complete());function bo(t){return t<=0?()=>Zs:Fe((e,n)=>{let r=0;e.subscribe($e(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}const Jb={now:()=>(Jb.delegate||Date).now(),delegate:void 0};class wee extends L{constructor(e=1/0,n=1/0,r=Jb){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=n.now();let a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}}function Zb(t,e,...n){if(!0===e)return void t();if(!1===e)return;const r=new br({next:()=>{r.unsubscribe(),t()}});return cs(e(...n)).subscribe(r)}function qE(t,e,n){let r,i=!1;return t&&"object"==typeof t?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t):r=t??1/0,function Tee(t={}){const{connector:e=()=>new L,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o,a,u,d=0,f=!1,m=!1;const y=()=>{a?.unsubscribe(),a=void 0},E=()=>{y(),o=u=void 0,f=m=!1},T=()=>{const A=o;E(),A?.unsubscribe()};return Fe((A,D)=>{d++,!m&&!f&&y();const F=u=u??e();D.add(()=>{d--,0===d&&!m&&!f&&(a=Zb(T,i))}),F.subscribe(D),!o&&d>0&&(o=new br({next:x=>F.next(x),error:x=>{m=!0,y(),a=Zb(E,n,x),F.error(x)},complete:()=>{f=!0,y(),a=Zb(E,r),F.complete()}}),cs(A).subscribe(o))})(s)}}({connector:()=>new wee(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}class nm{}let LU=(()=>{class t extends nm{getTranslation(n){return Ve({})}static \u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class Xb{}let VU=(()=>{class t{handle(n){return n.key}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function WE(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!=t&&e!=e)return!0;let i,s,o,n=typeof t;if(n==typeof e&&"object"==n){if(!Array.isArray(t)){if(Array.isArray(e))return!1;for(s in o=Object.create(null),t){if(!WE(t[s],e[s]))return!1;o[s]=!0}for(s in e)if(!(s in o)&&typeof e[s]<"u")return!1;return!0}if(!Array.isArray(e))return!1;if((i=t.length)==e.length){for(s=0;s<i;s++)if(!WE(t[s],e[s]))return!1;return!0}}return!1}function xu(t){return typeof t<"u"&&null!==t}function eS(t){return t&&"object"==typeof t&&!Array.isArray(t)}function UU(t,e){let n=Object.assign({},t);return eS(t)&&eS(e)&&Object.keys(e).forEach(r=>{eS(e[r])?r in t?n[r]=UU(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}class KE{}let BU=(()=>{class t extends KE{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(n,r){let i;return i="string"==typeof n?this.interpolateString(n,r):"function"==typeof n?this.interpolateFunction(n,r):n,i}getValue(n,r){let i="string"==typeof r?r.split("."):[r];r="";do{r+=i.shift(),!xu(n)||!xu(n[r])||"object"!=typeof n[r]&&i.length?i.length?r+=".":n=void 0:(n=n[r],r="")}while(i.length);return n}interpolateFunction(n,r){return n(r)}interpolateString(n,r){return r?n.replace(this.templateMatcher,(i,s)=>{let o=this.getValue(r,s);return xu(o)?o:i}):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class QE{}let jU=(()=>{class t extends QE{compile(n,r){return n}compileTranslations(n,r){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();class $U{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new Xt;onLangChange=new Xt;onDefaultLangChange=new Xt}const tS=new pe("USE_STORE"),nS=new pe("USE_DEFAULT_LANG"),rS=new pe("DEFAULT_LANGUAGE"),iS=new pe("USE_EXTEND");let YE=(()=>{class t{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new Xt;_onLangChange=new Xt;_onDefaultLangChange=new Xt;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(n){this.isolate?this._defaultLang=n:this.store.defaultLang=n}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(n){this.isolate?this._currentLang=n:this.store.currentLang=n}get langs(){return this.isolate?this._langs:this.store.langs}set langs(n){this.isolate?this._langs=n:this.store.langs=n}get translations(){return this.isolate?this._translations:this.store.translations}set translations(n){this.isolate?this._translations=n:this.store.translations=n}constructor(n,r,i,s,o,a=!0,u=!1,d=!1,f){this.store=n,this.currentLoader=r,this.compiler=i,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=u,this.extend=d,f&&this.setDefaultLang(f)}setDefaultLang(n){if(n===this.defaultLang)return;let r=this.retrieveTranslations(n);typeof r<"u"?(null==this.defaultLang&&(this.defaultLang=n),r.pipe(bo(1)).subscribe(i=>{this.changeDefaultLang(n)})):this.changeDefaultLang(n)}getDefaultLang(){return this.defaultLang}use(n){if(n===this.currentLang)return Ve(this.translations[n]);let r=this.retrieveTranslations(n);return typeof r<"u"?(this.currentLang||(this.currentLang=n),r.pipe(bo(1)).subscribe(i=>{this.changeLang(n)}),r):(this.changeLang(n),Ve(this.translations[n]))}retrieveTranslations(n){let r;return(typeof this.translations[n]>"u"||this.extend)&&(this._translationRequests[n]=this._translationRequests[n]||this.getTranslation(n),r=this._translationRequests[n]),r}getTranslation(n){this.pending=!0;const r=this.currentLoader.getTranslation(n).pipe(qE(1),bo(1));return this.loadingTranslations=r.pipe(Pe(i=>this.compiler.compileTranslations(i,n)),qE(1),bo(1)),this.loadingTranslations.subscribe({next:i=>{this.translations[n]=this.extend&&this.translations[n]?{...i,...this.translations[n]}:i,this.updateLangs(),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(n,r,i=!1){r=this.compiler.compileTranslations(r,n),this.translations[n]=(i||this.extend)&&this.translations[n]?UU(this.translations[n],r):r,this.updateLangs(),this.onTranslationChange.emit({lang:n,translations:this.translations[n]})}getLangs(){return this.langs}addLangs(n){n.forEach(r=>{-1===this.langs.indexOf(r)&&this.langs.push(r)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(n,r,i){let s;if(r instanceof Array){let o={},a=!1;for(let u of r)o[u]=this.getParsedResult(n,u,i),Mu(o[u])&&(a=!0);return a?FU(r.map(d=>Mu(o[d])?o[d]:Ve(o[d]))).pipe(Pe(d=>{let f={};return d.forEach((m,y)=>{f[r[y]]=m}),f})):o}if(n&&(s=this.parser.interpolate(this.parser.getValue(n,r),i)),typeof s>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],r),i)),typeof s>"u"){let o={key:r,translateService:this};typeof i<"u"&&(o.interpolateParams=i),s=this.missingTranslationHandler.handle(o)}return typeof s<"u"?s:r}get(n,r){if(!xu(n)||!n.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(cl(i=>Mu(i=this.getParsedResult(i,n,r))?i:Ve(i)));{let i=this.getParsedResult(this.translations[this.currentLang],n,r);return Mu(i)?i:Ve(i)}}getStreamOnTranslationChange(n,r){if(!xu(n)||!n.length)throw new Error('Parameter "key" required');return tm(GE(()=>this.get(n,r)),this.onTranslationChange.pipe(jn(i=>{const s=this.getParsedResult(i.translations,n,r);return"function"==typeof s.subscribe?s:Ve(s)})))}stream(n,r){if(!xu(n)||!n.length)throw new Error('Parameter "key" required');return tm(GE(()=>this.get(n,r)),this.onLangChange.pipe(jn(i=>{const s=this.getParsedResult(i.translations,n,r);return Mu(s)?s:Ve(s)})))}instant(n,r){if(!xu(n)||!n.length)throw new Error('Parameter "key" required');let i=this.getParsedResult(this.translations[this.currentLang],n,r);if(Mu(i)){if(n instanceof Array){let s={};return n.forEach((o,a)=>{s[n[a]]=n[a]}),s}return n}return i}set(n,r,i=this.currentLang){this.translations[i][n]=this.compiler.compile(r,i),this.updateLangs(),this.onTranslationChange.emit({lang:i,translations:this.translations[i]})}changeLang(n){this.currentLang=n,this.onLangChange.emit({lang:n,translations:this.translations[n]}),null==this.defaultLang&&this.changeDefaultLang(n)}changeDefaultLang(n){this.defaultLang=n,this.onDefaultLangChange.emit({lang:n,translations:this.translations[n]})}reloadLang(n){return this.resetLang(n),this.getTranslation(n)}resetLang(n){this._translationRequests[n]=void 0,this.translations[n]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;return n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof n>"u"?void 0:(-1!==n.indexOf("-")&&(n=n.split("-")[0]),-1!==n.indexOf("_")&&(n=n.split("_")[0]),n)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let n=window.navigator.languages?window.navigator.languages[0]:null;return n=n||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,n}static \u0275fac=function(r){return new(r||t)(de($U),de(nm),de(QE),de(KE),de(Xb),de(nS),de(tS),de(iS),de(rS))};static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),sS=(()=>{class t{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(n,r){this.translate=n,this._ref=r}updateValue(n,r,i){let s=o=>{this.value=void 0!==o?o:n,this.lastKey=n,this._ref.markForCheck()};if(i){let o=this.translate.getParsedResult(i,n,r);Mu(o.subscribe)?o.subscribe(s):s(o)}this.translate.get(n,r).subscribe(s)}transform(n,...r){if(!n||!n.length)return n;if(WE(n,this.lastKey)&&WE(r,this.lastParams))return this.value;let i;if(xu(r[0])&&r.length)if("string"==typeof r[0]&&r[0].length){let s=r[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{i=JSON.parse(s)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else"object"==typeof r[0]&&!Array.isArray(r[0])&&(i=r[0]);return this.lastKey=n,this.lastParams=r,this.updateValue(n,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(n,i,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,i,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(n,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||t)(me(YE,16),me(Ih,16))};static \u0275pipe=mr({name:"translate",type:t,pure:!1});static \u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})(),Cee=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[n.loader||{provide:nm,useClass:LU},n.compiler||{provide:QE,useClass:jU},n.parser||{provide:KE,useClass:BU},n.missingTranslationHandler||{provide:Xb,useClass:VU},$U,{provide:tS,useValue:n.isolate},{provide:nS,useValue:n.useDefaultLang},{provide:iS,useValue:n.extend},{provide:rS,useValue:n.defaultLanguage},YE]}}static forChild(n={}){return{ngModule:t,providers:[n.loader||{provide:nm,useClass:LU},n.compiler||{provide:QE,useClass:jU},n.parser||{provide:KE,useClass:BU},n.missingTranslationHandler||{provide:Xb,useClass:VU},{provide:tS,useValue:n.isolate},{provide:nS,useValue:n.useDefaultLang},{provide:iS,useValue:n.extend},{provide:rS,useValue:n.defaultLanguage},YE]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gr({type:t});static \u0275inj=ur({})}return t})();class Aee{http;prefix;suffix;constructor(e,n="/assets/i18n/",r=".json"){this.http=e,this.prefix=n,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}function oS(...t){const e=Jg(t),n=JV(t),{args:r,keys:i}=xU(t);if(0===r.length)return Gt([],e);const s=new Wt(function Dee(t,e,n=kr){return r=>{HU(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let u=0;u<i;u++)HU(e,()=>{const d=Gt(t[u],e);let f=!1;d.subscribe($e(r,m=>{s[u]=m,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>kU(i,o):kr));return n?s.pipe(OU(n)):s}function HU(t,e,n){t?Ta(n,t,e):e()}const JE=Hn(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ZE(t,e){const n=qe(t)?t:()=>t,r=i=>i.error(n());return new Wt(e?i=>e.schedule(r,0,i):r)}function aS(){return Fe((t,e)=>{let n=null;t._refCount++;const r=$e(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class zU extends Wt{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Se(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;const n=this.getSubject();e.add(this.source.subscribe($e(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return aS()(this)}}function XE(...t){const e=Jg(t);return Fe((n,r)=>{(e?tm(t,n,e):tm(t,n)).subscribe(r)})}function eI(t){return Fe((e,n)=>{let r=!1;e.subscribe($e(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function GU(t=bee){return Fe((e,n)=>{let r=!1;e.subscribe($e(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function bee(){return new JE}function Ou(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rs((i,s)=>t(i,s,r)):kr,bo(1),n?eI(e):GU(()=>new JE))}function ei(t,e,n){const r=qe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Fe((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe($e(s,u=>{var d;null===(d=r.next)||void 0===d||d.call(r,u),s.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),s.complete()},u=>{var d;a=!1,null===(d=r.error)||void 0===d||d.call(r,u),s.error(u)},()=>{var u,d;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(d=r.finalize)||void 0===d||d.call(r)}))}):kr}function Rh(t){return Fe((e,n)=>{let s,r=null,i=!1;r=e.subscribe($e(n,void 0,void 0,o=>{s=cs(t(o,Rh(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function tI(t,e){return Fe(function See(t,e,n,r,i){return(s,o)=>{let a=n,u=e,d=0;s.subscribe($e(o,f=>{const m=d++;u=a?t(u,f,m):(a=!0,f),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}(t,e,arguments.length>=2,!0))}function uS(t){return t<=0?()=>Zs:Fe((e,n)=>{let r=[];e.subscribe($e(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}const mt="primary",rm=Symbol("RouteTitle");class Mee{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ph(t){return new Mee(t)}function xee(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(":"===o[0])i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function So(t,e){const n=t?cS(t):void 0,r=e?cS(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!qU(t[i],e[i]))return!1;return!0}function cS(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qU(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function WU(t){return t.length>0?t[t.length-1]:null}function ku(t){return Mu(t)?t:Bg(t)?Gt(Promise.resolve(t)):Ve(t)}const kee={exact:function YU(t,e,n){if(!fl(t.segments,e.segments)||!nI(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!YU(t.children[r],e.children[r],n))return!1;return!0},subset:JU},KU={exact:function Fee(t,e){return So(t,e)},subset:function Lee(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qU(t[n],e[n]))},ignored:()=>!0};function QU(t,e,n){return kee[n.paths](t.root,e.root,n.matrixParams)&&KU[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function JU(t,e,n){return ZU(t,e,e.segments,n)}function ZU(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!fl(i,n)||e.hasChildren()||!nI(i,n,r))}if(t.segments.length===n.length){if(!fl(t.segments,n)||!nI(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!JU(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(fl(t.segments,i)&&nI(t.segments,i,r)&&t.children[mt])&&ZU(t.children[mt],e,s,r)}}function nI(t,e,n){return e.every((r,i)=>KU[n](t[i].parameters,r.parameters))}class hl{constructor(e=new en([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ph(this.queryParams),this._queryParamMap}toString(){return Bee.serialize(this)}}class en{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iI(this)}}class im{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ph(this.parameters),this._parameterMap}toString(){return t2(this)}}function fl(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Nh=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>new rI,providedIn:"root"})}return t})();class rI{parse(e){const n=new Jee(e);return new hl(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${sm(e.root,!0)}`,r=function Hee(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${sI(n)}=${sI(i)}`).join("&"):`${sI(n)}=${sI(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function jee(t){return encodeURI(t)}(e.fragment)}`:""}`}}const Bee=new rI;function iI(t){return t.segments.map(e=>t2(e)).join("/")}function sm(t,e){if(!t.hasChildren())return iI(t);if(e){const n=t.children[mt]?sm(t.children[mt],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==mt&&r.push(`${i}:${sm(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Uee(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===mt&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==mt&&(n=n.concat(e(i,r)))}),n}(t,(r,i)=>i===mt?[sm(t.children[mt],!1)]:[`${i}:${sm(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[mt]?`${iI(t)}/${n[0]}`:`${iI(t)}/(${n.join("//")})`}}function XU(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sI(t){return XU(t).replace(/%3B/gi,";")}function lS(t){return XU(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oI(t){return decodeURIComponent(t)}function e2(t){return oI(t.replace(/\+/g,"%20"))}function t2(t){return`${lS(t.path)}${function $ee(t){return Object.entries(t).map(([e,n])=>`;${lS(e)}=${lS(n)}`).join("")}(t.parameters)}`}const zee=/^[^\/()?;#]+/;function dS(t){const e=t.match(zee);return e?e[0]:""}const Gee=/^[^\/()?;=#]+/,Wee=/^[^=?&#]+/,Qee=/^[^&#]+/;class Jee{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[mt]=new en(e,n)),r}parseSegment(){const e=dS(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new im(oI(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function qee(t){const e=t.match(Gee);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=dS(this.remaining);i&&(r=i,this.capture(r))}e[oI(n)]=oI(r)}parseQueryParam(e){const n=function Kee(t){const e=t.match(Wee);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function Yee(t){const e=t.match(Qee);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=e2(n),s=e2(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=dS(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new ce(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=mt);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[mt]:new en([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}}function n2(t){return t.segments.length>0?new en([],{[mt]:t}):t}function r2(t){const e={};for(const[r,i]of Object.entries(t.children)){const s=r2(i);if(r===mt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Zee(t){if(1===t.numberOfChildren&&t.children[mt]){const e=t.children[mt];return new en(t.segments.concat(e.segments),e.children)}return t}(new en(t.segments,e))}function pl(t){return t instanceof hl}function i2(t){let e;const i=n2(function n(s){const o={};for(const u of s.children){const d=n(u);o[u.outlet]=d}const a=new en(s.url,o);return s===t&&(e=a),a}(t.root));return e??i}function s2(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return hS(i,i,i,n,r);const s=function ete(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new a2(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([u,d])=>{a[u]="string"==typeof d?d.split("/"):d}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,u)=>{0==u&&"."===a||(0==u&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new a2(n,e,r)}(e);if(s.toRoot())return hS(i,i,new en([],{}),n,r);const o=function tte(t,e,n){if(t.isAbsolute)return new uI(e,!0,0);if(!n)return new uI(e,!1,NaN);if(null===n.parent)return new uI(n,!0,0);const r=aI(t.commands[0])?0:1;return function nte(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ce(4005,!1);i=r.segments.length}return new uI(r,!1,i-s)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),a=o.processChildren?am(o.segmentGroup,o.index,s.commands):u2(o.segmentGroup,o.index,s.commands);return hS(i,o.segmentGroup,a,n,r)}function aI(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function om(t){return"object"==typeof t&&null!=t&&t.outlets}function hS(t,e,n,r,i){let o,s={};r&&Object.entries(r).forEach(([u,d])=>{s[u]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`}),o=t===e?n:o2(t,e,n);const a=n2(r2(o));return new hl(a,s,i)}function o2(t,e,n){const r={};return Object.entries(t.children).forEach(([i,s])=>{r[i]=s===e?n:o2(s,e,n)}),new en(t.segments,r)}class a2{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&aI(r[0]))throw new ce(4003,!1);const i=r.find(om);if(i&&i!==WU(r))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class uI{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function u2(t,e,n){if(t??=new en([],{}),0===t.segments.length&&t.hasChildren())return am(t,e,n);const r=function ite(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(om(a))break;const u=`${a}`,d=r<n.length-1?n[r+1]:null;if(i>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!l2(u,d,o))return s;r+=2}else{if(!l2(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new en(t.segments.slice(0,r.pathIndex),{});return s.children[mt]=new en(t.segments.slice(r.pathIndex),t.children),am(s,0,i)}return r.match&&0===i.length?new en(t.segments,{}):r.match&&!t.hasChildren()?fS(t,e,n):r.match?am(t,0,i):fS(t,e,n)}function am(t,e,n){if(0===n.length)return new en(t.segments,{});{const r=function rte(t){return om(t[0])?t[0].outlets:{[mt]:t}}(n),i={};if(Object.keys(r).some(s=>s!==mt)&&t.children[mt]&&1===t.numberOfChildren&&0===t.children[mt].segments.length){const s=am(t.children[mt],e,n);return new en(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=u2(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new en(t.segments,i)}}function fS(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(om(s)){const u=ste(s.outlets);return new en(r,u)}if(0===i&&aI(n[0])){r.push(new im(t.segments[e].path,c2(n[0]))),i++;continue}const o=om(s)?s.outlets[mt]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&aI(a)?(r.push(new im(o,c2(a))),i+=2):(r.push(new im(o,{})),i++)}return new en(r,{})}function ste(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=fS(new en([],{}),0,r))}),e}function c2(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function l2(t,e,n){return t==n.path&&So(e,n.parameters)}const um="imperative";var Nt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Nt||{});class Ro{constructor(e,n){this.id=e,this.url=n}}class cI extends Ro{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Nt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ca extends Ro{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Nt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ls=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ls||{}),lI=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(lI||{});class gl extends Ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Nt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mh extends Ro{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Nt.NavigationSkipped}}class pS extends Ro{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Nt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class d2 extends Ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ote extends Ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ate extends Ro{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Nt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ute extends Ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cte extends Ro{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lte{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class dte{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hte{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fte{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pte{constructor(e){this.snapshot=e,this.type=Nt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gte{constructor(e){this.snapshot=e,this.type=Nt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class h2{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Nt.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class gS{}class dI{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}function Xs(t){return t.outlet||mt}function cm(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class Ite{get injector(){return cm(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lm(this.rootInjector),this.attachRef=null}}let lm=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ite(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static#e=this.\u0275fac=function(r){return new(r||t)(de(Lr))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class f2{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=mS(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=mS(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=_S(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _S(e,this._root).map(n=>n.value)}}function mS(t,e){if(t===e.value)return e;for(const n of e.children){const r=mS(t,n);if(r)return r}return null}function _S(t,e){if(t===e.value)return[e];for(const n of e.children){const r=_S(t,n);if(r.length)return r.unshift(e),r}return[]}class eo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function xh(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class p2 extends f2{constructor(e,n){super(e),this.snapshot=n,yS(this,e)}toString(){return this.snapshot.toString()}}function g2(t){const e=function wte(t){const s=new fI([],{},{},"",{},mt,t,null,{});return new m2("",new eo(s,[]))}(t),n=new H([new im("",{})]),r=new H({}),i=new H({}),s=new H({}),o=new H(""),a=new Oh(n,r,s,o,i,mt,t,e.root);return a.snapshot=e.root,new p2(new eo(a,[]),e)}class Oh{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Pe(d=>d[rm]))??Ve(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Pe(e=>Ph(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Pe(e=>Ph(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function hI(t,e,n="emptyOnly"){let r;const{routeConfig:i}=t;return r=null===e||"always"!==n&&""!==i?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...i?.data,...t._resolvedData}},i&&y2(i)&&(r.resolve[rm]=i.title),r}class fI{get title(){return this.data?.[rm]}constructor(e,n,r,i,s,o,a,u,d){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ph(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ph(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class m2 extends f2{constructor(e,n){super(n),this.url=e,yS(this,n)}toString(){return _2(this._root)}}function yS(t,e){e.value._routerState=t,e.children.forEach(n=>yS(t,n))}function _2(t){const e=t.children.length>0?` { ${t.children.map(_2).join(", ")} } `:"";return`${t.value}${e}`}function vS(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,So(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),So(e.params,n.params)||t.paramsSubject.next(n.params),function Oee(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!So(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),So(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function ES(t,e){const n=So(t.params,e.params)&&function Vee(t,e){return fl(t,e)&&t.every((n,r)=>So(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||ES(t.parent,e.parent))}function y2(t){return"string"==typeof t.title||null===t.title}let IS=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=mt,this.activateEvents=new Xt,this.deactivateEvents=new Xt,this.attachEvents=new Xt,this.detachEvents=new Xt,this.parentContexts=te(lm),this.location=te(Gs),this.changeDetector=te(Ih),this.inputBinder=te(pI,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=n;const i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new wS(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=tt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Li]})}return t})();class wS{__ngOutletInjector(e){return new wS(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Oh?this.route:e===lm?this.childContexts:this.parent.get(e,n)}}const pI=new pe("");let v2=(()=>{class t{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=oS([r.queryParams,r.params,r.data]).pipe(jn(([s,o,a],u)=>(a={...s,...o,...a},0===u?Ve(a):Promise.resolve(a)))).subscribe(s=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const o=function $Y(t){const e=dt(t);if(!e)return null;const n=new Tg(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)n.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function dm(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function Cte(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return dm(t,r,i);return dm(t,r)})}(t,e,n);return new eo(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>dm(t,a)),o}}const r=function Ate(t){return new Oh(new H(t.url),new H(t.params),new H(t.queryParams),new H(t.fragment),new H(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>dm(t,s));return new eo(r,i)}}class TS{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const E2="ngNavigationCancelingError";function gI(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=pl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=I2(!1,ls.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function I2(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[E2]=!0,n.cancellationCode=e,n}function w2(t){return!!t&&t[E2]}class Ste{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),vS(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=xh(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xh(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=xh(e);for(const o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const i=xh(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new gte(s.value.snapshot))}),e.children.length&&this.forwardEvent(new fte(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(vS(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),vS(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}}class T2{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class mI{constructor(e,n){this.component=e,this.route=n}}function Rte(t,e,n){const r=t._root;return hm(r,e?e._root:null,n,[r.value])}function kh(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function Wa(t){return null!==id(t)}(t)?e.get(t):t:r}function hm(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=xh(e);return t.children.forEach(o=>{(function Nte(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const u=function Mte(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fl(t.url,e.url)||!So(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ES(t,e)||!So(t.queryParams,e.queryParams);default:return!ES(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new T2(r)):(s.data=o.data,s._resolvedData=o._resolvedData),hm(t,e,s.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mI(a.outlet.component,o))}else o&&fm(e,a,i),i.canActivateChecks.push(new T2(r)),hm(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>fm(a,n.getContext(o),i)),i}function fm(t,e,n){const r=xh(t),i=t.value;Object.entries(r).forEach(([s,o])=>{fm(o,i.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new mI(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function pm(t){return"function"==typeof t}function C2(t){return t instanceof JE||"EmptyError"===t?.name}const _I=Symbol("INITIAL_VALUE");function Fh(){return jn(t=>oS(t.map(e=>e.pipe(bo(1),XE(_I)))).pipe(Pe(e=>{for(const n of e)if(!0!==n){if(n===_I)return _I;if(!1===n||Ute(n))return n}return!0}),Rs(e=>e!==_I),bo(1)))}function Ute(t){return pl(t)||t instanceof TS}function A2(t){return function hc(...t){return Jo(t)}(ei(e=>{if("boolean"!=typeof e)throw gI(0,e)}),Pe(e=>!0===e))}class CS{constructor(e){this.segmentGroup=e||null}}class yI extends Error{constructor(e){super(),this.urlTree=e}}function Lh(t){return ZE(new CS(t))}class Zte{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return Ve(r);if(i.numberOfChildren>1||!i.children[mt])return ZE(new ce(4e3,!1));i=i.children[mt]}}applyRedirectCommands(e,n,r,i,s){if("string"!=typeof n){const a=n,{queryParams:u,fragment:d,routeConfig:f,url:m,outlet:y,params:E,data:T,title:A}=i,D=Xi(s,()=>a({params:E,data:T,queryParams:u,fragment:d,routeConfig:f,url:m,outlet:y,title:A}));if(D instanceof hl)throw new yI(D);n=D}const o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if("/"===n[0])throw new yI(o);return o}applyRedirectCreateUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new hl(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&":"===s[0]){const a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new en(s,o)}createSegments(e,n,r,i){return n.map(s=>":"===s.path[0]?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new ce(4001,!1);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}const AS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xte(t,e,n,r,i){const s=DS(t,e,n);return s.matched?(r=function mte(t,e){return t.providers&&!t._injector&&(t._injector=jv(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function Qte(t,e,n,r){const i=e.canMatch;return i&&0!==i.length?Ve(i.map(o=>{const a=kh(o,t);return ku(function Vte(t){return t&&pm(t.canMatch)}(a)?a.canMatch(e,n):Xi(t,()=>a(e,n)))})).pipe(Fh(),A2()):Ve(!0)}(r,e,n).pipe(Pe(o=>!0===o?s:{...AS}))):Ve(s)}function DS(t,e,n){if("**"===e.path)return function ene(t){return{matched:!0,parameters:t.length>0?WU(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}(n);if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...AS}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||xee)(n,t,e);if(!i)return{...AS};const s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function D2(t,e,n,r){return n.length>0&&function rne(t,e,n){return n.some(r=>vI(t,e,r)&&Xs(r)!==mt)}(t,n,r)?{segmentGroup:new en(e,nne(r,new en(n,t.children))),slicedSegments:[]}:0===n.length&&function ine(t,e,n){return n.some(r=>vI(t,e,r))}(t,n,r)?{segmentGroup:new en(t.segments,tne(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new en(t.segments,t.children),slicedSegments:n}}function tne(t,e,n,r){const i={};for(const s of n)if(vI(t,e,s)&&!r[Xs(s)]){const o=new en([],{});i[Xs(s)]=o}return{...r,...i}}function nne(t,e){const n={};n[mt]=e;for(const r of t)if(""===r.path&&Xs(r)!==mt){const i=new en([],{});n[Xs(r)]=i}return n}function vI(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class ane{}class lne{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Zte(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){const e=D2(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Pe(({children:n,rootSnapshot:r})=>{const i=new eo(r,n),s=new m2("",i),o=function Xee(t,e,n=null,r=null){return s2(i2(t),e,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){const n=new fI([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),mt,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,mt,n).pipe(Pe(r=>({children:r,rootSnapshot:n})),Rh(r=>{if(r instanceof yI)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof CS?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Pe(o=>o instanceof eo?[o]:[]))}processChildren(e,n,r,i){const s=[];for(const o of Object.keys(r.children))"primary"===o?s.unshift(o):s.push(o);return Gt(s).pipe(cl(o=>{const a=r.children[o],u=function Ete(t,e){const n=t.filter(r=>Xs(r)===e);return n.push(...t.filter(r=>Xs(r)!==e)),n}(n,o);return this.processSegmentGroup(e,u,a,o,i)}),tI((o,a)=>(o.push(...a),o)),eI(null),function Ree(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Rs((i,s)=>t(i,s,r)):kr,uS(1),n?eI(e):GU(()=>new JE))}(),Xr(o=>{if(null===o)return Lh(r);const a=b2(o);return function dne(t){t.sort((e,n)=>e.value.outlet===mt?-1:n.value.outlet===mt?1:e.value.outlet.localeCompare(n.value.outlet))}(a),Ve(a)}))}processSegment(e,n,r,i,s,o,a){return Gt(n).pipe(cl(u=>this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,s,o,a).pipe(Rh(d=>{if(d instanceof CS)return Ve(null);throw d}))),Ou(u=>!!u),Rh(u=>{if(C2(u))return function one(t,e,n){return 0===e.length&&!t.children[n]}(r,i,s)?Ve(new ane):Lh(r);throw u}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,u){return function sne(t,e,n,r){return!!(Xs(t)===r||r!==mt&&vI(e,n,t))&&DS(e,t,n).matched}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,u):Lh(i):Lh(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){const{matched:u,parameters:d,consumedSegments:f,positionalParamSegments:m,remainingSegments:y}=DS(n,i,s);if(!u)return Lh(n);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const E=new fI(s,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,S2(i),Xs(i),i.component??i._loadedComponent??null,i,R2(i)),T=hI(E,a,this.paramsInheritanceStrategy);E.params=Object.freeze(T.params),E.data=Object.freeze(T.data);const A=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,m,E,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(Xr(D=>this.processSegment(e,r,n,D.concat(y),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){const a=Xte(n,r,i,e);return"**"===r.path&&(n.children={}),a.pipe(jn(u=>u.matched?this.getChildConfig(e=r._injector??e,r,i).pipe(jn(({routes:d})=>{const f=r._loadedInjector??e,{parameters:m,consumedSegments:y,remainingSegments:E}=u,T=new fI(y,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,S2(r),Xs(r),r.component??r._loadedComponent??null,r,R2(r)),A=hI(T,o,this.paramsInheritanceStrategy);T.params=Object.freeze(A.params),T.data=Object.freeze(A.data);const{segmentGroup:D,slicedSegments:F}=D2(n,y,E,d);if(0===F.length&&D.hasChildren())return this.processChildren(f,d,D,T).pipe(Pe(V=>new eo(T,V)));if(0===d.length&&0===F.length)return Ve(new eo(T,[]));const x=Xs(r)===s;return this.processSegment(f,d,D,F,x?mt:s,!0,T).pipe(Pe(V=>new eo(T,V instanceof eo?[V]:[])))})):Lh(n)))}getChildConfig(e,n,r){return n.children?Ve({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?Ve({routes:n._loadedRoutes,injector:n._loadedInjector}):function Kte(t,e,n,r){const i=e.canLoad;return void 0===i||0===i.length?Ve(!0):Ve(i.map(o=>{const a=kh(o,t);return ku(function Ote(t){return t&&pm(t.canLoad)}(a)?a.canLoad(e,n):Xi(t,()=>a(e,n)))})).pipe(Fh(),A2())}(e,n,r).pipe(Xr(i=>i?this.configLoader.loadChildren(e,n).pipe(ei(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Jte(){return ZE(I2(!1,ls.GuardRejected))}())):Ve({routes:[],injector:e})}}function hne(t){const e=t.value.routeConfig;return e&&""===e.path}function b2(t){const e=[],n=new Set;for(const r of t){if(!hne(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=b2(r.children);e.push(new eo(r.value,i))}return e.filter(r=>!n.has(r))}function S2(t){return t.data||{}}function R2(t){return t.resolve||{}}function P2(t){const e=t.children.map(n=>P2(n)).flat();return[t,...e]}function bS(t){return jn(e=>{const n=t(e);return n?Gt(n).pipe(Pe(()=>e)):Ve(e)})}let N2=(()=>{class t{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===mt);return r}getResolvedTitleForRoute(n){return n.data[rm]}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(yne),providedIn:"root"})}return t})(),yne=(()=>{class t extends N2{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||t)(de(cX))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Vh=new pe("",{providedIn:"root",factory:()=>({})});let M2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ho({type:t,selectors:[["ng-component"]],standalone:!0,features:[RF],decls:1,vars:0,template:function(r,i){1&r&&wi(0,"router-outlet")},dependencies:[IS],encapsulation:2})}return t})();function SS(t){const e=t.children&&t.children.map(SS),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==mt&&(n.component=M2),n}const Uh=new pe("");let RS=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(lL)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Ve(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ku(n.loadComponent()).pipe(Pe(x2),ei(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Zg(()=>{this.componentLoaders.delete(n)})),i=new zU(r,()=>new L).pipe(aS());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Ve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=function vne(t,e,n,r){return ku(t.loadChildren()).pipe(Pe(x2),Xr(i=>i instanceof Ik||Array.isArray(i)?Ve(i):Gt(e.compileModuleAsync(i))),Pe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,!0):(s=i.create(n).injector,o=s.get(Uh,[],{optional:!0,self:!0}).flat()),{routes:o.map(SS),injector:s}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(Zg(()=>{this.childrenLoaders.delete(r)})),o=new zU(s,()=>new L).pipe(aS());return this.childrenLoaders.set(r,o),o}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function x2(t){return function Ene(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let PS=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(Ine),providedIn:"root"})}return t})(),Ine=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const O2=new pe(""),k2=new pe("");function wne(t,e,n){const r=t.get(k2),i=t.get(Hi);return t.get(Rt).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let s;const o=new Promise(d=>{s=d}),a=i.startViewTransition(()=>(s(),function Tne(t){return new Promise(e=>{VO({read:()=>setTimeout(e)},{injector:t})})}(t))),{onViewTransitionCreated:u}=r;return u&&Xi(t,()=>u({transition:a,from:e,to:n})),o})}const F2=new pe("");let EI=(()=>{class t{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new L,this.transitionAbortSubject=new L,this.configLoader=te(RS),this.environmentInjector=te(Lr),this.urlSerializer=te(Nh),this.rootContexts=te(lm),this.location=te(qg),this.inputBindingEnabled=null!==te(pI,{optional:!0}),this.titleStrategy=te(N2),this.options=te(Vh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(PS),this.createViewTransition=te(O2,{optional:!0}),this.navigationErrorHandler=te(F2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Ve(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new dte(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new lte(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new H({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:um,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Rs(s=>0!==s.id),Pe(s=>({...s,extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),jn(s=>{let o=!1,a=!1;return Ve(s).pipe(jn(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",ls.SupersededByNewNavigation),Zs;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:"string"==typeof u.extras.browserUrl?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const d=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(u.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const m="";return this.events.next(new Mh(u.id,this.urlSerializer.serialize(u.rawUrl),m,lI.IgnoredSameUrlNavigation)),u.resolve(!1),Zs}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Ve(u).pipe(jn(m=>{const y=this.transitions?.getValue();return this.events.next(new cI(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),y!==this.transitions?.getValue()?Zs:Promise.resolve(m)}),function fne(t,e,n,r,i,s){return Xr(o=>function une(t,e,n,r,i,s,o="emptyOnly"){return new lne(t,e,n,r,i,o,s).recognize()}(t,e,n,r,o.extractedUrl,i,s).pipe(Pe(({state:a,tree:u})=>({...o,targetSnapshot:a,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),ei(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:m.urlAfterRedirects};const y=new d2(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(y)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){const{id:m,extractedUrl:y,source:E,restoredState:T,extras:A}=u,D=new cI(m,this.urlSerializer.serialize(y),E,T);this.events.next(D);const F=g2(this.rootComponentType).snapshot;return this.currentTransition=s={...u,targetSnapshot:F,urlAfterRedirects:y,extras:{...A,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=y,Ve(s)}{const m="";return this.events.next(new Mh(u.id,this.urlSerializer.serialize(u.extractedUrl),m,lI.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Zs}}),ei(u=>{const d=new ote(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Pe(u=>(this.currentTransition=s={...u,guards:Rte(u.targetSnapshot,u.currentSnapshot,this.rootContexts)},s)),function Bte(t,e){return Xr(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Ve({...n,guardsResult:!0}):function jte(t,e,n,r){return Gt(t).pipe(Xr(i=>function Wte(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ve(s.map(a=>{const u=cm(e)??i,d=kh(a,u);return ku(function Lte(t){return t&&pm(t.canDeactivate)}(d)?d.canDeactivate(t,e,n,r):Xi(u,()=>d(t,e,n,r))).pipe(Ou())})).pipe(Fh()):Ve(!0)}(i.component,i.route,n,e,r)),Ou(i=>!0!==i,!0))}(o,r,i,t).pipe(Xr(a=>a&&function xte(t){return"boolean"==typeof t}(a)?function $te(t,e,n,r){return Gt(e).pipe(cl(i=>tm(function zte(t,e){return null!==t&&e&&e(new hte(t)),Ve(!0)}(i.route.parent,r),function Hte(t,e){return null!==t&&e&&e(new pte(t)),Ve(!0)}(i.route,r),function qte(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Pte(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>GE(()=>Ve(o.guards.map(u=>{const d=cm(o.node)??n,f=kh(u,d);return ku(function Fte(t){return t&&pm(t.canActivateChild)}(f)?f.canActivateChild(r,t):Xi(d,()=>f(r,t))).pipe(Ou())})).pipe(Fh())));return Ve(s).pipe(Fh())}(t,i.path,n),function Gte(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Ve(!0);const i=r.map(s=>GE(()=>{const o=cm(e)??n,a=kh(s,o);return ku(function kte(t){return t&&pm(t.canActivate)}(a)?a.canActivate(e,t):Xi(o,()=>a(e,t))).pipe(Ou())}));return Ve(i).pipe(Fh())}(t,i.route,n))),Ou(i=>!0!==i,!0))}(r,s,t,e):Ve(a)),Pe(a=>({...n,guardsResult:a})))})}(this.environmentInjector,u=>this.events.next(u)),ei(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&"boolean"!=typeof u.guardsResult)throw gI(0,u.guardsResult);const d=new ate(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Rs(u=>!!u.guardsResult||(this.cancelNavigationTransition(u,"",ls.GuardRejected),!1)),bS(u=>{if(u.guards.canActivateChecks.length)return Ve(u).pipe(ei(d=>{const f=new ute(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),jn(d=>{let f=!1;return Ve(d).pipe(function pne(t,e){return Xr(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Ve(n);const s=new Set(i.map(u=>u.route)),o=new Set;for(const u of s)if(!o.has(u))for(const d of P2(u))o.add(d);let a=0;return Gt(o).pipe(cl(u=>s.has(u)?function gne(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!y2(i)&&(s[rm]=i.title),function mne(t,e,n,r){const i=cS(t);if(0===i.length)return Ve({});const s={};return Gt(i).pipe(Xr(o=>function _ne(t,e,n,r){const i=cm(e)??r,s=kh(t,i);return ku(s.resolve?s.resolve(e,n):Xi(i,()=>s(e,n)))}(t[o],e,n,r).pipe(Ou(),ei(a=>{if(a instanceof TS)throw gI(new rI,a);s[o]=a}))),uS(1),function Pee(t){return Pe(()=>t)}(s),Rh(o=>C2(o)?Zs:ZE(o)))}(s,t,e,r).pipe(Pe(o=>(t._resolvedData=o,t.data=hI(t,t.parent,n).resolve,null)))}(u,r,t,e):(u.data=hI(u,u.parent,t).resolve,Ve(void 0))),ei(()=>a++),uS(1),Xr(u=>a===o.size?Ve(n):Zs))})}(this.paramsInheritanceStrategy,this.environmentInjector),ei({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",ls.NoDataFromResolver)}}))}),ei(d=>{const f=new cte(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),bS(u=>{const d=f=>{const m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(ei(y=>{f.component=y}),Pe(()=>{})));for(const y of f.children)m.push(...d(y));return m};return oS(d(u.targetSnapshot.root)).pipe(eI(null),bo(1))}),bS(()=>this.afterPreactivation()),jn(()=>{const{currentSnapshot:u,targetSnapshot:d}=s,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Gt(f).pipe(Pe(()=>s)):Ve(s)}),Pe(u=>{const d=function Tte(t,e,n){const r=dm(t,e._root,n?n._root:void 0);return new p2(r,e)}(n.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s={...u,targetRouterState:d},this.currentNavigation.targetRouterState=d,s}),ei(()=>{this.events.next(new gS)}),((t,e,n,r)=>Pe(i=>(new Ste(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),bo(1),ei({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ca(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),function Nee(t){return Fe((e,n)=>{cs(t).subscribe($e(n,()=>n.complete(),hi)),!n.closed&&e.subscribe(n)})}(this.transitionAbortSubject.pipe(ei(u=>{throw u}))),Zg(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",ls.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rh(u=>{if(a=!0,w2(u))this.events.next(new gl(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),function Dte(t){return w2(t)&&pl(t.url)}(u)?this.events.next(new dI(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{const d=new pS(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{const f=Xi(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof TS){const{message:m,cancellationCode:y}=gI(0,f);this.events.next(new gl(s.id,this.urlSerializer.serialize(s.extractedUrl),m,y)),this.events.next(new dI(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);const m=n.errorHandler(u);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Zs}))}))}cancelNavigationTransition(n,r,i){const s=new gl(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Cne(t){return t!==um}let Ane=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(bne),providedIn:"root"})}return t})();class Dne{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let bne=(()=>{class t extends Dne{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),L2=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:()=>te(Sne),providedIn:"root"})}return t})(),Sne=(()=>{class t extends L2{constructor(){super(...arguments),this.location=te(qg),this.urlSerializer=te(Nh),this.options=te(Vh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(PS),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new hl,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=g2(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof cI)this.stateMemento=this.createStateMemento();else if(n instanceof Mh)this.rawUrlTree=r.initialUrl;else if(n instanceof d2){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof gS?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof gl&&(n.code===ls.GuardRejected||n.code===ls.NoDataFromResolver)?this.restoreHistory(r):n instanceof pS?this.restoreHistory(r,!0):n instanceof Ca&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){const i=n instanceof hl?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",s)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-this.browserPageId;0!==s?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&0===s&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var gm=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(gm||{});function V2(t,e){t.events.pipe(Rs(n=>n instanceof Ca||n instanceof gl||n instanceof pS||n instanceof Mh),Pe(n=>n instanceof Ca||n instanceof Mh?gm.COMPLETE:n instanceof gl&&(n.code===ls.Redirect||n.code===ls.SupersededByNewNavigation)?gm.REDIRECTING:gm.FAILED),Rs(n=>n!==gm.REDIRECTING),bo(1)).subscribe(()=>{e()})}function Rne(t){throw t}const Pne={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Nne={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Po=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=te(XF),this.stateManager=te(L2),this.options=te(Vh,{optional:!0})||{},this.pendingTasks=te(ga),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(EI),this.urlSerializer=te(Nh),this.location=te(qg),this.urlHandlingStrategy=te(PS),this._events=new L,this.errorHandler=this.options.errorHandler||Rne,this.navigated=!1,this.routeReuseStrategy=te(Ane),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(Uh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(pI,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(null!==i&&null!==s)if(this.stateManager.handleRouterEvent(r,s),r instanceof gl&&r.code!==ls.Redirect&&r.code!==ls.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ca)this.navigated=!0;else if(r instanceof dI){const o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Cne(i.source),...o};this.scheduleNavigation(a,um,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function xne(t){return!(t instanceof gS||t instanceof dI)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),um,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const u={...i};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(SS),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,d=u?this.currentUrlTree.fragment:o;let m,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}null!==f&&(f=this.removeEmptyProps(f));try{m=i2(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),m=this.currentUrlTree.root}return s2(m,n,f,d??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=pl(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,um,null,r)}navigate(n,r={skipLocationChange:!1}){return function Mne(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new ce(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(i=!0===r?{...Pne}:!1===r?{...Nne}:r,pl(n))return QU(this.currentUrlTree,n,i);const s=this.parseUrl(n);return QU(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(null!=s&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,d;o?(a=o.resolve,u=o.reject,d=o.promise):d=new Promise((m,y)=>{a=m,u=y});const f=this.pendingTasks.add();return V2(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),mm=(()=>{class t{constructor(n,r,i,s,o,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.onChanges=new L,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const u=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=n.events.subscribe(d=>{d instanceof Ca&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=pl(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,s,o){const a=this.urlTree;return!!(null===a||this.isAnchorElement&&(0!==n||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(a,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.href=null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n)):null;const r=null===this.href?null:function vx(t,e,n){return function d6(t,e){return"src"===e&&("embed"===t||"frame"===t||"iframe"===t||"media"===t||"script"===t)||"href"===e&&("base"===t||"link"===t)?_x:sg}(e,n)(t)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(n,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,n,r):i.removeAttribute(s,n)}get urlTree(){return null===this.routerLinkInput?null:pl(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||t)(me(Po),me(Oh),function Wp(t){return function kq(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(Ny(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Lt(),t)}("tabindex"),me(va),me(rs),me(al))};static#t=this.\u0275dir=tt({type:t,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&as("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&r&&qs("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",wh],skipLocationChange:[2,"skipLocationChange","skipLocationChange",wh],replaceUrl:[2,"replaceUrl","replaceUrl",wh],routerLink:"routerLink"},standalone:!0,features:[Ek,Li]})}return t})();class U2{}let Fne=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Rs(n=>n instanceof Ca),cl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=jv(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Gt(i).pipe(Sh())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):Ve(null);const s=i.pipe(Xr(o=>null===o?Ve(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?Gt([s,this.loader.loadComponent(r)]).pipe(Sh()):s})}static#e=this.\u0275fac=function(r){return new(r||t)(de(Po),de(lL),de(Lr),de(U2),de(RS))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const NS=new pe("");let B2=(()=>{class t{constructor(n,r,i,s,o={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof cI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Ca?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Mh&&n.code===lI.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof h2&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new h2(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){!function zx(){throw new Error("invalid")}()};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac})}return t})();function No(t,e){return{\u0275kind:t,\u0275providers:e}}function $2(){const t=te(tr);return e=>{const n=t.get(Qs);if(e!==n.components[0])return;const r=t.get(Po),i=t.get(H2);1===t.get(MS)&&r.initialNavigation(),t.get(z2,null,vt.Optional)?.setUpPreloading(),t.get(NS,null,vt.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const H2=new pe("",{factory:()=>new L}),MS=new pe("",{providedIn:"root",factory:()=>1}),z2=new pe("");function Bne(t){return No(0,[{provide:z2,useExisting:Fne},{provide:U2,useExisting:t}])}function $ne(t){return No(9,[{provide:O2,useValue:wne},{provide:k2,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const G2=new pe("ROUTER_FORROOT_GUARD"),Hne=[qg,{provide:Nh,useClass:rI},Po,lm,{provide:Oh,useFactory:function j2(t){return t.routerState.root},deps:[Po]},RS,[]];let q2=(()=>{class t{constructor(n){}static forRoot(n,r){return{ngModule:t,providers:[Hne,[],{provide:Uh,multi:!0,useValue:n},{provide:G2,useFactory:Wne,deps:[[Po,new Rc,new lp]]},{provide:Vh,useValue:r||{}},r?.useHash?{provide:al,useClass:WY}:{provide:al,useClass:oV},{provide:NS,useFactory:()=>{const t=te(uZ),e=te(Rt),n=te(Vh),r=te(EI),i=te(Nh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new B2(i,r,t,e,n)}},r?.preloadingStrategy?Bne(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Kne(r):[],r?.bindToComponentInputs?No(8,[v2,{provide:pI,useExisting:v2}]).\u0275providers:[],r?.enableViewTransitions?$ne().\u0275providers:[],[{provide:W2,useFactory:$2},{provide:uE,multi:!0,useExisting:W2}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Uh,multi:!0,useValue:n}]}}static#e=this.\u0275fac=function(r){return new(r||t)(de(G2,8))};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({})}return t})();function Wne(t){return"guarded"}function Kne(t){return["disabled"===t.initialNavigation?No(3,[{provide:sb,multi:!0,useFactory:()=>{const e=te(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:MS,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?No(2,[{provide:MS,useValue:0},{provide:sb,multi:!0,deps:[tr],useFactory:e=>{const n=e.get(GY,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=e.get(Po),s=e.get(H2);V2(i,()=>{r(!0)}),e.get(EI).afterPreactivation=()=>(r(!0),s.closed?Ve(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const W2=new pe("");var Mo=ct(852);(0,Mo.registerVersion)("firebase","10.13.0","app");class Zne extends zt{constructor(e,n){super()}schedule(e,n=0){return this}}const II={setInterval(t,e,...n){const{delegate:r}=II;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=II;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};class K2 extends Zne{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return II.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&II.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Qn(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}class _m{constructor(e,n=_m.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}_m.now=Jb.now;class Q2 extends _m{constructor(e,n=_m.now){super(e,n),this.actions=[],this._active=!1}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}const tre=new class ere extends Q2{}(class Xne extends K2{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}}),xS=new Q2(K2),wI=new Eh("ANGULARFIRE2_VERSION");class OS{constructor(){return(t=>{const n=(0,Mo.getApps)(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(rre)}}const rre="app-check";function Bh(){}class Y2{zone;delegate;constructor(e,n=tre){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},n,r)}}class ire{zone;task=null;constructor(e){this.zone=e}call(e,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bh,{},Bh,Bh)),n.pipe(ei({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let kS=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Y2(Zone.current)),this.insideAngular=n.run(()=>new Y2(Zone.current,xS)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(de(Rt))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jh(){const t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return t}function J2(t){return t.pipe(Su(jh().outsideAngular))}function Di(t){return function ore(t){return function(n){return(n=n.lift(new ire(t.ngZone))).pipe(Dh(t.outsideAngular),Su(t.insideAngular))}}(jh())(t)}var xo=ct(345);xo.A.registerVersion("firebase","10.13.0","app-compat");const dre=["ngOnDestroy"];class Z2{constructor(e){return e}}const ym=new pe("angularfire2.app.options"),vm=new pe("angularfire2.app.name");function TI(t,e,n){const i="object"==typeof n&&n||{};i.name=i.name||"string"==typeof n&&n||"[DEFAULT]";const o=xo.A.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>xo.A.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(o.options)){const a=!!module.hot;pre("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Z2(o)}const pre=(t,...e)=>{},gre={provide:Z2,useFactory:TI,deps:[ym,Rt,[new Rc,vm]]};let X2=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:ym,useValue:n},{provide:vm,useValue:r}]}}constructor(n){xo.A.registerVersion("angularfire",wI.full,"core"),xo.A.registerVersion("angularfire",wI.full,"app-compat"),xo.A.registerVersion("angular",J7.full,n.toString())}static \u0275fac=function(r){return new(r||t)(de(is))};static \u0275mod=gr({type:t});static \u0275inj=ur({providers:[gre]})}return t})();function FS(t,e,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(s)return function mre(t,e){try{return t.toString()===e.toString()}catch{return t===e}}(i,o)||(eB("error",`${e} was already initialized on the ${n} Firebase App with different settings.${_re?" You may need to reload as Firebase is not HMR aware.":""}`),eB("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}const _re=typeof module<"u"&&!!module.hot,eB=(t,...e)=>{};globalThis.\u0275AngularfireInstanceCache||=[];var _t=ct(76),CI=ct(362);const tB="firebasestorage.googleapis.com",nB="storageBucket";class $n extends _t.g{constructor(e,n,r=0){super(LS(e),`Firebase Storage: ${n} (${LS(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return LS(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Mn=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Mn||{});function LS(t){return"storage/"+t}function VS(){return new $n(Mn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rB(){return new $n(Mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iB(){return new $n(Mn.CANCELED,"User canceled the upload/download.")}function sB(){return new $n(Mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $h(t){return new $n(Mn.INVALID_ARGUMENT,t)}function oB(){return new $n(Mn.APP_DELETED,"The Firebase app was deleted.")}function aB(t){return new $n(Mn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Em(t,e){return new $n(Mn.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Im(t){throw new $n(Mn.INTERNAL_ERROR,"Internal error: "+t)}class ti{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ti.makeFromUrl(e,n)}catch{return new ti(e,"")}if(""===r.path)return r;throw function bre(t){return new $n(Mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function d(ee){ee.path_=decodeURIComponent(ee.path)}const m=n.replace(/[.]/g,"\\."),V=[{regex:a,indices:{bucket:1,path:3},postModify:function s(ee){"/"===ee.path.charAt(ee.path.length-1)&&(ee.path_=ee.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${m}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:d},{regex:new RegExp(`^https?://${n===tB?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:d}];for(let ee=0;ee<V.length;ee++){const ve=V[ee],Te=ve.regex.exec(e);if(Te){let S=Te[ve.indices.path];S||(S=""),r=new ti(Te[ve.indices.bucket],S),ve.postModify(r);break}}if(null==r)throw function Dre(t){return new $n(Mn.INVALID_URL,"Invalid URL '"+t+"'.")}(e);return r}}class Mre{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function AI(t){return"string"==typeof t||t instanceof String}function uB(t){return US()&&t instanceof Blob}function US(){return typeof Blob<"u"}function BS(t,e,n,r){if(r<e)throw $h(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw $h(`Invalid value for '${t}'. Expected ${n} or less.`)}function Aa(t,e,n){let r=e;return null==n&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function cB(t){const e=encodeURIComponent;let n="?";for(const r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n=n.slice(0,-1),n}var Hh=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Hh||{});function lB(t,e){const n=t>=500&&t<600,i=-1!==[408,429].indexOf(t),s=-1!==e.indexOf(t);return n||i||s}class Vre{constructor(e,n,r,i,s,o,a,u,d,f,m,y=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,T)=>{this.resolve_=E,this.reject_=T,this.start_()})}start_(){const n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());!function kre(t){return void 0!==t}(u)?s():s(u)}catch(u){o(u)}else if(null!==a){const u=VS();u.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,u):u)}else o(i.canceled?this.appDelete_?oB():iB():rB())};this.canceled_?n(0,new DI(!1,null,!0)):this.backoffId_=function xre(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return 2===a}let d=!1;function f(...D){d||(d=!0,e.apply(null,D))}function m(D){i=setTimeout(()=>{i=null,t(E,u())},D)}function y(){s&&clearTimeout(s)}function E(D,...F){if(d)return void y();if(D)return y(),void f.call(null,D,...F);if(u()||o)return y(),void f.call(null,D,...F);let V;r<64&&(r*=2),1===a?(a=2,V=0):V=1e3*(r+Math.random()),m(V)}let T=!1;function A(D){T||(T=!0,y(),!d&&(null!==i?(D||(a=2),clearTimeout(i),m(0)):D||(a=1)))}return m(0),s=setTimeout(()=>{o=!0,A(!0)},n),A}((r,i)=>{if(i)return void r(!1,new DI(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Hh.NO_ERROR,u=s.getStatus();if(!a||lB(u,this.additionalRetryCodes_)&&this.retry){const f=s.getErrorCode()===Hh.ABORT;return void r(!1,new DI(!1,null,f))}const d=-1!==this.successCodes_.indexOf(u);r(!0,new DI(d,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Ore(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class DI{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Gre(...t){const e=function zre(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}if(US())return new Blob(t);throw new $n(Mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jS{constructor(e,n){this.data=e,this.contentType=n||null}}function $S(t,e){switch(t){case ds.RAW:return new jS(dB(e));case ds.BASE64:case ds.BASE64URL:return new jS(hB(t,e));case ds.DATA_URL:return new jS(function Qre(t){const e=new fB(t);return e.base64?hB(ds.BASE64,e.rest):function Kre(t){let e;try{e=decodeURIComponent(t)}catch{throw Em(ds.DATA_URL,"Malformed data URL.")}return dB(e)}(e.rest)}(e),function Yre(t){return new fB(t).contentType}(e))}throw VS()}function dB(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function hB(t,e){switch(t){case ds.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Em(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ds.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Em(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function Wre(t){if(typeof atob>"u")throw function Nre(t){return new $n(Mn.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(t)}(e)}catch(i){throw i.message.includes("polyfill")?i:Em(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class fB{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Em(ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;null!=r&&(this.base64=function Jre(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Oo{constructor(e,n){let r=0,i="";uB(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(uB(this.data_)){const i=function qre(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===i?null:new Oo(i)}{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Oo(r,!0)}}static getBlob(...e){if(US()){const n=e.map(r=>r instanceof Oo?r.data_:r);return new Oo(Gre.apply(null,n))}{const n=e.map(o=>AI(o)?$S(ds.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Oo(i,!0)}}uploadData(){return this.data_}}function HS(t){let e;try{e=JSON.parse(t)}catch{return null}return function Lre(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}function pB(t){const e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function eie(t,e){return e}class bi{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||eie}}let bI=null;function wm(){if(bI)return bI;const t=[];t.push(new bi("bucket")),t.push(new bi("generation")),t.push(new bi("metageneration")),t.push(new bi("name","fullPath",!0));const n=new bi("name");n.xform=function e(s,o){return function tie(t){return!AI(t)||t.length<2?t:pB(t)}(o)},t.push(n);const i=new bi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},t.push(i),t.push(new bi("timeCreated")),t.push(new bi("updated")),t.push(new bi("md5Hash",null,!0)),t.push(new bi("cacheControl",null,!0)),t.push(new bi("contentDisposition",null,!0)),t.push(new bi("contentEncoding",null,!0)),t.push(new bi("contentLanguage",null,!0)),t.push(new bi("contentType",null,!0)),t.push(new bi("metadata","customMetadata",!0)),bI=t,bI}function gB(t,e,n){const r=HS(e);return null===r?null:function rie(t,e,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return function nie(t,e){Object.defineProperty(t,"ref",{get:function n(){const s=new ti(t.bucket,t.fullPath);return e._makeStorageReference(s)}})}(r,t),r}(t,r,n)}function zS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}const mB="prefixes",_B="items";class ko{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Fo(t){if(!t)throw VS()}function SI(t,e){return function n(r,i){const s=gB(t,i,e);return Fo(null!==s),s}}function zh(t){return function e(n,r){let i;return i=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Cre(){return new $n(Mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Tre(){return new $n(Mn.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function wre(t){return new $n(Mn.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function Are(t){return new $n(Mn.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}(t.path):r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}}function Tm(t){const e=zh(t);return function n(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function Ire(t){return new $n(Mn.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}(t.path)),s.serverResponse=i.serverResponse,s}}function yB(t,e,n){const i=Aa(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new ko(i,"GET",SI(t,n),o);return a.errorHandler=Tm(e),a}function cie(t,e,n,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Aa(e.bucketOnlyServerUrl(),t.host,t._protocol),d=t.maxOperationRetryTime,f=new ko(a,"GET",function aie(t,e){return function n(r,i){const s=function oie(t,e,n){const r=HS(n);return null===r?null:function sie(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[mB])for(const i of n[mB]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new ti(e,s));r.prefixes.push(o)}if(n[_B])for(const i of n[_B]){const s=t._makeStorageReference(new ti(e,i.name));r.items.push(s)}return r}(t,e,r)}(t,e,i);return Fo(null!==s),s}}(t,e.bucket),d);return f.urlParams=s,f.errorHandler=zh(e),f}function EB(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function fie(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class RI{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function GS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Fo(!1)}return Fo(!!n&&-1!==(e||["active"]).indexOf(n)),n}const _ie={STATE_CHANGED:"state_changed"},Si={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function qS(t){switch(t){case"running":case"pausing":case"canceling":return Si.RUNNING;case"paused":return Si.PAUSED;case"success":return Si.SUCCESS;case"canceled":return Si.CANCELED;default:return Si.ERROR}}class yie{constructor(e,n,r){if(function Fre(t){return"function"==typeof t}(e)||null!=n||null!=r)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Gh(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}let TB=null;class vie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Im("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Im("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Im("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Im("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Im("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Eie extends vie{initXhr(){this.xhr_.responseType="text"}}function to(){return TB?TB():new Eie}class CB{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=wm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(Mn.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(lB(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=rB()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(Mn.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const r=function pie(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=EB(e,r,i),a={name:o.fullPath},u=Aa(s,t.host,t._protocol),f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=zS(o,n),T=new ko(u,"POST",function E(A){let D;GS(A);try{D=A.getResponseHeader("X-Goog-Upload-URL")}catch{Fo(!1)}return Fo(AI(D)),D},t.maxUploadRetryTime);return T.urlParams=a,T.headers=f,T.body=m,T.errorHandler=zh(e),T}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=function gie(t,e,n,r){const u=new ko(n,"POST",function s(d){const f=GS(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Fo(!1)}m||Fo(!1);const y=Number(m);return Fo(!isNaN(y)),new RI(y,r.size(),"final"===f)},t.maxUploadRetryTime);return u.headers={"X-Goog-Upload-Command":"query"},u.errorHandler=zh(e),u}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,to,n,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new RI(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function mie(t,e,n,r,i,s,o,a){const u=new RI(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw function Rre(){return new $n(Mn.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const d=u.total-u.current;let f=d;i>0&&(f=Math.min(f,i));const m=u.current;let E="";E=0===f?"finalize":d===f?"upload, finalize":"upload";const T={"X-Goog-Upload-Command":E,"X-Goog-Upload-Offset":`${u.current}`},A=r.slice(m,m+f);if(null===A)throw sB();const V=new ko(n,"POST",function D(ee,ve){const Te=GS(ee,["active","final"]),k=u.current+f,S=r.size();let M;return M="final"===Te?SI(e,s)(ee,ve):null,new RI(k,S,"final"===Te,M)},e.maxUploadRetryTime);return V.headers=T,V.body=A.uploadData(),V.progressCallback=a||null,V.errorHandler=zh(t),V}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){return this._error=u,void this._transition("error")}const a=this._ref.storage._makeRequest(o,to,i,s,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=yB(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=function IB(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},u=function a(){let V="";for(let ee=0;ee<2;ee++)V+=Math.random().toString().slice(2);return V}();o["Content-Type"]="multipart/related; boundary="+u;const d=EB(e,r,i),f=zS(d,n),E=Oo.getBlob("--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+f+"\r\n--"+u+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",r,"\r\n--"+u+"--");if(null===E)throw sB();const T={name:d.fullPath},A=Aa(s,t.host,t._protocol),F=t.maxUploadRetryTime,x=new ko(A,"POST",SI(t,n),F);return x.urlParams=T,x.headers=o,x.body=E.uploadData(),x.errorHandler=zh(e),x}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,to,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=iB(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=qS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new yie(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(qS(this._state)){case Si.SUCCESS:Gh(this._resolve.bind(null,this.snapshot))();break;case Si.CANCELED:case Si.ERROR:Gh(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(qS(this._state)){case Si.RUNNING:case Si.PAUSED:e.next&&Gh(e.next.bind(e,this.snapshot))();break;case Si.SUCCESS:e.complete&&Gh(e.complete.bind(e))();break;default:e.error&&Gh(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class _l{constructor(e,n){this._service=e,this._location=n instanceof ti?n:ti.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new _l(e,n)}get root(){const e=new ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pB(this._location.path)}get storage(){return this._service}get parent(){const e=function Zre(t){if(0===t.length)return null;const e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;const n=new ti(this._location.bucket,e);return new _l(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw aB(e)}}function DB(t,e,n){return WS.apply(this,arguments)}function WS(){return(WS=(0,re.A)(function*(t,e,n){const i=yield bB(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield DB(t,e,i.nextPageToken))})).apply(this,arguments)}function bB(t,e){null!=e&&"number"==typeof e.maxResults&&BS("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=cie(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,to)}function Mie(t){t._throwIfRoot("getDownloadURL");const e=function lie(t,e,n){const i=Aa(e.fullServerUrl(),t.host,t._protocol),o=t.maxOperationRetryTime,a=new ko(i,"GET",function uie(t,e){return function n(r,i){const s=gB(t,i,e);return Fo(null!==s),function iie(t,e,n,r){const i=HS(e);if(null===i||!AI(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const m=t.fullPath;return Aa("/b/"+o(t.bucket)+"/o/"+o(m),n,r)+cB({alt:"media",token:d})})[0]}(s,i,t.host,t._protocol)}}(t,n),o);return a.errorHandler=Tm(e),a}(t.storage,t._location,wm());return t.storage.makeRequestWithTokens(e,to).then(n=>{if(null===n)throw function Pre(){return new $n(Mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function SB(t,e){const n=function Xre(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new ti(t._location.bucket,n);return new _l(t.storage,r)}function RB(t,e){if(t instanceof KS){const n=t;if(null==n._bucket)throw function Sre(){return new $n(Mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nB+"' property when initializing the app?")}();const r=new _l(n,n._bucket);return null!=e?RB(r,e):r}return void 0!==e?SB(t,e):t}function Fie(t,e){if(e&&function Oie(t){return/^[A-Za-z]+:\/\//.test(t)}(e)){if(t instanceof KS)return function kie(t,e){return new _l(t,e)}(t,e);throw $h("To use ref(service, url), the first argument must be a Storage instance.")}return RB(t,e)}function PB(t,e){const n=e?.[nB];return null==n?null:ti.makeFromBucketSpec(n,t)}class KS{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=tB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ti.makeFromBucketSpec(i,this._host):PB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ti.makeFromBucketSpec(this._url,e):PB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){BS("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){BS("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,re.A)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const r=yield n.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,re.A)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _l(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Mre(oB());{const o=function Hre(t,e,n,r,i,s,o=!0){const a=cB(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return function jre(t,e){e&&(t["X-Firebase-GMPID"]=e)}(d,e),function Ure(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(d,n),function Bre(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(d,s),function $re(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(d,r),new Vre(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var r=this;return(0,re.A)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,n,i,s).getPromise()})()}}const NB="@firebase/storage";function OB(t,e){return Fie(t=(0,_t.Ku)(t),e)}function qie(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new KS(n,r,i,e,Mo.SDK_VERSION)}!function Wie(){(0,Mo._registerComponent)(new CI.uA("storage",qie,"PUBLIC").setMultipleInstances(!0)),(0,Mo.registerVersion)(NB,"0.13.0",""),(0,Mo.registerVersion)(NB,"0.13.0","esm2017")}();class PI{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class FB{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new PI(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new PI(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(s="function"==typeof n?o=>n(new PI(o,this,this._ref)):{next:n.next?o=>n.next(new PI(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class LB{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Da(e,this._service))}get items(){return this._delegate.items.map(e=>new Da(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Da{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function Gie(t,e){return SB(t,e)}(this._delegate,e);return new Da(n,this.storage)}get root(){return new Da(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Da(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new FB(function Vie(t,e,n){return function bie(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new CB(t,new Oo(e),n)}(t=(0,_t.Ku)(t),e,n)}(this._delegate,e,n),this)}putString(e,n=ds.RAW,r){this._throwIfRoot("putString");const i=$S(n,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new FB(new CB(this._delegate,new Oo(i.data,!0),s),this)}listAll(){return function $ie(t){return function Rie(t){const e={prefixes:[],items:[]};return DB(t,e).then(()=>e)}(t=(0,_t.Ku)(t))}(this._delegate).then(e=>new LB(e,this.storage))}list(e){return function jie(t,e){return bB(t=(0,_t.Ku)(t),e)}(this._delegate,e||void 0).then(n=>new LB(n,this.storage))}getMetadata(){return function Uie(t){return function Pie(t){t._throwIfRoot("getMetadata");const e=yB(t.storage,t._location,wm());return t.storage.makeRequestWithTokens(e,to)}(t=(0,_t.Ku)(t))}(this._delegate)}updateMetadata(e){return function Bie(t,e){return function Nie(t,e){t._throwIfRoot("updateMetadata");const n=function die(t,e,n,r){const s=Aa(e.fullServerUrl(),t.host,t._protocol),a=zS(n,r),d=t.maxOperationRetryTime,f=new ko(s,"PATCH",SI(t,r),d);return f.headers={"Content-Type":"application/json; charset=utf-8"},f.body=a,f.errorHandler=Tm(e),f}(t.storage,t._location,e,wm());return t.storage.makeRequestWithTokens(n,to)}(t=(0,_t.Ku)(t),e)}(this._delegate,e)}getDownloadURL(){return function Hie(t){return Mie(t=(0,_t.Ku)(t))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function zie(t){return function xie(t){t._throwIfRoot("deleteObject");const e=function hie(t,e){const r=Aa(e.fullServerUrl(),t.host,t._protocol),a=new ko(r,"DELETE",function o(u,d){},t.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=Tm(e),a}(t.storage,t._location);return t.storage.makeRequestWithTokens(e,to)}(t=(0,_t.Ku)(t))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw aB(e)}}class VB{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UB(e))throw $h("ref() expected a child path but got a URL, use refFromURL instead.");return new Da(OB(this._delegate,e),this)}refFromURL(e){if(!UB(e))throw $h("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ti.makeFromUrl(e,this._delegate.host)}catch{throw $h("refFromUrl() expected a valid full URL but got an invalid one.")}return new Da(OB(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){!function kB(t,e,n,r={}){!function Lie(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken="string"==typeof i?i:(0,_t.Fy)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,e,n,r)}}function UB(t){return/^[A-Za-z]+:\/\//.test(t)}function Jie(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new VB(n,r)}function BB(t){const e=function Xie(t){return new Wt(e=>{const n=o=>e.next(o);n(t.snapshot);const s=t.on("state_changed",n);return t.then(o=>{n(o),e.complete()},o=>{n(t.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(function ure(t,e=xS){return Fe((n,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const d=s;s=null,r.next(d)}};function u(){const d=o+t,f=e.now();if(f<d)return i=this.schedule(void 0,d-f),void r.add(i);a()}n.subscribe($e(r,d=>{s=d,o=e.now(),i||(i=e.schedule(u,t),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Pe(n=>n.bytesTransferred/n.totalBytes*100))}}function NI(t){return{getDownloadURL:()=>Ve(void 0).pipe(J2,jn(()=>t.getDownloadURL()),Di),getMetadata:()=>Ve(void 0).pipe(J2,jn(()=>t.getMetadata()),Di),delete:()=>Gt(t.delete()),child:e=>NI(t.child(e)),updateMetadata:e=>Gt(t.updateMetadata(e)),put:(e,n)=>BB(t.put(e,n)),putString:(e,n,r)=>BB(t.putString(e,n,r)),list:e=>Gt(t.list(e)),listAll:()=>Gt(t.listAll())}}!function Zie(t){const e={TaskState:Si,TaskEvent:_ie,StringFormat:ds,Storage:VB,Reference:Da};t.INTERNAL.registerComponent(new CI.uA("storage-compat",Jie,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage-compat","0.3.10")}(xo.A);const ese=new pe("angularfire2.storageBucket"),tse=new pe("angularfire2.storage.maxUploadRetryTime"),nse=new pe("angularfire2.storage.maxOperationRetryTime"),rse=new pe("angularfire2.storage.use-emulator");let ise=(()=>{class t{storage;constructor(n,r,i,s,o,a,u,d,f,m){const y=TI(n,o,r);this.storage=FS(`${y.name}.storage.${i}`,"AngularFireStorage",y.name,()=>{const E=o.runOutsideAngular(()=>y.storage(i||void 0)),T=f;return T&&E.useEmulator(...T),u&&E.setMaxUploadRetryTime(u),d&&E.setMaxOperationRetryTime(d),E},[u,d])}ref(n){return NI(this.storage.ref(n))}refFromURL(n){return NI(this.storage.refFromURL(n))}upload(n,r,i){return NI(this.storage.ref(n)).put(r,i)}static \u0275fac=function(r){return new(r||t)(de(ym),de(vm,8),de(ese,8),de(is),de(Rt),de(kS),de(tse,8),de(nse,8),de(rse,8),de(OS,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),sse=(()=>{class t{constructor(n){this.storage=n}getImageUrl(n){return this.storage.ref(n).getDownloadURL()}static#e=this.\u0275fac=function(r){return new(r||t)(de(ise))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const jB=t=>({active:t});function ose(t,e){if(1&t&&wi(0,"li",12),2&t){const n=e.index;jr("ngClass",YD(3,jB,0===n)),qs("data-bs-target","#carouselExampleIndicators")("data-bs-slide-to",n)}}function ase(t,e){if(1&t&&(Ze(0,"div",13),wi(1,"img",14),Qe()),2&t){const n=e.$implicit;jr("ngClass",YD(2,jB,0===e.index)),Pt(),jr("src",n,sg)}}function use(t,e){if(1&t&&(Ze(0,"div",2)(1,"ol",3),To(2,ose,1,5,"li",4),Qe(),Ze(3,"div",5),To(4,ase,2,4,"div",6),Qe(),Ze(5,"a",7),wi(6,"span",8),Ze(7,"span",9),yt(8,"Previous"),Qe()(),Ze(9,"a",10),wi(10,"span",11),Ze(11,"span",9),yt(12,"Next"),Qe()()()),2&t){const n=mh();Pt(2),jr("ngForOf",n.imageUrls),Pt(2),jr("ngForOf",n.imageUrls)}}function cse(t,e){1&t&&(Ze(0,"div")(1,"p"),yt(2,"No images available."),Qe()())}let lse=(()=>{class t{constructor(n){this.storageService=n,this.imageUrls=[]}ngOnInit(){["images/carousel/image1.png","images/carousel/image2.png","images/carousel/image3.png"].forEach(r=>{this.storageService.getImageUrl(r).subscribe(i=>{this.imageUrls.push(i)})})}static#e=this.\u0275fac=function(r){return new(r||t)(me(sse))};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-pictures"]],decls:2,vars:2,consts:[["id","carouselExampleIndicators","class","carousel slide",4,"ngIf"],[4,"ngIf"],["id","carouselExampleIndicators",1,"carousel","slide"],[1,"carousel-indicators"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["href","#carouselExampleIndicators","role","button","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["href","#carouselExampleIndicators","role","button","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],[3,"ngClass"],[1,"carousel-item",3,"ngClass"],["alt","Picture",1,"d-block","w-100",3,"src"]],template:function(r,i){1&r&&To(0,use,13,2,"div",0)(1,cse,3,0,"div",1),2&r&&(jr("ngIf",i.imageUrls.length>0),Pt(),jr("ngIf",0===i.imageUrls.length))},dependencies:[yV,ME,xE]})}return t})(),dse=(()=>{class t{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-contact"]],decls:33,vars:0,consts:[["lang","en"],["charset","utf-8"],["name","viewport","content","width=device-width, initial-scale=1"],[1,"contact-info"],[1,"map-container"],["src",yx`https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12345!2d-15.0000000!3d30.0000000!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0000000000000000%3A0x0000000000000000!2sCalle%20Escaleritas%2C%20123%2C%20Las%20Palmas%2C%20España!5e0!3m2!1ses!2ses!4v1613587200000!5m2!1ses!2ses`,"width","100%","height","100%","allowfullscreen","","loading","lazy",2,"border","0"],[1,"about-me"],["src","ruta/de/tu/foto.jpg","alt","Foto de [Tu Nombre]"]],template:function(r,i){1&r&&(Ze(0,"html",0)(1,"head"),wi(2,"meta",1),Ze(3,"title"),yt(4,"Contact Page"),Qe(),wi(5,"meta",2),Qe(),Ze(6,"body")(7,"div")(8,"h1"),yt(9,"Contact Page"),Qe(),Ze(10,"p"),yt(11,"Get in touch with us."),Qe(),Ze(12,"div",3)(13,"h2"),yt(14,"Ubicaci\xf3n"),Qe(),Ze(15,"p"),yt(16,"Calle Escaleritas, 123, Las Palmas, Espa\xf1a"),Qe(),Ze(17,"h2"),yt(18,"Tel\xe9fono"),Qe(),Ze(19,"p"),yt(20,"+34 123 456 789"),Qe(),Ze(21,"h2"),yt(22,"Email"),Qe(),Ze(23,"p"),yt(24,"Contacta a info@tuweb.com para m\xe1s detalles."),Qe()(),Ze(25,"div",4),wi(26,"iframe",5),Qe(),Ze(27,"div",6)(28,"h2"),yt(29,"Sobre M\xed"),Qe(),Ze(30,"p"),yt(31,"Hola, soy [Tu Nombre], y me dedico a [tu ocupaci\xf3n]. Puedes ponerte en contacto conmigo para cualquier consulta relacionada con el alquiler del piso."),Qe(),wi(32,"img",7),Qe()()()())},styles:['@charset "UTF-8";.contact-info[_ngcontent-%COMP%]{margin-bottom:20px}.contact-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5em}.contact-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0}.map-container[_ngcontent-%COMP%]{margin:20px 0;height:400px}.about-me[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:auto;border-radius:10px}']})}return t})();function $B(t,e){return qe(e)?jn(()=>t,e):jn(()=>t)}ct(982);const HB=new pe("angularfire2.auth.use-emulator"),zB=new pe("angularfire2.auth.settings"),GB=new pe("angularfire2.auth.tenant-id"),qB=new pe("angularfire2.auth.langugage-code"),WB=new pe("angularfire2.auth.use-device-language"),KB=new pe("angularfire.auth.persistence"),QB=(t,e,n,r,i,s,o,a)=>FS(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{const u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),r&&(u.tenantId=r),u.languageCode=i,s&&u.useDeviceLanguage(),o)for(const[d,f]of Object.entries(o))u.settings[d]=f;return a&&u.setPersistence(a),u},[n,r,i,s,o,a]);let QS=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,s,o,a,u,d,f,m,y,E){const T=new L,A=Ve(void 0).pipe(Su(o.outsideAngular),jn(()=>s.runOutsideAngular(()=>Promise.resolve().then(ct.bind(ct,982)))),Pe(()=>TI(n,s,r)),Pe(D=>QB(D,s,a,d,f,m,u,y)),qE({bufferSize:1,refCount:!1}));if(OE(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Ve(null);else{A.pipe(Ou()).subscribe();const D=A.pipe(jn(V=>V.getRedirectResult().then(ee=>ee,()=>null)),Di,qE({bufferSize:1,refCount:!1})),F=A.pipe(jn(V=>new Wt(ee=>({unsubscribe:s.runOutsideAngular(()=>V.onAuthStateChanged(ve=>ee.next(ve),ve=>ee.error(ve),()=>ee.complete()))})))),x=A.pipe(jn(V=>new Wt(ee=>({unsubscribe:s.runOutsideAngular(()=>V.onIdTokenChanged(ve=>ee.next(ve),ve=>ee.error(ve),()=>ee.complete()))}))));this.authState=D.pipe($B(F),Dh(o.outsideAngular),Su(o.insideAngular)),this.user=D.pipe($B(x),Dh(o.outsideAngular),Su(o.insideAngular)),this.idToken=this.user.pipe(jn(V=>V?Gt(V.getIdToken()):Ve(null))),this.idTokenResult=this.user.pipe(jn(V=>V?Gt(V.getIdTokenResult()):Ve(null))),this.credential=function hse(...t){const e=Jg(t),n=function pX(t,e){return"number"==typeof Gb(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?cs(r[0]):Sh(n)(Gt(r,e)):Zs}(D,T,this.authState.pipe(Rs(V=>!V))).pipe(Pe(V=>V?.user?V:null),Dh(o.outsideAngular),Su(o.insideAngular))}return((t,e,n,r={})=>new Proxy(t,{get:(i,s)=>n.runOutsideAngular(()=>{if(t[s])return r?.spy?.get&&r.spy.get(s,t[s]),t[s];if(dre.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const u=a?.[s];return"function"==typeof u?u.bind(a):u?.then?u.then(d=>n.run(()=>d)):n.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>o[u],apply:(a,u,d)=>o.then(f=>{const m=f?.(...d);return r?.spy?.apply&&r.spy.apply(s,d,m),m})})})}))(this,A,s,{spy:{apply:(D,F,x)=>{(D.startsWith("signIn")||D.startsWith("createUser"))&&x.then(V=>T.next(V))}}})}static \u0275fac=function(r){return new(r||t)(de(ym),de(vm,8),de(is),de(Rt),de(kS),de(HB,8),de(zB,8),de(GB,8),de(qB,8),de(WB,8),de(KB,8),de(OS,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),YB=(()=>{class t{constructor(){xo.A.registerVersion("angularfire",wI.full,"auth-compat")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gr({type:t});static \u0275inj=ur({providers:[QS]})}return t})();function YS(){return Fe((t,e)=>{let n,r=!1;t.subscribe($e(e,i=>{const s=n;n=i,r&&e.next([s,i]),r=!0}))})}function gse(t,e){return t===e}var yl,XB,Lo=ct(41),JB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ZB={};(function(){var t;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function i(k,S,M){M||(M=0);var U=Array(16);if("string"==typeof S)for(var $=0;16>$;++$)U[$]=S.charCodeAt(M++)|S.charCodeAt(M++)<<8|S.charCodeAt(M++)<<16|S.charCodeAt(M++)<<24;else for($=0;16>$;++$)U[$]=S[M++]|S[M++]<<8|S[M++]<<16|S[M++]<<24;var q=k.g[3],O=(S=k.g[0])+(q^(M=k.g[1])&(($=k.g[2])^q))+U[0]+3614090360&4294967295;O=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=(M=($=(q=(S=M+(O<<7&4294967295|O>>>25))+((O=q+($^S&(M^$))+U[1]+3905402710&4294967295)<<12&4294967295|O>>>20))+((O=$+(M^q&(S^M))+U[2]+606105819&4294967295)<<17&4294967295|O>>>15))+((O=M+(S^$&(q^S))+U[3]+3250441966&4294967295)<<22&4294967295|O>>>10))+((O=S+(q^M&($^q))+U[4]+4118548399&4294967295)<<7&4294967295|O>>>25))+((O=q+($^S&(M^$))+U[5]+1200080426&4294967295)<<12&4294967295|O>>>20))+((O=$+(M^q&(S^M))+U[6]+2821735955&4294967295)<<17&4294967295|O>>>15))+((O=M+(S^$&(q^S))+U[7]+4249261313&4294967295)<<22&4294967295|O>>>10))+((O=S+(q^M&($^q))+U[8]+1770035416&4294967295)<<7&4294967295|O>>>25))+((O=q+($^S&(M^$))+U[9]+2336552879&4294967295)<<12&4294967295|O>>>20))+((O=$+(M^q&(S^M))+U[10]+4294925233&4294967295)<<17&4294967295|O>>>15))+((O=M+(S^$&(q^S))+U[11]+2304563134&4294967295)<<22&4294967295|O>>>10))+((O=S+(q^M&($^q))+U[12]+1804603682&4294967295)<<7&4294967295|O>>>25))+((O=q+($^S&(M^$))+U[13]+4254626195&4294967295)<<12&4294967295|O>>>20))+((O=$+(M^q&(S^M))+U[14]+2792965006&4294967295)<<17&4294967295|O>>>15))+((O=M+(S^$&(q^S))+U[15]+1236535329&4294967295)<<22&4294967295|O>>>10))+((O=S+($^q&(M^$))+U[1]+4129170786&4294967295)<<5&4294967295|O>>>27))+((O=q+(M^$&(S^M))+U[6]+3225465664&4294967295)<<9&4294967295|O>>>23))+((O=$+(S^M&(q^S))+U[11]+643717713&4294967295)<<14&4294967295|O>>>18))+((O=M+(q^S&($^q))+U[0]+3921069994&4294967295)<<20&4294967295|O>>>12))+((O=S+($^q&(M^$))+U[5]+3593408605&4294967295)<<5&4294967295|O>>>27))+((O=q+(M^$&(S^M))+U[10]+38016083&4294967295)<<9&4294967295|O>>>23))+((O=$+(S^M&(q^S))+U[15]+3634488961&4294967295)<<14&4294967295|O>>>18))+((O=M+(q^S&($^q))+U[4]+3889429448&4294967295)<<20&4294967295|O>>>12))+((O=S+($^q&(M^$))+U[9]+568446438&4294967295)<<5&4294967295|O>>>27))+((O=q+(M^$&(S^M))+U[14]+3275163606&4294967295)<<9&4294967295|O>>>23))+((O=$+(S^M&(q^S))+U[3]+4107603335&4294967295)<<14&4294967295|O>>>18))+((O=M+(q^S&($^q))+U[8]+1163531501&4294967295)<<20&4294967295|O>>>12))+((O=S+($^q&(M^$))+U[13]+2850285829&4294967295)<<5&4294967295|O>>>27))+((O=q+(M^$&(S^M))+U[2]+4243563512&4294967295)<<9&4294967295|O>>>23))+((O=$+(S^M&(q^S))+U[7]+1735328473&4294967295)<<14&4294967295|O>>>18))+((O=M+(q^S&($^q))+U[12]+2368359562&4294967295)<<20&4294967295|O>>>12))+((O=S+(M^$^q)+U[5]+4294588738&4294967295)<<4&4294967295|O>>>28))+((O=q+(S^M^$)+U[8]+2272392833&4294967295)<<11&4294967295|O>>>21))+((O=$+(q^S^M)+U[11]+1839030562&4294967295)<<16&4294967295|O>>>16))+((O=M+($^q^S)+U[14]+4259657740&4294967295)<<23&4294967295|O>>>9))+((O=S+(M^$^q)+U[1]+2763975236&4294967295)<<4&4294967295|O>>>28))+((O=q+(S^M^$)+U[4]+1272893353&4294967295)<<11&4294967295|O>>>21))+((O=$+(q^S^M)+U[7]+4139469664&4294967295)<<16&4294967295|O>>>16))+((O=M+($^q^S)+U[10]+3200236656&4294967295)<<23&4294967295|O>>>9))+((O=S+(M^$^q)+U[13]+681279174&4294967295)<<4&4294967295|O>>>28))+((O=q+(S^M^$)+U[0]+3936430074&4294967295)<<11&4294967295|O>>>21))+((O=$+(q^S^M)+U[3]+3572445317&4294967295)<<16&4294967295|O>>>16))+((O=M+($^q^S)+U[6]+76029189&4294967295)<<23&4294967295|O>>>9))+((O=S+(M^$^q)+U[9]+3654602809&4294967295)<<4&4294967295|O>>>28))+((O=q+(S^M^$)+U[12]+3873151461&4294967295)<<11&4294967295|O>>>21))+((O=$+(q^S^M)+U[15]+530742520&4294967295)<<16&4294967295|O>>>16))+((O=M+($^q^S)+U[2]+3299628645&4294967295)<<23&4294967295|O>>>9))+((O=S+($^(M|~q))+U[0]+4096336452&4294967295)<<6&4294967295|O>>>26))+((O=q+(M^(S|~$))+U[7]+1126891415&4294967295)<<10&4294967295|O>>>22))+((O=$+(S^(q|~M))+U[14]+2878612391&4294967295)<<15&4294967295|O>>>17))+((O=M+(q^($|~S))+U[5]+4237533241&4294967295)<<21&4294967295|O>>>11))+((O=S+($^(M|~q))+U[12]+1700485571&4294967295)<<6&4294967295|O>>>26))+((O=q+(M^(S|~$))+U[3]+2399980690&4294967295)<<10&4294967295|O>>>22))+((O=$+(S^(q|~M))+U[10]+4293915773&4294967295)<<15&4294967295|O>>>17))+((O=M+(q^($|~S))+U[1]+2240044497&4294967295)<<21&4294967295|O>>>11))+((O=S+($^(M|~q))+U[8]+1873313359&4294967295)<<6&4294967295|O>>>26))+((O=q+(M^(S|~$))+U[15]+4264355552&4294967295)<<10&4294967295|O>>>22))+((O=$+(S^(q|~M))+U[6]+2734768916&4294967295)<<15&4294967295|O>>>17))+((O=M+(q^($|~S))+U[13]+1309151649&4294967295)<<21&4294967295|O>>>11))+((q=(S=M+((O=S+($^(M|~q))+U[4]+4149444226&4294967295)<<6&4294967295|O>>>26))+((O=q+(M^(S|~$))+U[11]+3174756917&4294967295)<<10&4294967295|O>>>22))^(($=q+((O=$+(S^(q|~M))+U[2]+718787259&4294967295)<<15&4294967295|O>>>17))|~S))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+S&4294967295,k.g[1]=k.g[1]+($+(O<<21&4294967295|O>>>11))&4294967295,k.g[2]=k.g[2]+$&4294967295,k.g[3]=k.g[3]+q&4294967295}function o(k,S){this.h=S;for(var M=[],U=!0,$=k.length-1;0<=$;$--){var q=0|k[$];U&&q==S||(M[$]=q,U=!1)}this.g=M}(function e(k,S){function M(){}M.prototype=S.prototype,k.D=S.prototype,k.prototype=new M,k.prototype.constructor=k,k.C=function(U,$,q){for(var O=Array(arguments.length-2),La=2;La<arguments.length;La++)O[La-2]=arguments[La];return S.prototype[$].apply(U,O)}})(r,function n(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(k,S){void 0===S&&(S=k.length);for(var M=S-this.blockSize,U=this.B,$=this.h,q=0;q<S;){if(0==$)for(;q<=M;)i(this,k,q),q+=this.blockSize;if("string"==typeof k){for(;q<S;)if(U[$++]=k.charCodeAt(q++),$==this.blockSize){i(this,U),$=0;break}}else for(;q<S;)if(U[$++]=k[q++],$==this.blockSize){i(this,U),$=0;break}}this.h=$,this.o+=S},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var S=1;S<k.length-8;++S)k[S]=0;var M=8*this.o;for(S=k.length-8;S<k.length;++S)k[S]=255&M,M/=256;for(this.u(k),k=Array(16),S=M=0;4>S;++S)for(var U=0;32>U;U+=8)k[M++]=this.g[S]>>>U&255;return k};var a={};function u(k){return-128<=k&&128>k?function s(k,S){var M=a;return Object.prototype.hasOwnProperty.call(M,k)?M[k]:M[k]=S(k)}(k,function(S){return new o([0|S],0>S?-1:0)}):new o([0|k],0>k?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(0>k)return D(d(-k));for(var S=[],M=1,U=0;k>=M;U++)S[U]=k/M|0,M*=4294967296;return new o(S,0)}var m=u(0),y=u(1),E=u(16777216);function T(k){if(0!=k.h)return!1;for(var S=0;S<k.g.length;S++)if(0!=k.g[S])return!1;return!0}function A(k){return-1==k.h}function D(k){for(var S=k.g.length,M=[],U=0;U<S;U++)M[U]=~k.g[U];return new o(M,~k.h).add(y)}function F(k,S){return k.add(D(S))}function x(k,S){for(;(65535&k[S])!=k[S];)k[S+1]+=k[S]>>>16,k[S]&=65535,S++}function V(k,S){this.g=k,this.h=S}function ee(k,S){if(T(S))throw Error("division by zero");if(T(k))return new V(m,m);if(A(k))return S=ee(D(k),S),new V(D(S.g),D(S.h));if(A(S))return S=ee(k,D(S)),new V(D(S.g),S.h);if(30<k.g.length){if(A(k)||A(S))throw Error("slowDivide_ only works with positive integers.");for(var M=y,U=S;0>=U.l(k);)M=ve(M),U=ve(U);var $=Te(M,1),q=Te(U,1);for(U=Te(U,2),M=Te(M,2);!T(U);){var O=q.add(U);0>=O.l(k)&&($=$.add(M),q=O),U=Te(U,1),M=Te(M,1)}return S=F(k,$.j(S)),new V($,S)}for($=m;0<=k.l(S);){for(M=Math.max(1,Math.floor(k.m()/S.m())),U=48>=(U=Math.ceil(Math.log(M)/Math.LN2))?1:Math.pow(2,U-48),O=(q=d(M)).j(S);A(O)||0<O.l(k);)O=(q=d(M-=U)).j(S);T(q)&&(q=y),$=$.add(q),k=F(k,O)}return new V($,k)}function ve(k){for(var S=k.g.length+1,M=[],U=0;U<S;U++)M[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(M,k.h)}function Te(k,S){var M=S>>5;S%=32;for(var U=k.g.length-M,$=[],q=0;q<U;q++)$[q]=0<S?k.i(q+M)>>>S|k.i(q+M+1)<<32-S:k.i(q+M);return new o($,k.h)}(t=o.prototype).m=function(){if(A(this))return-D(this).m();for(var k=0,S=1,M=0;M<this.g.length;M++){var U=this.i(M);k+=(0<=U?U:4294967296+U)*S,S*=4294967296}return k},t.toString=function(k){if(2>(k=k||10)||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(A(this))return"-"+D(this).toString(k);for(var S=d(Math.pow(k,6)),M=this,U="";;){var $=ee(M,S).g,q=((0<(M=F(M,$.j(S))).g.length?M.g[0]:M.h)>>>0).toString(k);if(T(M=$))return q+U;for(;6>q.length;)q="0"+q;U=q+U}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h},t.l=function(k){return A(k=F(this,k))?-1:T(k)?0:1},t.abs=function(){return A(this)?D(this):this},t.add=function(k){for(var S=Math.max(this.g.length,k.g.length),M=[],U=0,$=0;$<=S;$++){var q=U+(65535&this.i($))+(65535&k.i($)),O=(q>>>16)+(this.i($)>>>16)+(k.i($)>>>16);U=O>>>16,M[$]=(O&=65535)<<16|(q&=65535)}return new o(M,-2147483648&M[M.length-1]?-1:0)},t.j=function(k){if(T(this)||T(k))return m;if(A(this))return A(k)?D(this).j(D(k)):D(D(this).j(k));if(A(k))return D(this.j(D(k)));if(0>this.l(E)&&0>k.l(E))return d(this.m()*k.m());for(var S=this.g.length+k.g.length,M=[],U=0;U<2*S;U++)M[U]=0;for(U=0;U<this.g.length;U++)for(var $=0;$<k.g.length;$++){var q=this.i(U)>>>16,O=65535&this.i(U),La=k.i($)>>>16,m_=65535&k.i($);M[2*U+2*$]+=O*m_,x(M,2*U+2*$),M[2*U+2*$+1]+=q*m_,x(M,2*U+2*$+1),M[2*U+2*$+1]+=O*La,x(M,2*U+2*$+1),M[2*U+2*$+2]+=q*La,x(M,2*U+2*$+2)}for(U=0;U<S;U++)M[U]=M[2*U+1]<<16|M[2*U];for(U=S;U<2*S;U++)M[U]=0;return new o(M,0)},t.A=function(k){return ee(this,k).h},t.and=function(k){for(var S=Math.max(this.g.length,k.g.length),M=[],U=0;U<S;U++)M[U]=this.i(U)&k.i(U);return new o(M,this.h&k.h)},t.or=function(k){for(var S=Math.max(this.g.length,k.g.length),M=[],U=0;U<S;U++)M[U]=this.i(U)|k.i(U);return new o(M,this.h|k.h)},t.xor=function(k){for(var S=Math.max(this.g.length,k.g.length),M=[],U=0;U<S;U++)M[U]=this.i(U)^k.i(U);return new o(M,this.h^k.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XB=ZB.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=function f(k,S){if(0==k.length)throw Error("number format error: empty string");if(2>(S=S||10)||36<S)throw Error("radix out of range: "+S);if("-"==k.charAt(0))return D(f(k.substring(1),S));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=d(Math.pow(S,8)),U=m,$=0;$<k.length;$+=8){var q=Math.min(8,k.length-$),O=parseInt(k.substring($,$+q),S);8>q?(q=d(Math.pow(S,q)),U=U.j(q).add(d(O))):U=(U=U.j(M)).add(d(O))}return U},yl=ZB.Integer=o}).apply(typeof JB<"u"?JB:typeof self<"u"?self:typeof window<"u"?window:{});var ej,tj,Cm,nj,xI,JS,rj,ij,sj,MI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ba={};(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(h,_,I){return h==Array.prototype||h==Object.prototype||(h[_]=I.value),h},r=function n(h){h=["object"==typeof globalThis&&globalThis,h,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof MI&&MI];for(var _=0;_<h.length;++_){var I=h[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}(this);!function i(h,_){if(_)e:{var I=r;h=h.split(".");for(var C=0;C<h.length-1;C++){var z=h[C];if(!(z in I))break e;I=I[z]}(_=_(C=I[h=h[h.length-1]]))!=C&&null!=_&&e(I,h,{configurable:!0,writable:!0,value:_})}}("Array.prototype.values",function(h){return h||function(){return function s(h,_){h instanceof String&&(h+="");var I=0,C=!1,z={next:function(){if(!C&&I<h.length){var J=I++;return{value:_(J,h[J]),done:!1}}return C=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}(this,function(_,I){return I})}});var o=o||{},a=this||self;function u(h){var _=typeof h;return"array"==(_="object"!=_?_:h?Array.isArray(h)?"array":_:"null")||"object"==_&&"number"==typeof h.length}function d(h){var _=typeof h;return"object"==_&&null!=h||"function"==_}function f(h,_,I){return h.call.apply(h.bind,arguments)}function m(h,_,I){if(!h)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,C),h.apply(_,z)}}return function(){return h.apply(_,arguments)}}function y(h,_,I){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:m).apply(null,arguments)}function E(h,_){var I=Array.prototype.slice.call(arguments,1);return function(){var C=I.slice();return C.push.apply(C,arguments),h.apply(this,C)}}function T(h,_){function I(){}I.prototype=_.prototype,h.aa=_.prototype,h.prototype=new I,h.prototype.constructor=h,h.Qb=function(C,z,J){for(var Ce=Array(arguments.length-2),un=2;un<arguments.length;un++)Ce[un-2]=arguments[un];return _.prototype[z].apply(C,Ce)}}function A(h){const _=h.length;if(0<_){const I=Array(_);for(let C=0;C<_;C++)I[C]=h[C];return I}return[]}function D(h,_){for(let I=1;I<arguments.length;I++){const C=arguments[I];if(u(C)){const z=h.length||0,J=C.length||0;h.length=z+J;for(let Ce=0;Ce<J;Ce++)h[z+Ce]=C[Ce]}else h.push(C)}}function x(h){return/^[\s\xa0]*$/.test(h)}function V(){var h=a.navigator;return h&&(h=h.userAgent)?h:""}function ee(h){return ee[" "](h),h}ee[" "]=function(){};var ve=!(-1==V().indexOf("Gecko")||-1!=V().toLowerCase().indexOf("webkit")&&-1==V().indexOf("Edge")||-1!=V().indexOf("Trident")||-1!=V().indexOf("MSIE")||-1!=V().indexOf("Edge"));function Te(h,_,I){for(const C in h)_.call(I,h[C],C,h)}function S(h){const _={};for(const I in h)_[I]=h[I];return _}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let I,C;for(let z=1;z<arguments.length;z++){for(I in C=arguments[z],C)h[I]=C[I];for(let J=0;J<M.length;J++)I=M[J],Object.prototype.hasOwnProperty.call(C,I)&&(h[I]=C[I])}}function $(h){var _=1;h=h.split(":");const I=[];for(;0<_&&h.length;)I.push(h.shift()),_--;return h.length&&I.push(h.join(":")),I}function q(h){a.setTimeout(()=>{throw h},0)}function O(){var h=qP;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}var m_=new class F{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}(()=>new tde,h=>h.reset());class tde{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let __,y_=!1,qP=new class La{constructor(){this.h=this.g=null}add(_,I){const C=m_.get();C.set(_,I),this.h?this.h.next=C:this.g=C,this.h=C}},dG=()=>{const h=a.Promise.resolve(void 0);__=()=>{h.then(nde)}};var nde=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(I){q(I)}var _=m_;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}y_=!1};function ic(){this.s=this.s,this.C=this.C}function ai(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ic.prototype.s=!1,ic.prototype.ma=function(){this.s||(this.s=!0,this.N())},ic.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ai.prototype.h=function(){this.defaultPrevented=!0};var rde=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return h}();function v_(h,_){if(ai.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var I=this.type=h.type,C=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ve){e:{try{ee(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else"mouseover"==I?_=h.fromElement:"mouseout"==I&&(_=h.toElement);this.relatedTarget=_,C?(this.clientX=void 0!==C.clientX?C.clientX:C.pageX,this.clientY=void 0!==C.clientY?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:ide[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&v_.aa.h.call(this)}}T(v_,ai);var ide={2:"touch",3:"pen",4:"mouse"};v_.prototype.h=function(){v_.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var E_="closure_listenable_"+(1e6*Math.random()|0),sde=0;function ode(h,_,I,C,z){this.listener=h,this.proxy=null,this.src=_,this.type=I,this.capture=!!C,this.ha=z,this.key=++sde,this.da=this.fa=!1}function Ww(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Kw(h){this.src=h,this.g={},this.h=0}function WP(h,_){var I=_.type;if(I in h.g){var J,C=h.g[I],z=Array.prototype.indexOf.call(C,_,void 0);(J=0<=z)&&Array.prototype.splice.call(C,z,1),J&&(Ww(_),0==h.g[I].length&&(delete h.g[I],h.h--))}}function KP(h,_,I,C){for(var z=0;z<h.length;++z){var J=h[z];if(!J.da&&J.listener==_&&J.capture==!!I&&J.ha==C)return z}return-1}Kw.prototype.add=function(h,_,I,C,z){var J=h.toString();(h=this.g[J])||(h=this.g[J]=[],this.h++);var Ce=KP(h,_,C,z);return-1<Ce?(_=h[Ce],I||(_.fa=!1)):((_=new ode(_,this.src,J,!!C,z)).fa=I,h.push(_)),_};var QP="closure_lm_"+(1e6*Math.random()|0),YP={};function hG(h,_,I,C,z){if(C&&C.once)return pG(h,_,I,C,z);if(Array.isArray(_)){for(var J=0;J<_.length;J++)hG(h,_[J],I,C,z);return null}return I=eN(I),h&&h[E_]?h.K(_,I,d(C)?!!C.capture:!!C,z):fG(h,_,I,!1,C,z)}function fG(h,_,I,C,z,J){if(!_)throw Error("Invalid event type");var Ce=d(z)?!!z.capture:!!z,un=ZP(h);if(un||(h[QP]=un=new Kw(h)),(I=un.add(_,I,C,Ce,J)).proxy)return I;if(C=function ade(){const _=ude;return function h(I){return _.call(h.src,h.listener,I)}}(),I.proxy=C,C.src=h,C.listener=I,h.addEventListener)rde||(z=Ce),void 0===z&&(z=!1),h.addEventListener(_.toString(),C,z);else if(h.attachEvent)h.attachEvent(mG(_.toString()),C);else{if(!h.addListener||!h.removeListener)throw Error("addEventListener and attachEvent are unavailable.");h.addListener(C)}return I}function pG(h,_,I,C,z){if(Array.isArray(_)){for(var J=0;J<_.length;J++)pG(h,_[J],I,C,z);return null}return I=eN(I),h&&h[E_]?h.L(_,I,d(C)?!!C.capture:!!C,z):fG(h,_,I,!0,C,z)}function gG(h,_,I,C,z){if(Array.isArray(_))for(var J=0;J<_.length;J++)gG(h,_[J],I,C,z);else C=d(C)?!!C.capture:!!C,I=eN(I),h&&h[E_]?(h=h.i,(_=String(_).toString())in h.g&&-1<(I=KP(J=h.g[_],I,C,z))&&(Ww(J[I]),Array.prototype.splice.call(J,I,1),0==J.length&&(delete h.g[_],h.h--))):h&&(h=ZP(h))&&(_=h.g[_.toString()],h=-1,_&&(h=KP(_,I,C,z)),(I=-1<h?_[h]:null)&&JP(I))}function JP(h){if("number"!=typeof h&&h&&!h.da){var _=h.src;if(_&&_[E_])WP(_.i,h);else{var I=h.type,C=h.proxy;_.removeEventListener?_.removeEventListener(I,C,h.capture):_.detachEvent?_.detachEvent(mG(I),C):_.addListener&&_.removeListener&&_.removeListener(C),(I=ZP(_))?(WP(I,h),0==I.h&&(I.src=null,_[QP]=null)):Ww(h)}}}function mG(h){return h in YP?YP[h]:YP[h]="on"+h}function ude(h,_){if(h.da)h=!0;else{_=new v_(_,this);var I=h.listener,C=h.ha||h.src;h.fa&&JP(h),h=I.call(C,_)}return h}function ZP(h){return(h=h[QP])instanceof Kw?h:null}var XP="__closure_events_fn_"+(1e9*Math.random()>>>0);function eN(h){return"function"==typeof h?h:(h[XP]||(h[XP]=function(_){return h.handleEvent(_)}),h[XP])}function ui(){ic.call(this),this.i=new Kw(this),this.M=this,this.F=null}function Mi(h,_){var I,C=h.F;if(C)for(I=[];C;C=C.F)I.push(C);if(h=h.M,C=_.type||_,"string"==typeof _)_=new ai(_,h);else if(_ instanceof ai)_.target=_.target||h;else{var z=_;U(_=new ai(C,h),z)}if(z=!0,I)for(var J=I.length-1;0<=J;J--){var Ce=_.g=I[J];z=Qw(Ce,C,!0,_)&&z}if(z=Qw(Ce=_.g=h,C,!0,_)&&z,z=Qw(Ce,C,!1,_)&&z,I)for(J=0;J<I.length;J++)z=Qw(Ce=_.g=I[J],C,!1,_)&&z}function Qw(h,_,I,C){if(!(_=h.i.g[String(_)]))return!0;_=_.concat();for(var z=!0,J=0;J<_.length;++J){var Ce=_[J];if(Ce&&!Ce.da&&Ce.capture==I){var un=Ce.listener,Gr=Ce.ha||Ce.src;Ce.fa&&WP(h.i,Ce),z=!1!==un.call(Gr,C)&&z}}return z&&!C.defaultPrevented}function _G(h,_,I){if("function"==typeof h)I&&(h=y(h,I));else{if(!h||"function"!=typeof h.handleEvent)throw Error("Invalid listener argument");h=y(h.handleEvent,h)}return 2147483647<Number(_)?-1:a.setTimeout(h,_||0)}function yG(h){h.g=_G(()=>{h.g=null,h.i&&(h.i=!1,yG(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}T(ui,ic),ui.prototype[E_]=!0,ui.prototype.removeEventListener=function(h,_,I,C){gG(this,h,_,I,C)},ui.prototype.N=function(){if(ui.aa.N.call(this),this.i){var _,h=this.i;for(_ in h.g){for(var I=h.g[_],C=0;C<I.length;C++)Ww(I[C]);delete h.g[_],h.h--}}this.F=null},ui.prototype.K=function(h,_,I,C){return this.i.add(String(h),_,!1,I,C)},ui.prototype.L=function(h,_,I,C){return this.i.add(String(h),_,!0,I,C)};class cde extends ic{constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:yG(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function I_(h){ic.call(this),this.h=h,this.g={}}T(I_,ic);var vG=[];function EG(h){Te(h.g,function(_,I){this.g.hasOwnProperty(I)&&JP(_)},h),h.g={}}I_.prototype.N=function(){I_.aa.N.call(this),EG(this)},I_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tN=a.JSON.stringify,lde=a.JSON.parse,dde=class{stringify(h){return a.JSON.stringify(h,void 0)}parse(h){return a.JSON.parse(h,void 0)}};function nN(){}function wG(){}nN.prototype.h=null;var w_={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rN(){ai.call(this,"d")}function iN(){ai.call(this,"c")}T(rN,ai),T(iN,ai);var $l={},TG=null;function Yw(){return TG=TG||new ui}function CG(h){ai.call(this,$l.La,h)}function T_(h){const _=Yw();Mi(_,new CG(_))}function AG(h,_){ai.call(this,$l.STAT_EVENT,h),this.stat=_}function xi(h){const _=Yw();Mi(_,new AG(_,h))}function DG(h,_){ai.call(this,$l.Ma,h),this.size=_}function C_(h,_){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){h()},_)}function A_(){this.g=!0}function kf(h,_,I,C){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+function gde(h,_){if(!h.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I)for(h=0;h<I.length;h++)if(Array.isArray(I[h])){var C=I[h];if(!(2>C.length)){var z=C[1];if(Array.isArray(z)&&!(1>z.length)){var J=z[0];if("noop"!=J&&"stop"!=J&&"close"!=J)for(var Ce=1;Ce<z.length;Ce++)z[Ce]=""}}}return tN(I)}catch{return _}}(h,I)+(C?" "+C:"")})}$l.La="serverreachability",T(CG,ai),$l.STAT_EVENT="statevent",T(AG,ai),$l.Ma="timingevent",T(DG,ai),A_.prototype.xa=function(){this.g=!1},A_.prototype.info=function(){};var sN,Jw={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bG={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Zw(){}function sc(h,_,I,C){this.j=h,this.i=_,this.l=I,this.R=C||1,this.U=new I_(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new SG}function SG(){this.i=null,this.g="",this.h=!1}T(Zw,nN),Zw.prototype.g=function(){return new XMLHttpRequest},Zw.prototype.i=function(){return{}},sN=new Zw;var RG={},oN={};function aN(h,_,I){h.L=1,h.v=nT(Va(_)),h.m=I,h.P=!0,PG(h,null)}function PG(h,_){h.F=Date.now(),Xw(h),h.A=Va(h.v);var I=h.A,C=h.R;Array.isArray(C)||(C=[String(C)]),zG(I.i,"t",C),h.C=0,I=h.j.J,h.h=new SG,h.g=uq(h.j,I?_:null,!h.m),0<h.O&&(h.M=new cde(y(h.Y,h,h.g),h.O)),_=h.U,I=h.g,C=h.ca;var z="readystatechange";Array.isArray(z)||(z&&(vG[0]=z.toString()),z=vG);for(var J=0;J<z.length;J++){var Ce=hG(I,z[J],C||_.handleEvent,!1,_.h||_);if(!Ce)break;_.g[Ce.key]=Ce}_=h.H?S(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),T_(),function hde(h,_,I,C,z,J){h.info(function(){if(h.g)if(J)for(var Ce="",un=J.split("&"),Gr=0;Gr<un.length;Gr++){var Vt=un[Gr].split("=");if(1<Vt.length){var ci=Vt[0];Vt=Vt[1];var li=ci.split("_");Ce=2<=li.length&&"type"==li[1]?Ce+(ci+"=")+Vt+"&":Ce+(ci+"=redacted&")}}else Ce=null;else Ce=J;return"XMLHTTP REQ ("+C+") [attempt "+z+"]: "+_+"\n"+I+"\n"+Ce})}(h.i,h.u,h.A,h.l,h.R,h.m)}function NG(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.j.Ca}function mde(h,_){var I=h.C,C=_.indexOf("\n",I);return-1==C?oN:(I=Number(_.substring(I,C)),isNaN(I)?RG:(C+=1)+I>_.length?oN:(_=_.slice(C,C+I),h.C=C+I,_))}function Xw(h){h.S=Date.now()+h.I,MG(h,h.I)}function MG(h,_){if(null!=h.B)throw Error("WatchDog timer not null");h.B=C_(y(h.ba,h),_)}function uN(h){h.B&&(a.clearTimeout(h.B),h.B=null)}function D_(h){0==h.j.G||h.J||iq(h.j,h)}function Hl(h){uN(h);var _=h.M;_&&"function"==typeof _.ma&&_.ma(),h.M=null,EG(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function cN(h,_){try{var I=h.j;if(0!=I.G&&(I.g==h||lN(I.h,h)))if(!h.K&&lN(I.h,h)&&3==I.G){try{var C=I.Da.g.parse(_)}catch{C=null}if(Array.isArray(C)&&3==C.length){var z=C;if(0==z[0]){e:if(!I.u){if(I.g){if(!(I.g.F+3e3<h.F))break e;aT(I),sT(I)}pN(I),xi(18)}}else I.za=z[1],0<I.za-I.T&&37500>z[2]&&I.F&&0==I.v&&!I.C&&(I.C=C_(y(I.Za,I),6e3));if(1>=kG(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Gl(I,11)}else if((h.K||I.g==h)&&aT(I),!x(_))for(z=I.Da.g.parse(_),_=0;_<z.length;_++){let Vt=z[_];if(I.T=Vt[0],Vt=Vt[1],2==I.G)if("c"==Vt[0]){I.K=Vt[1],I.ia=Vt[2];const ci=Vt[3];null!=ci&&(I.la=ci,I.j.info("VER="+I.la));const li=Vt[4];null!=li&&(I.Aa=li,I.j.info("SVER="+I.Aa));const Vf=Vt[5];null!=Vf&&"number"==typeof Vf&&0<Vf&&(I.L=C=1.5*Vf,I.j.info("backChannelRequestTimeoutMs_="+C)),C=I;const no=h.g;if(no){const cT=no.g?no.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cT){var J=C.h;J.g||-1==cT.indexOf("spdy")&&-1==cT.indexOf("quic")&&-1==cT.indexOf("h2")||(J.j=J.l,J.g=new Set,J.h&&(dN(J,J.h),J.h=null))}if(C.D){const mN=no.g?no.g.getResponseHeader("X-HTTP-Session-Id"):null;mN&&(C.ya=mN,In(C.I,C.D,mN))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-h.F,I.j.info("Handshake RTT: "+I.R+"ms"));var Ce=h;if((C=I).qa=aq(C,C.J?C.ia:null,C.W),Ce.K){FG(C.h,Ce);var un=Ce,Gr=C.L;Gr&&(un.I=Gr),un.B&&(uN(un),Xw(un)),C.g=Ce}else nq(C);0<I.i.length&&oT(I)}else"stop"!=Vt[0]&&"close"!=Vt[0]||Gl(I,7);else 3==I.G&&("stop"==Vt[0]||"close"==Vt[0]?"stop"==Vt[0]?Gl(I,7):fN(I):"noop"!=Vt[0]&&I.l&&I.l.ta(Vt),I.v=0)}T_()}catch{}}sc.prototype.ca=function(h){h=h.target;const _=this.M;_&&3==Ua(h)?_.j():this.Y(h)},sc.prototype.Y=function(h){try{if(h==this.g)e:{const li=Ua(this.g);var _=this.g.Ba();if(this.g.Z(),!(3>li)&&(3!=li||this.g&&(this.h.h||this.g.oa()||JG(this.g)))){this.J||4!=li||7==_||T_(),uN(this);var I=this.g.Z();this.X=I;t:if(NG(this)){var C=JG(this.g);h="";var z=C.length,J=4==Ua(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hl(this),D_(this);var Ce="";break t}this.h.i=new a.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,h+=this.h.i.decode(C[_],{stream:!(J&&_==z-1)});C.length=0,this.h.g+=h,this.C=0,Ce=this.h.g}else Ce=this.g.oa();if(this.o=200==I,function fde(h,_,I,C,z,J,Ce){h.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+z+"]: "+_+"\n"+I+"\n"+J+" "+Ce})}(this.i,this.u,this.A,this.l,this.R,li,I),this.o){if(this.T&&!this.K){t:{if(this.g){var un,Gr=this.g;if((un=Gr.g?Gr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(un)){var Vt=un;break t}}Vt=null}if(!(I=Vt)){this.o=!1,this.s=3,xi(12),Hl(this),D_(this);break e}kf(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cN(this,I)}if(this.P){let no;for(I=!0;!this.J&&this.C<Ce.length;){if(no=mde(this,Ce),no==oN){4==li&&(this.s=4,xi(14),I=!1),kf(this.i,this.l,null,"[Incomplete Response]");break}if(no==RG){this.s=4,xi(15),kf(this.i,this.l,Ce,"[Invalid Chunk]"),I=!1;break}kf(this.i,this.l,no,null),cN(this,no)}if(NG(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=li||0!=Ce.length||this.h.h||(this.s=1,xi(16),I=!1),this.o=this.o&&I,I){if(0<Ce.length&&!this.W){this.W=!0;var ci=this.j;ci.g==this&&ci.ba&&!ci.M&&(ci.j.info("Great, no buffering proxy detected. Bytes received: "+Ce.length),gN(ci),ci.M=!0,xi(11))}}else kf(this.i,this.l,Ce,"[Invalid Chunked Response]"),Hl(this),D_(this)}else kf(this.i,this.l,Ce,null),cN(this,Ce);4==li&&Hl(this),this.o&&!this.J&&(4==li?iq(this.j,this):(this.o=!1,Xw(this)))}else(function xde(h){const _={};h=(h.g&&2<=Ua(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let C=0;C<h.length;C++){if(x(h[C]))continue;var I=$(h[C]);const z=I[0];if("string"!=typeof(I=I[1]))continue;I=I.trim();const J=_[z]||[];_[z]=J,J.push(I)}!function k(h,_){for(const I in h)_.call(void 0,h[I],I,h)}(_,function(C){return C.join(", ")})})(this.g),400==I&&0<Ce.indexOf("Unknown SID")?(this.s=3,xi(12)):(this.s=0,xi(13)),Hl(this),D_(this)}}}catch{}},sc.prototype.cancel=function(){this.J=!0,Hl(this)},sc.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(function pde(h,_){h.info(function(){return"TIMEOUT: "+_})}(this.i,this.A),2!=this.L&&(T_(),xi(17)),Hl(this),this.s=2,D_(this)):MG(this,this.S-h)};var _de=class{constructor(h,_){this.g=h,this.map=_}};function xG(h){this.l=h||10,h=a.PerformanceNavigationTiming?0<(h=a.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function OG(h){return!!h.h||!!h.g&&h.g.size>=h.j}function kG(h){return h.h?1:h.g?h.g.size:0}function lN(h,_){return h.h?h.h==_:!!h.g&&h.g.has(_)}function dN(h,_){h.g?h.g.add(_):h.h=_}function FG(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}function LG(h){if(null!=h.h)return h.i.concat(h.h.D);if(null!=h.g&&0!==h.g.size){let _=h.i;for(const I of h.g.values())_=_.concat(I.D);return _}return A(h.i)}function VG(h,_){if(h.forEach&&"function"==typeof h.forEach)h.forEach(_,void 0);else if(u(h)||"string"==typeof h)Array.prototype.forEach.call(h,_,void 0);else for(var I=function vde(h){if(h.na&&"function"==typeof h.na)return h.na();if(!h.V||"function"!=typeof h.V){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(u(h)||"string"==typeof h){var _=[];h=h.length;for(var I=0;I<h;I++)_.push(I);return _}_=[],I=0;for(const C in h)_[I++]=C;return _}}}(h),C=function yde(h){if(h.V&&"function"==typeof h.V)return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(u(h)){for(var _=[],I=h.length,C=0;C<I;C++)_.push(h[C]);return _}for(C in _=[],I=0,h)_[I++]=h[C];return _}(h),z=C.length,J=0;J<z;J++)_.call(void 0,C[J],I&&I[J],h)}xG.prototype.cancel=function(){if(this.i=LG(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const h of this.g.values())h.cancel();this.g.clear()}};var UG=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zl(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof zl){this.h=h.h,eT(this,h.j),this.o=h.o,this.g=h.g,tT(this,h.s),this.l=h.l;var _=h.i,I=new R_;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),BG(this,I),this.m=h.m}else h&&(_=String(h).match(UG))?(this.h=!1,eT(this,_[1]||"",!0),this.o=b_(_[2]||""),this.g=b_(_[3]||"",!0),tT(this,_[4]),this.l=b_(_[5]||"",!0),BG(this,_[6]||"",!0),this.m=b_(_[7]||"")):(this.h=!1,this.i=new R_(null,this.h))}function Va(h){return new zl(h)}function eT(h,_,I){h.j=I?b_(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function tT(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function BG(h,_,I){_ instanceof R_?(h.i=_,function Dde(h,_){_&&!h.j&&(oc(h),h.i=null,h.g.forEach(function(I,C){var z=C.toLowerCase();C!=z&&($G(this,C),zG(this,z,I))},h)),h.j=_}(h.i,h.h)):(I||(_=S_(_,Cde)),h.i=new R_(_,h.h))}function In(h,_,I){h.i.set(_,I)}function nT(h){return In(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function b_(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function S_(h,_,I){return"string"==typeof h?(h=encodeURI(h).replace(_,Ide),I&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Ide(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}zl.prototype.toString=function(){var h=[],_=this.j;_&&h.push(S_(_,jG,!0),":");var I=this.g;return(I||"file"==_)&&(h.push("//"),(_=this.o)&&h.push(S_(_,jG,!0),"@"),h.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(I=this.s)&&h.push(":",String(I))),(I=this.l)&&(this.g&&"/"!=I.charAt(0)&&h.push("/"),h.push(S_(I,"/"==I.charAt(0)?Tde:wde,!0))),(I=this.i.toString())&&h.push("?",I),(I=this.m)&&h.push("#",S_(I,Ade)),h.join("")};var jG=/[#\/\?@]/g,wde=/[#\?:]/g,Tde=/[#\?]/g,Cde=/[#\?@]/g,Ade=/#/g;function R_(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function oc(h){h.g||(h.g=new Map,h.h=0,h.i&&function Ede(h,_){if(h){h=h.split("&");for(var I=0;I<h.length;I++){var C=h[I].indexOf("="),z=null;if(0<=C){var J=h[I].substring(0,C);z=h[I].substring(C+1)}else J=h[I];_(J,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}(h.i,function(_,I){h.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}function $G(h,_){oc(h),_=Ff(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function HG(h,_){return oc(h),_=Ff(h,_),h.g.has(_)}function zG(h,_,I){$G(h,_),0<I.length&&(h.i=null,h.g.set(Ff(h,_),A(I)),h.h+=I.length)}function Ff(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function ac(h,_,I,C,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),C(I)}catch{}}function Rde(){this.g=new dde}function Pde(h,_,I){const C=I||"";try{VG(h,function(z,J){let Ce=z;d(z)&&(Ce=tN(z)),_.push(C+J+"="+encodeURIComponent(Ce))})}catch(z){throw _.push(C+"type="+encodeURIComponent("_badmap")),z}}function P_(h){this.l=h.Ub||null,this.j=h.eb||!1}function rT(h,_){ui.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function GG(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}function N_(h){h.readyState=4,h.l=null,h.j=null,h.v=null,M_(h)}function M_(h){h.onreadystatechange&&h.onreadystatechange.call(h)}function qG(h){let _="";return Te(h,function(I,C){_+=C,_+=":",_+=I,_+="\r\n"}),_}function hN(h,_,I){e:{for(C in I){var C=!1;break e}C=!0}C||(I=qG(I),"string"==typeof h?null!=I&&encodeURIComponent(String(I)):In(h,_,I))}function Wn(h){ui.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(t=R_.prototype).add=function(h,_){oc(this),this.i=null,h=Ff(this,h);var I=this.g.get(h);return I||this.g.set(h,I=[]),I.push(_),this.h+=1,this},t.forEach=function(h,_){oc(this),this.g.forEach(function(I,C){I.forEach(function(z){h.call(_,z,C,this)},this)},this)},t.na=function(){oc(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let C=0;C<_.length;C++){const z=h[C];for(let J=0;J<z.length;J++)I.push(_[C])}return I},t.V=function(h){oc(this);let _=[];if("string"==typeof h)HG(this,h)&&(_=_.concat(this.g.get(Ff(this,h))));else{h=Array.from(this.g.values());for(let I=0;I<h.length;I++)_=_.concat(h[I])}return _},t.set=function(h,_){return oc(this),this.i=null,HG(this,h=Ff(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},t.get=function(h,_){return h&&0<(h=this.V(h)).length?String(h[0]):_},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var C=_[I];const J=encodeURIComponent(String(C)),Ce=this.V(C);for(C=0;C<Ce.length;C++){var z=J;""!==Ce[C]&&(z+="="+encodeURIComponent(String(Ce[C]))),h.push(z)}}return this.i=h.join("&")},T(P_,nN),P_.prototype.g=function(){return new rT(this.l,this.j)},P_.prototype.i=function(h){return function(){return h}}({}),T(rT,ui),(t=rT.prototype).open=function(h,_){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,M_(this)},t.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,N_(this)),this.readyState=0},t.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,M_(this)),this.g&&(this.readyState=3,M_(this),this.g)))if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;GG(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))},t.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?N_(this):M_(this),3==this.readyState&&GG(this)}},t.Ra=function(h){this.g&&(this.response=this.responseText=h,N_(this))},t.Qa=function(h){this.g&&(this.response=h,N_(this))},t.ga=function(){this.g&&N_(this)},t.setRequestHeader=function(h,_){this.u.append(h,_)},t.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var I=_.next();!I.done;)h.push((I=I.value)[0]+": "+I[1]),I=_.next();return h.join("\r\n")},Object.defineProperty(rT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}}),T(Wn,ui);var Nde=/^https?$/i,Mde=["POST","PUT"];function WG(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,KG(h),iT(h)}function KG(h){h.A||(h.A=!0,Mi(h,"complete"),Mi(h,"error"))}function QG(h){if(h.h&&typeof o<"u"&&(!h.v[1]||4!=Ua(h)||2!=h.Z()))if(h.u&&4==Ua(h))_G(h.Ea,0,h);else if(Mi(h,"readystatechange"),4==Ua(h)){h.h=!1;try{const Ce=h.Z();e:switch(Ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var C;if(C=0===Ce){var z=String(h.D).match(UG)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),C=!Nde.test(z?z.toLowerCase():"")}I=C}if(I)Mi(h,"complete"),Mi(h,"success");else{h.m=6;try{var J=2<Ua(h)?h.g.statusText:""}catch{J=""}h.l=J+" ["+h.Z()+"]",KG(h)}}finally{iT(h)}}}function iT(h,_){if(h.g){YG(h);const I=h.g,C=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Mi(h,"ready");try{I.onreadystatechange=C}catch{}}}function YG(h){h.I&&(a.clearTimeout(h.I),h.I=null)}function Ua(h){return h.g?h.g.readyState:0}function JG(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function x_(h,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[h]||_}function ZG(h){this.Aa=0,this.i=[],this.j=new A_,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=x_("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=x_("baseRetryDelayMs",5e3,h),this.cb=x_("retryDelaySeedMs",1e4,h),this.Wa=x_("forwardChannelMaxRetries",2,h),this.wa=x_("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new xG(h&&h.concurrentRequestLimit),this.Da=new Rde,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function fN(h){if(XG(h),3==h.G){var _=h.U++,I=Va(h.I);if(In(I,"SID",h.K),In(I,"RID",_),In(I,"TYPE","terminate"),O_(h,I),(_=new sc(h,h.j,_)).L=2,_.v=nT(Va(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&((new Image).src=_.v,I=!0),I||(_.g=uq(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Xw(_)}oq(h)}function sT(h){h.g&&(gN(h),h.g.cancel(),h.g=null)}function XG(h){sT(h),h.u&&(a.clearTimeout(h.u),h.u=null),aT(h),h.h.cancel(),h.s&&("number"==typeof h.s&&a.clearTimeout(h.s),h.s=null)}function oT(h){if(!OG(h.h)&&!h.s){h.s=!0;var _=h.Ga;__||dG(),y_||(__(),y_=!0),qP.add(_,h),h.B=0}}function eq(h,_){var I;I=_?_.l:h.U++;const C=Va(h.I);In(C,"SID",h.K),In(C,"RID",I),In(C,"AID",h.T),O_(h,C),h.m&&h.o&&hN(C,h.m,h.o),I=new sc(h,h.j,I,h.B+1),null===h.m&&(I.H=h.o),_&&(h.i=_.D.concat(h.i)),_=tq(h,I,1e3),I.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),dN(h.h,I),aN(I,C,_)}function O_(h,_){h.H&&Te(h.H,function(I,C){In(_,C,I)}),h.l&&VG({},function(I,C){In(_,C,I)})}function tq(h,_,I){I=Math.min(h.i.length,I);var C=h.l?y(h.l.Na,h.l,h):null;e:{var z=h.i;let J=-1;for(;;){const Ce=["count="+I];-1==J?0<I?(J=z[0].g,Ce.push("ofs="+J)):J=0:Ce.push("ofs="+J);let un=!0;for(let Gr=0;Gr<I;Gr++){let Vt=z[Gr].g;const ci=z[Gr].map;if(Vt-=J,0>Vt)J=Math.max(0,z[Gr].g-100),un=!1;else try{Pde(ci,Ce,"req"+Vt+"_")}catch{C&&C(ci)}}if(un){C=Ce.join("&");break e}}}return h=h.i.splice(0,I),_.D=h,C}function nq(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;__||dG(),y_||(__(),y_=!0),qP.add(_,h),h.v=0}}function pN(h){return!(h.g||h.u||3<=h.v||(h.Y++,h.u=C_(y(h.Fa,h),sq(h,h.v)),h.v++,0))}function gN(h){null!=h.A&&(a.clearTimeout(h.A),h.A=null)}function rq(h){h.g=new sc(h,h.j,"rpc",h.Y),null===h.m&&(h.g.H=h.o),h.g.O=0;var _=Va(h.qa);In(_,"RID","rpc"),In(_,"SID",h.K),In(_,"AID",h.T),In(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&In(_,"TO",h.ja),In(_,"TYPE","xmlhttp"),O_(h,_),h.m&&h.o&&hN(_,h.m,h.o),h.L&&(h.g.I=h.L);var I=h.g;h=h.ia,I.L=1,I.v=nT(Va(_)),I.m=null,I.P=!0,PG(I,h)}function aT(h){null!=h.C&&(a.clearTimeout(h.C),h.C=null)}function iq(h,_){var I=null;if(h.g==_){aT(h),gN(h),h.g=null;var C=2}else{if(!lN(h.h,_))return;I=_.D,FG(h.h,_),C=1}if(0!=h.G)if(_.o)if(1==C){I=_.m?_.m.length:0,_=Date.now()-_.F;var z=h.B;Mi(C=Yw(),new DG(C,I)),oT(h)}else nq(h);else if(3==(z=_.s)||0==z&&0<_.X||!(1==C&&function Ode(h,_){return!(kG(h.h)>=h.h.j-(h.s?1:0)||(h.s?(h.i=_.D.concat(h.i),0):1==h.G||2==h.G||h.B>=(h.Va?0:h.Wa)||(h.s=C_(y(h.Ga,h,_),sq(h,h.B)),h.B++,0)))}(h,_)||2==C&&pN(h)))switch(I&&0<I.length&&(_=h.h,_.i=_.i.concat(I)),z){case 1:Gl(h,5);break;case 4:Gl(h,10);break;case 3:Gl(h,6);break;default:Gl(h,2)}}function sq(h,_){let I=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(I*=2),I*_}function Gl(h,_){if(h.j.info("Error code "+_),2==_){var I=y(h.fb,h),C=h.Xa;const z=!C;C=new zl(C||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||eT(C,"https"),nT(C),z?function bde(h,_){const I=new A_;if(a.Image){const C=new Image;C.onload=E(ac,I,"TestLoadImage: loaded",!0,_,C),C.onerror=E(ac,I,"TestLoadImage: error",!1,_,C),C.onabort=E(ac,I,"TestLoadImage: abort",!1,_,C),C.ontimeout=E(ac,I,"TestLoadImage: timeout",!1,_,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=h}else _(!1)}(C.toString(),I):function Sde(h,_){new A_;const C=new AbortController,z=setTimeout(()=>{C.abort(),ac(0,0,!1,_)},1e4);fetch(h,{signal:C.signal}).then(J=>{clearTimeout(z),ac(0,0,!!J.ok,_)}).catch(()=>{clearTimeout(z),ac(0,0,!1,_)})}(C.toString(),I)}else xi(2);h.G=0,h.l&&h.l.sa(_),oq(h),XG(h)}function oq(h){if(h.G=0,h.ka=[],h.l){const _=LG(h.h);(0!=_.length||0!=h.i.length)&&(D(h.ka,_),D(h.ka,h.i),h.h.i.length=0,A(h.i),h.i.length=0),h.l.ra()}}function aq(h,_,I){var C=I instanceof zl?Va(I):new zl(I);if(""!=C.g)_&&(C.g=_+"."+C.g),tT(C,C.s);else{var z=a.location;C=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var J=new zl(null);C&&eT(J,C),_&&(J.g=_),z&&tT(J,z),I&&(J.l=I),C=J}return _=h.ya,(I=h.D)&&_&&In(C,I,_),In(C,"VER",h.la),O_(h,C),C}function uq(h,_,I){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(_=new Wn(h.Ca&&!h.pa?new P_({eb:I}):h.pa)).Ha(h.J),_}function cq(){}function uT(){}function ps(h,_){ui.call(this),this.g=new ZG(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!x(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!x(_)&&(this.g.D=_,null!==(h=this.h)&&_ in h&&_ in(h=this.h)&&delete h[_]),this.j=new Lf(this)}function lq(h){rN.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const I in _){h=I;break e}h=void 0}(this.i=h)&&(h=this.i,_=null!==_&&h in _?_[h]:void 0),this.data=_}else this.data=h}function dq(){iN.call(this),this.status=1}function Lf(h){this.g=h}(t=Wn.prototype).Ha=function(h){this.J=h},t.ea=function(h,_,I,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sN.g(),this.v=function IG(h){return h.h||(h.h=h.i())}(this.o?this.o:sN),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(J){return void WG(this,J)}if(h=I||"",I=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var z in C)I.set(z,C[z]);else{if("function"!=typeof C.keys||"function"!=typeof C.get)throw Error("Unknown input type for opt_headers: "+String(C));for(const J of C.keys())I.set(J,C.get(J))}C=Array.from(I.keys()).find(J=>"content-type"==J.toLowerCase()),z=a.FormData&&h instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Mde,_,void 0))||C||z||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,Ce]of I)this.g.setRequestHeader(J,Ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{YG(this),this.u=!0,this.g.send(h),this.u=!1}catch(J){WG(this,J)}},t.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Mi(this,"complete"),Mi(this,"abort"),iT(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),iT(this,!0)),Wn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?QG(this):this.bb())},t.bb=function(){QG(this)},t.isActive=function(){return!!this.g},t.Z=function(){try{return 2<Ua(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&0==_.indexOf(h)&&(_=_.substring(h.length)),lde(_)}},t.Ba=function(){return this.m},t.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=ZG.prototype).la=8,t.G=1,t.connect=function(h,_,I,C){xi(0),this.W=h,this.H=_||{},I&&void 0!==C&&(this.H.OSID=I,this.H.OAID=C),this.F=this.X,this.I=aq(this,null,this.W),oT(this)},t.Ga=function(h){if(this.s)if(this.s=null,1==this.G){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const z=new sc(this,this.j,h);let J=this.o;if(this.S&&(J?(J=S(J),U(J,this.S)):J=this.S),null!==this.m||this.O||(z.H=J,J=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){var C=this.i[I];if(void 0===(C="__data__"in C.map&&"string"==typeof(C=C.map.__data__)?C.length:void 0))break;if(4096<(_+=C)){_=I;break e}if(4096===_||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=tq(this,z,_),In(I=Va(this.I),"RID",h),In(I,"CVER",22),this.D&&In(I,"X-HTTP-Session-Id",this.D),O_(this,I),J&&(this.O?_="headers="+encodeURIComponent(String(qG(J)))+"&"+_:this.m&&hN(I,this.m,J)),dN(this.h,z),this.Ua&&In(I,"TYPE","init"),this.P?(In(I,"$req",_),In(I,"SID","null"),z.T=!0,aN(z,I,null)):aN(z,I,_),this.G=2}}else 3==this.G&&(h?eq(this,h):0==this.i.length||OG(this.h)||eq(this))},t.Fa=function(){if(this.u=null,rq(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=C_(y(this.ab,this),h)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xi(10),sT(this),rq(this))},t.Za=function(){null!=this.C&&(this.C=null,sT(this),pN(this),xi(19))},t.fb=function(h){h?(this.j.info("Successfully pinged google.com"),xi(2)):(this.j.info("Failed to ping google.com"),xi(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=cq.prototype).ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){},uT.prototype.g=function(h,_){return new ps(h,_)},T(ps,ui),ps.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ps.prototype.close=function(){fN(this.g)},ps.prototype.o=function(h){var _=this.g;if("string"==typeof h){var I={};I.__data__=h,h=I}else this.u&&((I={}).__data__=tN(h),h=I);_.i.push(new _de(_.Ya++,h)),3==_.G&&oT(_)},ps.prototype.N=function(){this.g.l=null,delete this.j,fN(this.g),delete this.g,ps.aa.N.call(this)},T(lq,rN),T(dq,iN),T(Lf,cq),Lf.prototype.ua=function(){Mi(this.g,"a")},Lf.prototype.ta=function(h){Mi(this.g,new lq(h))},Lf.prototype.sa=function(h){Mi(this.g,new dq)},Lf.prototype.ra=function(){Mi(this.g,"b")},uT.prototype.createWebChannel=uT.prototype.g,ps.prototype.send=ps.prototype.o,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,sj=ba.createWebChannelTransport=function(){return new uT},ij=ba.getStatEventTarget=function(){return Yw()},rj=ba.Event=$l,JS=ba.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jw.NO_ERROR=0,Jw.TIMEOUT=8,Jw.HTTP_ERROR=6,xI=ba.ErrorCode=Jw,bG.COMPLETE="complete",nj=ba.EventType=bG,wG.EventType=w_,w_.OPEN="a",w_.CLOSE="b",w_.ERROR="c",w_.MESSAGE="d",ui.prototype.listen=ui.prototype.K,Cm=ba.WebChannel=wG,tj=ba.FetchXmlHttpFactory=P_,Wn.prototype.listenOnce=Wn.prototype.L,Wn.prototype.getLastError=Wn.prototype.Ka,Wn.prototype.getLastErrorCode=Wn.prototype.Ba,Wn.prototype.getStatus=Wn.prototype.Z,Wn.prototype.getResponseJson=Wn.prototype.Oa,Wn.prototype.getResponseText=Wn.prototype.oa,Wn.prototype.send=Wn.prototype.ea,Wn.prototype.setWithCredentials=Wn.prototype.Ha,ej=ba.XhrIo=Wn}).apply(typeof MI<"u"?MI:typeof self<"u"?self:typeof window<"u"?window:{});const oj="@firebase/firestore";class Mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");let qh="10.13.0";const Fu=new Lo.Vy("@firebase/firestore");function Wh(){return Fu.logLevel}function ge(t,...e){if(Fu.logLevel<=Lo.$b.DEBUG){const n=e.map(ZS);Fu.debug(`Firestore (${qh}): ${t}`,...n)}}function sr(t,...e){if(Fu.logLevel<=Lo.$b.ERROR){const n=e.map(ZS);Fu.error(`Firestore (${qh}): ${t}`,...n)}}function zi(t,...e){if(Fu.logLevel<=Lo.$b.WARN){const n=e.map(ZS);Fu.warn(`Firestore (${qh}): ${t}`,...n)}}function ZS(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch{return t}}function Oe(t="Unexpected state"){const e=`FIRESTORE (${qh}) INTERNAL ASSERTION FAILED: `+t;throw sr(e),new Error(e)}function je(t,e){t||Oe()}function we(t,e){return t}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends _t.g{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class aj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yse{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mr.UNAUTHENTICATED))}shutdown(){}}class vse{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ese{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var r=this;let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const d=o;e.enqueueRetryable((0,re.A)(function*(){yield d.promise,yield s(r.currentUser)}))},u=d=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(d=>u(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je("string"==typeof r.accessToken),new aj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return je(null===e||"string"==typeof e),new Mr(e)}}class Ise{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wse{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Ise(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class uj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tse{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{null!=s.error&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(je("string"==typeof n.token),this.R=n.token,new uj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Cse(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class cj{static newId(){const n=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Cse(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function st(t,e){return t<e?-1:t>e?1:0}function Kh(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function lj(t){return t+"\0"}class xn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return xn.fromMillis(Date.now())}static fromDate(e){return xn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new xn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ze{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ze(e)}static min(){return new ze(new xn(0,0))}static max(){return new ze(new xn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Am{constructor(e,n,r){void 0===n?n=0:n>e.length&&Oe(),void 0===r?r=e.length-n:r>e.length-n&&Oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return 0===Am.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Am?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class At extends Am{construct(e,n,r){return new At(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new fe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new At(n)}static emptyPath(){return new At([])}}const Ase=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Am{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return Ase.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new yn(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(0===r.length)throw new fe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new fe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new fe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new fe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}class be{constructor(e){this.path=e}static fromPath(e){return new be(At.fromString(e))}static fromName(e){return new be(At.fromString(e).popFirst(5))}static empty(){return new be(At.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===At.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return At.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new At(e.slice()))}}class Qh{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function XS(t){return t.fields.find(e=>2===e.kind)}function vl(t){return t.fields.filter(e=>2!==e.kind)}Qh.UNKNOWN_ID=-1;class El{constructor(e,n){this.fieldPath=e,this.kind=n}}class Yh{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Yh(0,hs.min())}}function dj(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ze.fromTimestamp(1e9===r?new xn(n+1,0):new xn(n,r));return new hs(i,be.empty(),e)}function hj(t){return new hs(t.readTime,t.key,-1)}class hs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hs(ze.min(),be.empty(),-1)}static max(){return new hs(ze.max(),be.empty(),-1)}}function e0(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=be.comparator(t.documentKey,e.documentKey),0!==n?n:st(t.largestBatchId,e.largestBatchId))}const fj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Lu(t){return t0.apply(this,arguments)}function t0(){return(t0=(0,re.A)(function*(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==fj)throw t;ge("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++a,a===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{!0===e()?n().next(()=>{s()},i):r()};s()})}}class OI{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new wr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Dm(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=n0(r.target.error);this.V.reject(new Dm(e,i))}}static open(e,n,r,i){try{return new OI(n,e.transaction(i,r))}catch(s){throw new Dm(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ge("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Rse(n)}}class Vo{constructor(e,n,r){this.name=e,this.version=n,this.p=r,12.2===Vo.S((0,_t.ZQ)())&&sr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ge("SimpleDb","Removing database:",e),Il(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,_t.zW)())return!1;if(Vo.v())return!0;const e=(0,_t.ZQ)(),n=Vo.S(e),r=0<n&&n<10,i=gj(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.C)}static F(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){var n=this;return(0,re.A)(function*(){return n.db||(ge("SimpleDb","Opening database:",n.name),n.db=yield new Promise((r,i)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new Dm(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new fe(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new fe(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new Dm(e,a))},s.onupgradeneeded=o=>{ge("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.p.O(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{ge("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.N&&(n.db.onversionchange=r=>n.N(r)),n.db})()}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){var s=this;return(0,re.A)(function*(){const o="readonly"===n;let a=0;for(;;){++a;try{s.db=yield s.M(e);const u=OI.open(s.db,e,o?"readonly":"readwrite",r),d=i(u).next(f=>(u.g(),f)).catch(f=>(u.abort(f),G.reject(f))).toPromise();return d.catch(()=>{}),yield u.m,d}catch(u){const d=u,f="FirebaseError"!==d.name&&a<3;if(ge("SimpleDb","Transaction failed with error:",d.message,"Retrying:",f),s.close(),!f)return Promise.reject(d)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}function gj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Sse{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Il(this.B.delete())}}class Dm extends fe{constructor(e,n){super(K.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Vu(t){return"IndexedDbTransactionError"===t.name}class Rse{constructor(e){this.store=e}put(e,n){let r;return void 0!==n?(ge("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(ge("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Il(r)}add(e){return ge("SimpleDb","ADD",this.store.name,e,e),Il(this.store.add(e))}get(e){return Il(this.store.get(e)).next(n=>(void 0===n&&(n=null),ge("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return ge("SimpleDb","DELETE",this.store.name,e),Il(this.store.delete(e))}count(){return ge("SimpleDb","COUNT",this.store.name),Il(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new G((o,a)=>{s.onerror=u=>{a(u.target.error)},s.onsuccess=u=>{o(u.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,u)=>{o.push(u)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,null===n?void 0:n);return new G((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){ge("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new G((r,i)=>{n.onerror=s=>{const o=n0(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new G((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const u=new Sse(a),d=n(a.primaryKey,a.value,u);if(d instanceof G){const f=d.catch(m=>(u.done(),G.reject(m)));r.push(f)}u.isDone?i():null===u.K?a.continue():a.continue(u.K)}}).next(()=>G.waitFor(r))}options(e,n){let r;return void 0!==e&&("string"==typeof e?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Il(t){return new G((e,n)=>{t.onsuccess=r=>{e(r.target.result)},t.onerror=r=>{const i=n0(r.target.error);n(i)}})}let mj=!1;function n0(t){const e=Vo.S((0,_t.ZQ)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mj||(mj=!0,setTimeout(()=>{throw r},0)),r}}return t}class Pse{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){var n=this;ge("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,re.A)(function*(){n.task=null;try{ge("IndexBackfiller",`Documents written: ${yield n.Z.ee()}`)}catch(r){Vu(r)?ge("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Lu(r)}yield n.X(6e4)}))}}class Nse{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){var n=this;return(0,re.A)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>n.te(r,e))})()}te(e,n){const r=new Set;let i=n,s=!0;return G.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ge("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(ge("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=hj(s);e0(o,r)>0&&(r=o)}),new hs(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}let fs=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function bm(t){return null==t}function Sm(t){return 0===t&&1/t==-1/0}function _j(t){return"number"==typeof t&&Number.isInteger(t)&&!Sm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ni(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yj(e)),e=Mse(t.get(n),e);return yj(e)}function Mse(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function yj(t){return t+"\x01\x01"}function Uo(t){const e=t.length;if(je(e>=2),2===e)return je("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),At.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("\x01",s);switch((o<0||o>n)&&Oe(),t.charAt(o+1)){case"\x01":const a=t.substring(s,o);let u;0===i.length?u=a:(i+=a,u=i,i=""),r.push(u);break;case"\x10":i+=t.substring(s,o),i+="\0";break;case"\x11":i+=t.substring(s,o+1);break;default:Oe()}s=o+2}return new At(r)}const vj=["userId","batchId"];function kI(t,e){return[t,ni(e)]}function Ej(t,e,n){return[t,ni(e),n]}const xse={},Ose=["prefixPath","collectionGroup","readTime","documentId"],kse=["prefixPath","collectionGroup","documentId"],Fse=["collectionGroup","readTime","prefixPath","documentId"],Lse=["canonicalId","targetId"],Vse=["targetId","path"],Use=["path","targetId"],Bse=["collectionId","parent"],jse=["indexId","uid"],$se=["uid","sequenceNumber"],Hse=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],zse=["indexId","uid","orderedDocumentKey"],Gse=["userId","collectionPath","documentId"],qse=["userId","collectionPath","largestBatchId"],Wse=["userId","collectionGroup","largestBatchId"],Ij=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Kse=[...Ij,"documentOverlays"],wj=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Tj=wj,r0=[...Tj,"indexConfiguration","indexState","indexEntries"],Qse=r0,Yse=[...r0,"globals"];class s0 extends pj{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Tr(t,e){const n=we(t);return Vo.F(n._e,e)}function Cj(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Uu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Dj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}class mn{constructor(e,n){this.comparator=e,this.root=n||$r.EMPTY}insert(e,n){return new mn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$r.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$r.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new FI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new FI(this.root,e,this.comparator,!1)}getReverseIterator(){return new FI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new FI(this.root,e,this.comparator,!0)}}class FI{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $r{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??$r.RED,this.left=i??$r.EMPTY,this.right=s??$r.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $r(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):0===s?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $r.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return $r.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$r.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$r.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Oe();const e=this.left.check();if(e!==this.right.check())throw Oe();return e+(this.isRed()?0:1)}}$r.EMPTY=null,$r.RED=!0,$r.BLACK=!1,$r.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe()}get value(){throw Oe()}get color(){throw Oe()}get left(){throw Oe()}get right(){throw Oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new $r(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class tn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new bj(this.data.getIterator())}getIteratorFrom(e){return new bj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class bj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Jh(t){return t.hasNext()?t.getNext():void 0}class Gi{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Gi([])}unionWith(e){let n=new tn(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Kh(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class Sj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Sj("Invalid base64 string: "+s):s}}(e);return new qn(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new qn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qn.EMPTY_BYTE_STRING=new qn("");const Zse=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sa(t){if(je(!!t),"string"==typeof t){let e=0;const n=Zse.exec(t);if(je(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:On(t.seconds),nanos:On(t.nanos)}}function On(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ra(t){return"string"==typeof t?qn.fromBase64String(t):qn.fromUint8Array(t)}function LI(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function VI(t){const e=t.mapValue.fields.__previous_value__;return LI(e)?VI(e):e}function Rm(t){const e=Sa(t.mapValue.fields.__local_write_time__.timestampValue);return new xn(e.seconds,e.nanos)}class Xse{constructor(e,n,r,i,s,o,a,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=d}}class Bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Bu&&e.projectId===this.projectId&&e.database===this.database}}const ju={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},UI={nullValue:"NULL_VALUE"};function $u(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?LI(t)?4:xj(t)?9007199254740991:$I(t)?10:11:Oe()}function Bo(t,e){if(t===e)return!0;const n=$u(t);if(n!==$u(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Rm(t).isEqual(Rm(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sa(i.timestampValue),a=Sa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return s=e,Ra(t.bytesValue).isEqual(Ra(s.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return On(i.geoPointValue.latitude)===On(s.geoPointValue.latitude)&&On(i.geoPointValue.longitude)===On(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return On(i.integerValue)===On(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=On(i.doubleValue),a=On(s.doubleValue);return o===a?Sm(o)===Sm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Kh(t.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Cj(o)!==Cj(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(void 0===a[u]||!Bo(o[u],a[u])))return!1;return!0}(t,e);default:return Oe()}var s}function Pm(t,e){return void 0!==(t.values||[]).find(n=>Bo(n,e))}function Hu(t,e){if(t===e)return 0;const n=$u(t),r=$u(e);if(n!==r)return st(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=On(s.integerValue||s.doubleValue),u=On(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return Rj(t.timestampValue,e.timestampValue);case 4:return Rj(Rm(t),Rm(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ra(s),u=Ra(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let d=0;d<a.length&&d<u.length;d++){const f=st(a[d],u[d]);if(0!==f)return f}return st(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=st(On(s.latitude),On(o.latitude));return 0!==a?a:st(On(s.longitude),On(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pj(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,d,f;const E=null===(a=(s.fields||{}).value)||void 0===a?void 0:a.arrayValue,T=null===(u=(o.fields||{}).value)||void 0===u?void 0:u.arrayValue,A=st((null===(d=E?.values)||void 0===d?void 0:d.length)||0,(null===(f=T?.values)||void 0===f?void 0:f.length)||0);return 0!==A?A:Pj(E,T)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ju.mapValue&&o===ju.mapValue)return 0;if(s===ju.mapValue)return 1;if(o===ju.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const y=st(u[m],f[m]);if(0!==y)return y;const E=Hu(a[u[m]],d[f[m]]);if(0!==E)return E}return st(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Oe()}}function Rj(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return st(t,e);const n=Sa(t),r=Sa(e),i=st(n.seconds,r.seconds);return 0!==i?i:st(n.nanos,r.nanos)}function Pj(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Hu(n[i],r[i]);if(s)return s}return st(n.length,r.length)}function Zh(t){return o0(t)}function o0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Sa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ra(t.bytesValue).toBase64():"referenceValue"in t?be.fromName(t.referenceValue).toString():"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=o0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${o0(n.fields[o])}`;return i+"}"}(t.mapValue):Oe()}function wl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function a0(t){return!!t&&"integerValue"in t}function Nm(t){return!!t&&"arrayValue"in t}function Nj(t){return!!t&&"nullValue"in t}function Mj(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jI(t){return!!t&&"mapValue"in t}function $I(t){var e,n;return"__vector__"===(null===(n=((null===(e=t?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Mm(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Uu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mm(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mm(t.arrayValue.values[n]);return e}return Object.assign({},t)}function xj(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}const Oj={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function eoe(t){return"nullValue"in t?UI:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?wl(Bu.empty(),be.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?$I(t)?Oj:{mapValue:{}}:Oe()}function toe(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?wl(Bu.empty(),be.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?Oj:"mapValue"in t?$I(t)?{mapValue:{}}:ju:Oe()}function kj(t,e){const n=Hu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function Fj(t,e){const n=Hu(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Hr{constructor(e){this.value=e}static empty(){return new Hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!jI(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mm(n)}setAll(e){let n=yn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Mm(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());jI(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];jI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Uu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Hr(Mm(this.value))}}function Lj(t){const e=[];return Uu(t.fields,(n,r)=>{const i=new yn([n]);if(jI(r)){const s=Lj(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gi(e)}class vn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vn(e,0,ze.min(),ze.min(),ze.min(),Hr.empty(),0)}static newFoundDocument(e,n,r,i){return new vn(e,1,n,ze.min(),r,i,0)}static newNoDocument(e,n){return new vn(e,2,n,ze.min(),ze.min(),Hr.empty(),0)}static newUnknownDocument(e,n){return new vn(e,3,n,ze.min(),ze.min(),Hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ze.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zu{constructor(e,n){this.position=e,this.inclusive=n}}function Vj(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(r=s.field.isKeyField()?be.comparator(be.fromName(o.referenceValue),n.key):Hu(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Uj(t,e){if(null===t)return null===e;if(null===e||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bo(t.position[n],e.position[n]))return!1;return!0}class xm{constructor(e,n="asc"){this.field=e,this.dir=n}}function noe(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Bj{}class Dt extends Bj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,r):new roe(e,n,r):"array-contains"===n?new ooe(e,r):"in"===n?new qj(e,r):"not-in"===n?new aoe(e,r):"array-contains-any"===n?new uoe(e,r):new Dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return"in"===n?new ioe(e,r):new soe(e,r)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Hu(n,this.value)):null!==n&&$u(this.value)===$u(n)&&this.matchesComparison(Hu(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Bj{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Jt(e,n)}matches(e){return Xh(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xh(t){return"and"===t.op}function u0(t){return"or"===t.op}function c0(t){return jj(t)&&Xh(t)}function jj(t){for(const e of t.filters)if(e instanceof Jt)return!1;return!0}function l0(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+Zh(t.value);if(c0(t))return t.filters.map(e=>l0(e)).join(",");{const e=t.filters.map(n=>l0(n)).join(",");return`${t.op}(${e})`}}function $j(t,e){return t instanceof Dt?(r=t,(i=e)instanceof Dt&&r.op===i.op&&r.field.isEqual(i.field)&&Bo(r.value,i.value)):t instanceof Jt?function(r,i){return i instanceof Jt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&$j(o,i.filters[a]),!0)}(t,e):void Oe();var r,i}function Hj(t,e){const n=t.filters.concat(e);return Jt.create(n,t.op)}function zj(t){return t instanceof Dt?`${(n=t).field.canonicalString()} ${n.op} ${Zh(n.value)}`:t instanceof Jt?function(n){return n.op.toString()+" {"+n.getFilters().map(zj).join(" ,")+"}"}(t):"Filter";var n}class roe extends Dt{constructor(e,n,r){super(e,n,r),this.key=be.fromName(r.referenceValue)}matches(e){const n=be.comparator(e.key,this.key);return this.matchesComparison(n)}}class ioe extends Dt{constructor(e,n){super(e,"in",n),this.keys=Gj(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class soe extends Dt{constructor(e,n){super(e,"not-in",n),this.keys=Gj(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Gj(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(r=>be.fromName(r.referenceValue))}class ooe extends Dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Nm(n)&&Pm(n.arrayValue,this.value)}}class qj extends Dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Pm(this.value.arrayValue,n)}}class aoe extends Dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Pm(this.value.arrayValue,n)}}class uoe extends Dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pm(this.value.arrayValue,r))}}class coe{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function d0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new coe(t,e,n,r,i,s,o)}function Tl(t){const e=we(t);if(null===e.ue){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>l0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),bm(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zh(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zh(r)).join(",")),e.ue=n}return e.ue}function Om(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!noe(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$j(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Uj(t.startAt,e.startAt)&&Uj(t.endAt,e.endAt)}function HI(t){return be.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function zI(t,e){return t.filters.filter(n=>n instanceof Dt&&n.field.isEqual(e))}function Wj(t,e,n){let r=UI,i=!0;for(const s of zI(t,e)){let o=UI,a=!0;switch(s.op){case"<":case"<=":o=eoe(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=UI}kj({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];kj({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}function Kj(t,e,n){let r=ju,i=!0;for(const s of zI(t,e)){let o=ju,a=!0;switch(s.op){case">=":case">":o=toe(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ju}Fj({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];Fj({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}return{value:r,inclusive:i}}class Pa{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null}}function Qj(t,e,n,r,i,s,o,a){return new Pa(t,e,n,r,i,s,o,a)}function ef(t){return new Pa(t)}function Yj(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function h0(t){return null!==t.collectionGroup}function tf(t){const e=we(t);if(null===e.ce){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(yn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xm(s,r))}),n.has(yn.keyField().canonicalString())||e.ce.push(new xm(yn.keyField(),r))}return e.ce}function ri(t){const e=we(t);return e.le||(e.le=function Zj(t,e){if("F"===t.limitType)return d0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>new xm(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new zu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new zu(t.startAt.position,t.startAt.inclusive):null;return d0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}(e,tf(t))),e.le}function f0(t,e){const n=t.filters.concat([e]);return new Pa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function GI(t,e,n){return new Pa(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function km(t,e){return Om(ri(t),ri(e))&&t.limitType===e.limitType}function Xj(t){return`${Tl(ri(t))}|lt:${t.limitType}`}function nf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return null!==n.collectionGroup&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>zj(i)).join(", ")}]`),bm(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zh(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zh(i)).join(",")),`Target(${r})`}(ri(t))}; limitType=${t.limitType})`}function Fm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):be.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tf(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&(i=e,!((r=t).startAt&&!function(o,a,u){const d=Vj(o,a,u);return o.inclusive?d<=0:d<0}(r.startAt,tf(r),i)||r.endAt&&!function(o,a,u){const d=Vj(o,a,u);return o.inclusive?d>=0:d>0}(r.endAt,tf(r),i)));var r,i}function e$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function t$(t){return(e,n)=>{let r=!1;for(const i of tf(t)){const s=loe(i,e,n);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function loe(t,e,n){const r=t.field.isKeyField()?be.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),d=a.data.field(s);return null!==u&&null!==d?Hu(u,d):Oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Oe()}}class Na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Uu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Dj(this.inner)}size(){return this.innerSize}}const doe=new mn(be.comparator);function qi(){return doe}const n$=new mn(be.comparator);function Lm(...t){let e=n$;for(const n of t)e=e.insert(n.key,n);return e}function r$(t){let e=n$;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jo(){return Vm()}function i$(){return Vm()}function Vm(){return new Na(t=>t.toString(),(t,e)=>t.isEqual(e))}const hoe=new mn(be.comparator),foe=new tn(be.comparator);function ft(...t){let e=foe;for(const n of t)e=e.add(n);return e}const poe=new tn(st);function p0(){return poe}function g0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sm(e)?"-0":e}}function s$(t){return{integerValue:""+t}}function o$(t,e){return _j(e)?s$(e):g0(t,e)}class qI{constructor(){this._=void 0}}function goe(t,e,n){return t instanceof rf?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&LI(s)&&(s=VI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Cl?u$(t,e):t instanceof Al?c$(t,e):function(i,s){const o=a$(i,s),a=l$(o)+l$(i.Pe);return a0(o)&&a0(i.Pe)?s$(a):g0(i.serializer,a)}(t,e)}function moe(t,e,n){return t instanceof Cl?u$(t,e):t instanceof Al?c$(t,e):n}function a$(t,e){return t instanceof sf?a0(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class rf extends qI{}class Cl extends qI{constructor(e){super(),this.elements=e}}function u$(t,e){const n=d$(e);for(const r of t.elements)n.some(i=>Bo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Al extends qI{constructor(e){super(),this.elements=e}}function c$(t,e){let n=d$(e);for(const r of t.elements)n=n.filter(i=>!Bo(i,r));return{arrayValue:{values:n}}}class sf extends qI{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function l$(t){return On(t.integerValue||t.doubleValue)}function d$(t){return Nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class Um{constructor(e,n){this.field=e,this.transform=n}}class yoe{constructor(e,n){this.version=e,this.transformResults=n}}class kn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WI(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class KI{}function h$(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new uf(t.key,kn.none()):new af(t.key,t.data,kn.none());{const n=t.data,r=Hr.empty();let i=new tn(yn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Ma(t.key,r,new Gi(i.toArray()),kn.none())}}function voe(t,e,n){t instanceof af?function(i,s,o){const a=i.value.clone(),u=g$(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ma?function(i,s,o){if(!WI(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=g$(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(p$(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function Bm(t,e,n,r){return t instanceof af?function(s,o,a,u){if(!WI(s.precondition,o))return a;const d=s.value.clone(),f=m$(s.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ma?function(s,o,a,u){if(!WI(s.precondition,o))return a;const d=m$(s.fieldTransforms,u,o),f=o.data;return f.setAll(p$(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):(a=n,WI(t.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Eoe(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=a$(r.transform,i||null);null!=s&&(null===n&&(n=Hr.empty()),n.set(r.field,s))}return n||null}function f$(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=t.fieldTransforms)&&void 0===i||r&&i&&Kh(r,i,(s,o)=>function _oe(t,e){return t.field.isEqual(e.field)&&(i=e.transform,(r=t.transform)instanceof Cl&&i instanceof Cl||r instanceof Al&&i instanceof Al?Kh(r.elements,i.elements,Bo):r instanceof sf&&i instanceof sf?Bo(r.Pe,i.Pe):r instanceof rf&&i instanceof rf);var r,i}(s,o))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var r,i}class af extends KI{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ma extends KI{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function p$(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function g$(t,e,n){const r=new Map;je(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,moe(o,a,n[i]))}return r}function m$(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,goe(s,o,e))}return r}class uf extends KI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m0 extends KI{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _0{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&voe(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Bm(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Bm(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=i$();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=h$(o,a);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ze.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ft())}isEqual(e){return this.batchId===e.batchId&&Kh(this.mutations,e.mutations,(n,r)=>f$(n,r))&&Kh(this.baseMutations,e.baseMutations,(n,r)=>f$(n,r))}}class y0{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){je(e.mutations.length===r.length);let i=function(){return hoe}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new y0(e,n,r,i)}}class v0{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ioe{constructor(e,n){this.count=e,this.unchangedNames=n}}var hr,Ot;function y$(t){switch(t){default:return Oe();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function v$(t){if(void 0===t)return sr("GRPC error has no .code"),K.UNKNOWN;switch(t){case hr.OK:return K.OK;case hr.CANCELLED:return K.CANCELLED;case hr.UNKNOWN:return K.UNKNOWN;case hr.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case hr.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case hr.INTERNAL:return K.INTERNAL;case hr.UNAVAILABLE:return K.UNAVAILABLE;case hr.UNAUTHENTICATED:return K.UNAUTHENTICATED;case hr.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case hr.NOT_FOUND:return K.NOT_FOUND;case hr.ALREADY_EXISTS:return K.ALREADY_EXISTS;case hr.PERMISSION_DENIED:return K.PERMISSION_DENIED;case hr.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case hr.ABORTED:return K.ABORTED;case hr.OUT_OF_RANGE:return K.OUT_OF_RANGE;case hr.UNIMPLEMENTED:return K.UNIMPLEMENTED;case hr.DATA_LOSS:return K.DATA_LOSS;default:return Oe()}}(Ot=hr||(hr={}))[Ot.OK=0]="OK",Ot[Ot.CANCELLED=1]="CANCELLED",Ot[Ot.UNKNOWN=2]="UNKNOWN",Ot[Ot.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ot[Ot.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ot[Ot.NOT_FOUND=5]="NOT_FOUND",Ot[Ot.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ot[Ot.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ot[Ot.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ot[Ot.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ot[Ot.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ot[Ot.ABORTED=10]="ABORTED",Ot[Ot.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ot[Ot.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ot[Ot.INTERNAL=13]="INTERNAL",Ot[Ot.UNAVAILABLE=14]="UNAVAILABLE",Ot[Ot.DATA_LOSS=15]="DATA_LOSS";function E$(){return new TextEncoder}const woe=new yl([4294967295,4294967295],0);function I$(t){const e=E$().encode(t),n=new XB;return n.update(e),new Uint8Array(n.digest())}function w$(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yl([n,r],0),new yl([i,s],0)]}class E0{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jm(`Invalid padding: ${n}`);if(r<0)throw new jm(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new jm(`Invalid hash count: ${r}`);if(0===e.length&&0!==n)throw new jm(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yl.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yl.fromNumber(r)));return 1===i.compare(woe)&&(i=new yl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const n=I$(e),[r,i]=w$(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new E0(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Ie)return;const n=I$(e),[r,i]=w$(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class jm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class $m{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new $m(ze.min(),i,new mn(st),qi(),ft())}}class Hm{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hm(r,n,ft(),ft(),ft())}}class YI{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class T${constructor(e,n){this.targetId=e,this.me=n}}class C${constructor(e,n,r=qn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class A${constructor(){this.fe=0,this.ge=b$(),this.pe=qn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ft(),n=ft(),r=ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Oe()}}),new Hm(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=b$()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Toe{constructor(e){this.Le=e,this.Be=new Map,this.ke=qi(),this.qe=D$(),this.Qe=new mn(st)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(HI(s))if(0===r){const o=new be(s.path);this.Ue(n,o,vn.newNoDocument(o,ze.min()))}else je(1===r);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;0!==u&&(this.je(n),this.Qe=this.Qe.insert(n,2===u?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ra(r).toUint8Array()}catch(u){if(u instanceof Sj)return zi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new E0(o,i,s)}catch(u){return zi(u instanceof jm?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return 0===a.Ie?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&HI(a.target)){const u=new be(a.target.path);null!==this.ke.get(u)||this.it(o,u)||this.Ue(o,u,vn.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||"TargetPurposeLimboResolution"===d.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new $m(e,n,this.Qe,this.ke,r);return this.ke=qi(),this.qe=D$(),this.Qe=new mn(st),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new A$,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tn(st),this.qe=this.qe.insert(e,n)),n}ze(e){const n=null!==this.Je(e);return n||ge("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new A$),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function D$(){return new mn(be.comparator)}function b$(){return new mn(be.comparator)}const Coe={asc:"ASCENDING",desc:"DESCENDING"},Aoe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Doe={and:"AND",or:"OR"};class boe{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function I0(t,e){return t.useProto3Json||bm(e)?e:{value:e}}function cf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S$(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Soe(t,e){return cf(t,e.toTimestamp())}function or(t){return je(!!t),ze.fromTimestamp(function(n){const r=Sa(n);return new xn(r.seconds,r.nanos)}(t))}function w0(t,e){return T0(t,e).canonicalString()}function T0(t,e){const n=(i=t,new At(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?n:n.child(e)}function R$(t){const e=At.fromString(t);return je(B$(e)),e}function zm(t,e){return w0(t.databaseId,e.path)}function $o(t,e){const n=R$(e);if(n.get(1)!==t.databaseId.projectId)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new be(M$(n))}function P$(t,e){return w0(t.databaseId,e)}function N$(t){const e=R$(t);return 4===e.length?At.emptyPath():M$(e)}function C0(t){return new At(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function M$(t){return je(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function x$(t,e,n){return{name:zm(t,e),fields:n.value.mapValue.fields}}function O$(t,e,n){const r=$o(t,e.name),i=or(e.updateTime),s=e.createTime?or(e.createTime):ze.min(),o=new Hr({mapValue:{fields:e.fields}}),a=vn.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Gm(t,e){let n;if(e instanceof af)n={update:x$(t,e.key,e.value)};else if(e instanceof uf)n={delete:zm(t,e.key)};else if(e instanceof Ma)n={update:x$(t,e.key,e.data),updateMask:Foe(e.fieldMask)};else{if(!(e instanceof m0))return Oe();n={verify:zm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof rf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Al)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sf)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Oe()}(0,r))),e.precondition.isNone||(n.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Soe(t,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:Oe()),n;var s}function A0(t,e){const n=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?kn.updateTime(or(s.updateTime)):void 0!==s.exists?kn.exists(s.exists):kn.none():kn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let u=null;"setToServerValue"in a?(je("REQUEST_TIME"===a.setToServerValue),u=new rf):"appendMissingElements"in a?u=new Cl(a.appendMissingElements.values||[]):"removeAllFromArray"in a?u=new Al(a.removeAllFromArray.values||[]):"increment"in a?u=new sf(o,a.increment):Oe();const d=yn.fromServerFormat(a.fieldPath);return new Um(d,u)}(t,i)):[];var s;if(e.update){const i=$o(t,e.update.name),s=new Hr({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Gi((e.updateMask.fieldPaths||[]).map(f=>yn.fromServerFormat(f)));return new Ma(i,s,o,n,r)}return new af(i,s,n,r)}if(e.delete){const i=$o(t,e.delete);return new uf(i,n)}if(e.verify){const i=$o(t,e.verify);return new m0(i,n)}return Oe()}function k$(t,e){return{documents:[P$(t,e.path)]}}function JI(t,e){const n={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=P$(t,i);const s=function(d){if(0!==d.length)return U$(Jt.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(0!==d.length)return d.map(f=>{return{field:Gu((y=f).field),direction:xoe(y.dir)};var y})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=I0(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:i};var d}function L$(t){let e=N$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){je(1===r);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(m){const y=V$(m);return y instanceof Jt&&c0(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(y=>{return new xm(lf((T=y).field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let a=null;n.limit&&(a=function(m){let y;return y="object"==typeof m?m.value:m,bm(y)?null:y}(n.limit));let u=null;var m;n.startAt&&(u=new zu((m=n.startAt).values||[],!!m.before));let d=null;return n.endAt&&(d=function(m){return new zu(m.values||[],!m.before)}(n.endAt)),Qj(e,i,o,s,a,"F",u,d)}function V$(t){return void 0!==t.unaryFilter?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=lf(n.unaryFilter.field);return Dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=lf(n.unaryFilter.field);return Dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=lf(n.unaryFilter.field);return Dt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=lf(n.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Oe()}}(t):void 0!==t.fieldFilter?Dt.create(lf((n=t).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Oe()}}(n.fieldFilter.op),n.fieldFilter.value):void 0!==t.compositeFilter?function(n){return Jt.create(n.compositeFilter.filters.map(r=>V$(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Oe()}}(n.compositeFilter.op))}(t):Oe();var n}function xoe(t){return Coe[t]}function Ooe(t){return Aoe[t]}function koe(t){return Doe[t]}function Gu(t){return{fieldPath:t.canonicalString()}}function lf(t){return yn.fromServerFormat(t.fieldPath)}function U$(t){return t instanceof Dt?function(n){if("=="===n.op){if(Mj(n.value))return{unaryFilter:{field:Gu(n.field),op:"IS_NAN"}};if(Nj(n.value))return{unaryFilter:{field:Gu(n.field),op:"IS_NULL"}}}else if("!="===n.op){if(Mj(n.value))return{unaryFilter:{field:Gu(n.field),op:"IS_NOT_NAN"}};if(Nj(n.value))return{unaryFilter:{field:Gu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(n.field),op:Ooe(n.op),value:n.value}}}(t):t instanceof Jt?function(n){const r=n.getFilters().map(i=>U$(i));return 1===r.length?r[0]:{compositeFilter:{op:koe(n.op),filters:r}}}(t):Oe()}function Foe(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function B$(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}class xa{constructor(e,n,r,i,s=ze.min(),o=ze.min(),a=qn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class j${constructor(e){this.ct=e}}function $$(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ZI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:zm(s=t.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:cf(s,o.version.toTimestamp()),createTime:cf(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Dl(e.version)};else{if(!e.isUnknownDocument())return Oe();r.unknownDocument={path:n.path.toArray(),version:Dl(e.version)}}var s,o;return r}function ZI(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Dl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bl(t){const e=new xn(t.seconds,t.nanoseconds);return ze.fromTimestamp(e)}function Sl(t,e){const n=(e.baseMutations||[]).map(s=>A0(t.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>A0(t.ct,s)),i=xn.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,i,n,r)}function qm(t){const e=bl(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?bl(t.lastLimboFreeSnapshotVersion):ze.min();let r;return r=void 0!==t.query.documents?(je(1===(s=t.query).documents.length),ri(ef(N$(s.documents[0])))):function(s){return ri(L$(s))}(t.query),new xa(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qn.fromBase64String(t.resumeToken));var s}function H$(t,e){const n=Dl(e.snapshotVersion),r=Dl(e.lastLimboFreeSnapshotVersion);let i;i=HI(e.target)?k$(t.ct,e.target):JI(t.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tl(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function D0(t){const e=L$({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?GI(e,e.limit,"L"):e}function b0(t,e){return new v0(e.largestBatchId,A0(t.ct,e.overlayMutation))}function z$(t,e){const n=e.path.lastSegment();return[t,ni(e.path.popLast()),n]}function G$(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Dl(r.readTime),documentKey:ni(r.documentKey.path),largestBatchId:r.largestBatchId}}class Voe{getBundleMetadata(e,n){return q$(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:bl(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return q$(e).put({bundleId:(i=n).id,createTime:Dl(or(i.createTime)),version:i.version});var i}getNamedQuery(e,n){return W$(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:D0(s.bundledQuery),readTime:bl(s.readTime)};var s})}saveNamedQuery(e,n){return W$(e).put({name:(i=n).name,readTime:Dl(or(i.readTime)),bundledQuery:i.bundledQuery});var i}}function q$(t){return Tr(t,"bundles")}function W$(t){return Tr(t,"namedQueries")}class XI{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){return new XI(e,n.uid||"")}getOverlay(e,n){return Wm(e).get(z$(this.userId,n)).next(r=>r?b0(this.serializer,r):null)}getOverlays(e,n){const r=jo();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new v0(n,o);i.push(this.ht(e,a))}),G.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(ni(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Wm(e).j("collectionPathOverlayIndex",a))}),G.waitFor(s)}getOverlaysForCollection(e,n,r){const i=jo(),s=ni(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wm(e).U("collectionPathOverlayIndex",o).next(a=>{for(const u of a){const d=b0(this.serializer,u);i.set(d.getKey(),d)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=jo();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Wm(e).J({index:"collectionGroupOverlayIndex",range:a},(u,d,f)=>{const m=b0(this.serializer,d);s.size()<i||m.largestBatchId===o?(s.set(m.getKey(),m),o=m.largestBatchId):f.done()}).next(()=>s)}ht(e,n){return Wm(e).put(function(i,s,o){const[a,u,d]=z$(s,o.mutation.key);return{userId:s,collectionPath:u,documentId:d,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Gm(i.ct,o.mutation)}}(this.serializer,this.userId,n))}}function Wm(t){return Tr(t,"documentOverlays")}class Uoe{Pt(e){return Tr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(n=>{const r=n?.value;return r?qn.fromUint8Array(r):qn.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.Pt(e).put({name:"sessionToken",value:n.toUint8Array()})}}class Rl{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(On(e.integerValue));else if("doubleValue"in e){const r=On(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Sm(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),"string"==typeof r&&(r=Sa(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ra(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?xj(e)?this.dt(n,Number.MAX_SAFE_INTEGER):$I(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Oe()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){const r=e.fields||{};this.dt(n,55);for(const i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;const s=e.fields||{};this.dt(n,53);const o="value",a=(null===(i=null===(r=s[o].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.dt(n,15),n.At(On(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){const r=e.values||[];this.dt(n,50);for(const i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),be.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}}function Boe(t){if(0===t)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function K$(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Boe(255&r[s]);if(i+=o,8!==o)break}return i}(t);return Math.ceil(e/8)}Rl.vt=new Rl;class joe{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ft(r.value),r=n.next();this.Mt()}xt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ot(r.value),r=n.next();this.Nt()}Lt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=n.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(n<"\ud800"||"\udbff"<n)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=n.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const n=this.qt(e),r=K$(n);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Kt(e){const n=this.qt(e),r=K$(n);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=!!(128&n[0]);n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ft(e){const n=255&e;0===n?(this.Ut(0),this.Ut(255)):255===n?(this.Ut(255),this.Ut(0)):this.Ut(n)}Ot(e){const n=255&e;0===n?(this.Gt(0),this.Gt(255)):255===n?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class $oe{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class Hoe{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Km{constructor(){this.jt=new joe,this.Ht=new $oe(this.jt),this.Jt=new Hoe(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return 0===e?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}class Pl{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,r)}}function qu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=Q$(t.arrayValue,e.arrayValue),0!==n?n:(n=Q$(t.directionalValue,e.directionalValue),0!==n?n:be.comparator(t.documentKey,e.documentKey)))}function Q$(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(0!==r)return r}return t.length-e.length}class Y${constructor(e){this.Xt=new tn((n,r)=>yn.comparator(n.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const n of e.filters){const r=n;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(je(e.collectionGroup===this.collectionId),this.nn)return!1;const n=XS(e);if(void 0!==n&&!this.sn(n))return!1;const r=vl(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[s];if(!this.on(a,u)||!this._n(this.en[o++],u))return!1}++s}for(;s<r.length;++s)if(o>=this.en.length||!this._n(this.en[o++],r[s]))return!1;return!0}an(){if(this.nn)return null;let e=new tn(yn.comparator);const n=[];for(const r of this.tn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)n.push(new El(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new El(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new El(r.field,"asc"===r.dir?0:1)));return new Qh(Qh.UNKNOWN_ID,this.collectionId,n,Yh.empty())}sn(e){for(const n of this.tn)if(this.on(n,e))return!0;return!1}on(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}_n(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function J$(t){var e,n;if(je(t instanceof Dt||t instanceof Jt),t instanceof Dt){if(t instanceof qj){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>Dt.create(t.field,"==",s)))||[];return Jt.create(i,"or")}return t}const r=t.filters.map(i=>J$(i));return Jt.create(r,t.op)}function zoe(t){if(0===t.getFilters().length)return[];const e=P0(J$(t));return je(Z$(e)),S0(e)||R0(e)?[e]:e.getFilters()}function S0(t){return t instanceof Dt}function R0(t){return t instanceof Jt&&c0(t)}function Z$(t){return S0(t)||R0(t)||function(n){if(n instanceof Jt&&u0(n)){for(const r of n.getFilters())if(!S0(r)&&!R0(r))return!1;return!0}return!1}(t)}function P0(t){if(je(t instanceof Dt||t instanceof Jt),t instanceof Dt)return t;if(1===t.filters.length)return P0(t.filters[0]);const e=t.filters.map(r=>P0(r));let n=Jt.create(e,t.op);return n=ew(n),Z$(n)?n:(je(n instanceof Jt),je(Xh(n)),je(n.filters.length>1),n.filters.reduce((r,i)=>N0(r,i)))}function N0(t,e){let n;return je(t instanceof Dt||t instanceof Jt),je(e instanceof Dt||e instanceof Jt),n=t instanceof Dt?e instanceof Dt?Jt.create([t,e],"and"):X$(t,e):e instanceof Dt?X$(e,t):function(i,s){if(je(i.filters.length>0&&s.filters.length>0),Xh(i)&&Xh(s))return Hj(i,s.getFilters());const o=u0(i)?i:s,a=u0(i)?s:i,u=o.filters.map(d=>N0(d,a));return Jt.create(u,"or")}(t,e),ew(n)}function X$(t,e){if(Xh(e))return Hj(e,t.getFilters());{const n=e.filters.map(r=>N0(t,r));return Jt.create(n,"or")}}function ew(t){if(je(t instanceof Dt||t instanceof Jt),t instanceof Dt)return t;const e=t.getFilters();if(1===e.length)return ew(e[0]);if(jj(t))return t;const n=e.map(i=>ew(i)),r=[];return n.forEach(i=>{i instanceof Dt?r.push(i):i instanceof Jt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Jt.create(r,t.op)}class Goe{constructor(){this.un=new M0}addToCollectionParentIndex(e,n){return this.un.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(hs.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class M0{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tn(At.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(At.comparator)).toArray()}}const tw=new Uint8Array(0);class qoe{constructor(e,n){this.databaseId=n,this.cn=new M0,this.ln=new Na(r=>Tl(r),(r,i)=>Om(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.cn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.cn.add(n)});const s={collectionId:r,parent:ni(i)};return eH(e).put(s)}return G.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[lj(n),""],!1,!0);return eH(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(Uo(o.parent))}return r})}addFieldIndex(e,n){const r=Qm(e),i={indexId:(a=n).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])};var a;delete i.indexId;const s=r.add(i);if(n.indexState){const o=hf(e);return s.next(a=>{o.put(G$(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Qm(e),i=hf(e),s=df(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Qm(e),r=df(e),i=hf(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return G.forEach(this.hn(n),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Y$(r).an();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=df(e);let i=!0;const s=new Map;return G.forEach(this.hn(n),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ft();const a=[];return G.forEach(s,(u,d)=>{var V;ge("IndexedDbIndexManager",`Using index ${V=u,`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(ee=>`${ee.fieldPath}:${ee.kind}`).join(",")}`} to execute ${Tl(n)}`);const f=function(V,ee){const ve=XS(ee);if(void 0===ve)return null;for(const Te of zI(V,ve.fieldPath))switch(Te.op){case"array-contains-any":return Te.value.arrayValue.values||[];case"array-contains":return[Te.value]}return null}(d,u),m=function(V,ee){const ve=new Map;for(const Te of vl(ee))for(const k of zI(V,Te.fieldPath))switch(k.op){case"==":case"in":ve.set(Te.fieldPath.canonicalString(),k.value);break;case"not-in":case"!=":return ve.set(Te.fieldPath.canonicalString(),k.value),Array.from(ve.values())}return null}(d,u),y=function(V,ee){const ve=[];let Te=!0;for(const k of vl(ee)){const S=0===k.kind?Wj(V,k.fieldPath,V.startAt):Kj(V,k.fieldPath,V.startAt);ve.push(S.value),Te&&(Te=S.inclusive)}return new zu(ve,Te)}(d,u),E=function(V,ee){const ve=[];let Te=!0;for(const k of vl(ee)){const S=0===k.kind?Kj(V,k.fieldPath,V.endAt):Wj(V,k.fieldPath,V.endAt);ve.push(S.value),Te&&(Te=S.inclusive)}return new zu(ve,Te)}(d,u),T=this.In(u,d,y),A=this.In(u,d,E),D=this.Tn(u,d,m),F=this.En(u.indexId,f,T,y.inclusive,A,E.inclusive,D);return G.forEach(F,x=>r.G(x,n.limit).next(V=>{V.forEach(ee=>{const ve=be.fromSegments(ee.documentKey);o.has(ve)||(o=o.add(ve),a.push(ve))})}))}).next(()=>a)}return G.resolve(null)})}hn(e){let n=this.ln.get(e);return n||(n=0===e.filters.length?[e]:zoe(Jt.create(e.filters,"and")).map(r=>d0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,n),n)}En(e,n,r,i,s,o,a){const u=(null!=n?n.length:1)*Math.max(r.length,s.length),d=u/(null!=n?n.length:1),f=[];for(let m=0;m<u;++m){const y=n?this.dn(n[m/d]):tw,E=this.An(e,y,r[m%d],i),T=this.Rn(e,y,s[m%d],o),A=a.map(D=>this.An(e,y,D,!0));f.push(...this.createRange(E,T,A))}return f}An(e,n,r,i){const s=new Pl(e,be.empty(),n,r);return i?s:s.Zt()}Rn(e,n,r,i){const s=new Pl(e,be.empty(),n,r);return i?s.Zt():s}Pn(e,n){const r=new Y$(n),i=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.hn(n);return G.forEach(i,s=>this.Pn(e,s).next(o=>{o?0!==r&&o.fields.length<function(u){let d=new tn(yn.comparator),f=!1;for(const m of u.filters)for(const y of m.getFlattenedFilters())y.field.isKeyField()||("array-contains"===y.op||"array-contains-any"===y.op?f=!0:d=d.add(y.field));for(const m of u.orderBy)m.field.isKeyField()||(d=d.add(m.field));return d.size+(f?1:0)}(s)&&(r=1):r=0})).next(()=>null!==n.limit&&i.length>1&&2===r?1:r)}Vn(e,n){const r=new Km;for(const i of vl(e)){const s=n.data.field(i.fieldPath);if(null==s)return null;const o=r.Yt(i.kind);Rl.vt.It(s,o)}return r.zt()}dn(e){const n=new Km;return Rl.vt.It(e,n.Yt(0)),n.zt()}mn(e,n){const r=new Km;return Rl.vt.It(wl(this.databaseId,n),r.Yt(function(s){const o=vl(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,n,r){if(null===r)return[];let i=[];i.push(new Km);let s=0;for(const o of vl(e)){const a=r[s++];for(const u of i)if(this.fn(n,o.fieldPath)&&Nm(a))i=this.gn(i,o,a);else{const d=u.Yt(o.kind);Rl.vt.It(a,d)}}return this.pn(i)}In(e,n,r){return this.Tn(e,n,r.position)}pn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].zt();return n}gn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const u=new Km;u.seed(a.zt()),Rl.vt.It(o,u.Yt(n.kind)),s.push(u)}return s}fn(e,n){return!!e.filters.find(r=>r instanceof Dt&&r.field.isEqual(n)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,n){const r=Qm(e),i=hf(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return G.forEach(s,a=>i.get([a.indexId,this.uid]).next(u=>{o.push(function(f,m){const y=m?new Yh(m.sequenceNumber,new hs(bl(m.readTime),new be(Uo(m.documentKey)),m.largestBatchId)):Yh.empty(),E=f.fields.map(([T,A])=>new El(yn.fromServerFormat(T),A));return new Qh(f.indexId,f.collectionGroup,E,y)}(a,u))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:st(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Qm(e),s=hf(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>G.forEach(a,u=>s.put(G$(u.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return G.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?G.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),G.forEach(a,u=>this.wn(e,i,u).next(d=>{const f=this.Sn(s,u);return d.isEqual(f)?G.resolve():this.bn(e,s,u,d,f)}))))})}Dn(e,n,r,i){return df(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,n.key),documentKey:n.key.path.toArray()})}vn(e,n,r,i){return df(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,n.key),n.key.path.toArray()])}wn(e,n,r){const i=df(e);let s=new tn(qu);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,n)])},(o,a)=>{s=s.add(new Pl(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,n){let r=new tn(qu);const i=this.Vn(n,e);if(null==i)return r;const s=XS(n);if(null!=s){const o=e.data.field(s.fieldPath);if(Nm(o))for(const a of o.arrayValue.values||[])r=r.add(new Pl(n.indexId,e.key,this.dn(a),i))}else r=r.add(new Pl(n.indexId,e.key,tw,i));return r}bn(e,n,r,i,s){ge("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(u,d,f,m,y){const E=u.getIterator(),T=d.getIterator();let A=Jh(E),D=Jh(T);for(;A||D;){let F=!1,x=!1;if(A&&D){const V=f(A,D);V<0?x=!0:V>0&&(F=!0)}else null!=A?x=!0:F=!0;F?(m(D),D=Jh(T)):x?(y(A),A=Jh(E)):(A=Jh(E),D=Jh(T))}}(i,s,qu,a=>{o.push(this.Dn(e,n,r,a))},a=>{o.push(this.vn(e,n,r,a))}),G.waitFor(o)}yn(e){let n=1;return hf(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>qu(o,a)).filter((o,a,u)=>!a||0!==qu(o,u[a-1]));const i=[];i.push(e);for(const o of r){const a=qu(o,e),u=qu(o,n);if(0===a)i[0]=e.Zt();else if(a>0&&u<0)i.push(o),i.push(o.Zt());else if(u>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,tw,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,tw,[]]))}return s}Cn(e,n){return qu(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(tH)}getMinOffset(e,n){return G.mapArray(this.hn(n),r=>this.Pn(e,r).next(i=>i||Oe())).next(tH)}}function eH(t){return Tr(t,"collectionParents")}function df(t){return Tr(t,"indexEntries")}function Qm(t){return Tr(t,"indexConfiguration")}function hf(t){return Tr(t,"indexState")}function tH(t){je(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;e0(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new hs(e.readTime,e.documentKey,n)}const nH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ii{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ii(e,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rH(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const u=r.J({range:o},(f,m,y)=>(a++,y.delete()));s.push(u.next(()=>{je(1===a)}));const d=[];for(const f of n.mutations){const m=Ej(e,f.key.path,n.batchId);s.push(i.delete(m)),d.push(f.key)}return G.waitFor(s).next(()=>d)}function nw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Oe();e=t.noDocument}return JSON.stringify(e).length}ii.DEFAULT_COLLECTION_PERCENTILE=10,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ii.DEFAULT=new ii(41943040,ii.DEFAULT_COLLECTION_PERCENTILE,ii.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ii.DISABLED=new ii(-1,0,0);class rw{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,n,r,i){je(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new rw(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=ff(e),o=Wu(e);return o.add({}).next(a=>{je("number"==typeof a);const u=new _0(a,n,r,i),d=function(E,T,A){const D=A.baseMutations.map(x=>Gm(E.ct,x)),F=A.mutations.map(x=>Gm(E.ct,x));return{userId:T,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:D,mutations:F}}(this.serializer,this.userId,u),f=[];let m=new tn((y,E)=>st(y.canonicalString(),E.canonicalString()));for(const y of i){const E=Ej(this.userId,y.key.path,a);m=m.add(y.key.path.popLast()),f.push(o.put(d)),f.push(s.put(E,xse))}return m.forEach(y=>{f.push(this.indexManager.addToCollectionParentIndex(e,y))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),G.waitFor(f).next(()=>u)})}lookupMutationBatch(e,n){return Wu(e).get(n).next(r=>r?(je(r.userId===this.userId),Sl(this.serializer,r)):null)}Mn(e,n){return this.Fn[n]?G.resolve(this.Fn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Fn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Wu(e).J({index:"userMutationsIndex",range:i},(o,a,u)=>{a.userId===this.userId&&(je(a.batchId>=r),s=Sl(this.serializer,a)),u.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wu(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wu(e).U("userMutationsIndex",n).next(r=>r.map(i=>Sl(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=kI(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return ff(e).J({range:i},(o,a,u)=>{const[d,f,m]=o,y=Uo(f);if(d===this.userId&&n.path.isEqual(y))return Wu(e).get(m).next(E=>{if(!E)throw Oe();je(E.userId===this.userId),s.push(Sl(this.serializer,E))});u.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(st);const i=[];return n.forEach(s=>{const o=kI(this.userId,s.path),a=IDBKeyRange.lowerBound(o),u=ff(e).J({range:a},(d,f,m)=>{const[y,E,T]=d,A=Uo(E);y===this.userId&&s.path.isEqual(A)?r=r.add(T):m.done()});i.push(u)}),G.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=kI(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new tn(st);return ff(e).J({range:o},(u,d,f)=>{const[m,y,E]=u,T=Uo(y);m===this.userId&&r.isPrefixOf(T)?T.length===i&&(a=a.add(E)):f.done()}).next(()=>this.xn(e,a))}xn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Wu(e).get(s).next(o=>{if(null===o)throw Oe();je(o.userId===this.userId),r.push(Sl(this.serializer,o))}))}),G.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return rH(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.On(n.batchId)}),G.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return G.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return ff(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const u=Uo(s[1]);i.push(u)}else a.done()}).next(()=>{je(0===i.length)})})}containsKey(e,n){return iH(e,this.userId,n)}Nn(e){return sH(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function iH(t,e,n){const r=kI(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return ff(t).J({range:s,H:!0},(a,u,d)=>{const[f,m,y]=a;f===e&&m===i&&(o=!0),d.done()}).next(()=>o)}function Wu(t){return Tr(t,"mutations")}function ff(t){return Tr(t,"documentMutations")}function sH(t){return Tr(t,"mutationQueues")}class Nl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Nl(0)}static kn(){return new Nl(-1)}}class Woe{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.qn(e).next(n=>{const r=new Nl(n.highestTargetId);return n.highestTargetId=r.next(),this.Qn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(n=>ze.fromTimestamp(new xn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.Qn(e,i)))}addTargetData(e,n){return this.Kn(e,n).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(n,r),this.Qn(e,r))))}updateTargetData(e,n){return this.Kn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>pf(e).delete(n.targetId)).next(()=>this.qn(e)).next(r=>(je(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return pf(e).J((o,a)=>{const u=qm(a);u.sequenceNumber<=n&&null===r.get(u.targetId)&&(i++,s.push(this.removeTargetData(e,u)))}).next(()=>G.waitFor(s)).next(()=>i)}forEachTarget(e,n){return pf(e).J((r,i)=>{const s=qm(i);n(s)})}qn(e){return oH(e).get("targetGlobalKey").next(n=>(je(null!==n),n))}Qn(e,n){return oH(e).put("targetGlobalKey",n)}Kn(e,n){return pf(e).put(H$(this.serializer,n))}$n(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Tl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return pf(e).J({range:i,index:"queryTargetsIndex"},(o,a,u)=>{const d=qm(a);Om(n,d.target)&&(s=d,u.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Ku(e);return n.forEach(o=>{const a=ni(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),G.waitFor(i)}removeMatchingKeys(e,n,r){const i=Ku(e);return G.forEach(n,s=>{const o=ni(s.path);return G.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Ku(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Ku(e);let s=ft();return i.J({range:r,H:!0},(o,a,u)=>{const d=Uo(o[1]),f=new be(d);s=s.add(f)}).next(()=>s)}containsKey(e,n){const r=ni(n.path),i=IDBKeyRange.bound([r],[lj(r)],!1,!0);let s=0;return Ku(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],u,d)=>{0!==o&&(s++,d.done())}).next(()=>s>0)}ot(e,n){return pf(e).get(n).next(r=>r?qm(r):null)}}function pf(t){return Tr(t,"targets")}function oH(t){return Tr(t,"targetGlobal")}function Ku(t){return Tr(t,"targetDocuments")}function aH([t,e],[n,r]){const i=st(t,n);return 0===i?st(e,r):i}class Koe{constructor(e){this.Un=e,this.buffer=new tn(aH),this.Wn=0}Gn(){return++this.Wn}zn(e){const n=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();aH(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uH{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return null!==this.jn}Hn(e){var n=this;ge("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,re.A)(function*(){n.jn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(r){Vu(r)?ge("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Lu(r)}yield n.Hn(3e5)}))}}class Qoe{constructor(e,n){this.Jn=e,this.params=n}calculateTargetCount(e,n){return this.Jn.Yn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(0===n)return G.resolve(fs.oe);const r=new Koe(n);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(nH)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nH):this.Xn(e,n))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,n){let r,i,s,o,a,u,d;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,a=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Wh()<=Lo.$b.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-f}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(u-a)+`ms\n\tRemoved ${m} documents in `+(d-u)+`ms\nTotal Duration: ${d-f}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}class Yoe{constructor(e,n){this.db=e,this.garbageCollector=function cH(t,e){return new Qoe(t,e)}(this,n)}Yn(e){const n=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}er(e){let n=0;return this.Zn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Zn(e,n){return this.tr(e,(r,i)=>n(i))}addReference(e,n,r){return iw(e,r)}removeReference(e,n,r){return iw(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return iw(e,n)}nr(e,n){return function(i,s){let o=!1;return sH(i).Y(a=>iH(i,a,s).next(u=>(u&&(o=!0),G.resolve(!u)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(o,a)=>{if(a<=n){const u=this.nr(e,o).next(d=>{if(!d)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ze.min()),Ku(e).delete([0,ni(o.path)])))});i.push(u)}}).next(()=>G.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return iw(e,n)}tr(e,n){const r=Ku(e);let i,s=fs.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:u,sequenceNumber:d})=>{0===o?(s!==fs.oe&&n(new be(Uo(i)),s),s=d,i=u):s=fs.oe}).next(()=>{s!==fs.oe&&n(new be(Uo(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iw(t,e){return Ku(t).put((i=t.currentSequenceNumber,{targetId:0,path:ni(e.path),sequenceNumber:i}));var i}class lH{constructor(){this.changes=new Na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return void 0!==r?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Joe{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ml(e).put(r)}removeEntry(e,n,r){return Ml(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ZI(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.rr(e,r)))}getEntry(e,n){let r=vn.newInvalidDocument(n);return Ml(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ym(n))},(i,s)=>{r=this.ir(n,s)}).next(()=>r)}sr(e,n){let r={size:0,document:vn.newInvalidDocument(n)};return Ml(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ym(n))},(i,s)=>{r={document:this.ir(n,s),size:nw(s)}}).next(()=>r)}getEntries(e,n){let r=qi();return this._r(e,n,(i,s)=>{const o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,n){let r=qi(),i=new mn(be.comparator);return this._r(e,n,(s,o)=>{const a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,nw(o))}).next(()=>({documents:r,ur:i}))}_r(e,n,r){if(n.isEmpty())return G.resolve();let i=new tn(pH);n.forEach(u=>i=i.add(u));const s=IDBKeyRange.bound(Ym(i.first()),Ym(i.last())),o=i.getIterator();let a=o.getNext();return Ml(e).J({index:"documentKeyIndex",range:s},(u,d,f)=>{const m=be.fromSegments([...d.prefixPath,d.collectionGroup,d.documentId]);for(;a&&pH(a,m)<0;)r(a,null),a=o.getNext();a&&a.isEqual(m)&&(r(a,d),a=o.hasNext()?o.getNext():null),a?f.$(Ym(a)):f.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),ZI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ml(e).U(IDBKeyRange.bound(a,u,!0)).next(d=>{s?.incrementDocumentReadCount(d.length);let f=qi();for(const m of d){const y=this.ir(be.fromSegments(m.prefixPath.concat(m.collectionGroup,m.documentId)),m);y.isFoundDocument()&&(Fm(n,y)||i.has(y.key))&&(f=f.insert(y.key,y))}return f})}getAllFromCollectionGroup(e,n,r,i){let s=qi();const o=fH(n,r),a=fH(n,hs.max());return Ml(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(u,d,f)=>{const m=this.ir(be.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);s=s.insert(m.key,m),s.size===i&&f.done()}).next(()=>s)}newChangeBuffer(e){return new Zoe(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hH(e).get("remoteDocumentGlobalKey").next(n=>(je(!!n),n))}rr(e,n){return hH(e).put("remoteDocumentGlobalKey",n)}ir(e,n){if(n){const r=function Loe(t,e){let n;if(e.document)n=O$(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=be.fromSegments(e.noDocument.path),i=bl(e.noDocument.readTime);n=vn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Oe();{const r=be.fromSegments(e.unknownDocument.path),i=bl(e.unknownDocument.version);n=vn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new xn(i[0],i[1]);return ze.fromTimestamp(s)}(e.readTime)),n}(this.serializer,n);if(!r.isNoDocument()||!r.version.isEqual(ze.min()))return r}return vn.newInvalidDocument(e)}}function dH(t){return new Joe(t)}class Zoe extends lH{constructor(e,n){super(),this.cr=e,this.trackRemovals=n,this.lr=new Na(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new tn((s,o)=>st(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.lr.get(s);if(n.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const u=$$(this.cr.serializer,o);i=i.add(s.path.popLast());const d=nw(u);r+=d-a.size,n.push(this.cr.addEntry(e,s,u))}else if(r-=a.size,this.trackRemovals){const u=$$(this.cr.serializer,o.convertToNoDocument(ze.min()));n.push(this.cr.addEntry(e,s,u))}}),i.forEach(s=>{n.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.cr.updateMetadata(e,r)),G.waitFor(n)}getFromCache(e,n){return this.cr.sr(e,n).next(r=>(this.lr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.cr.ar(e,n).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function hH(t){return Tr(t,"remoteDocumentGlobal")}function Ml(t){return Tr(t,"remoteDocumentsV14")}function Ym(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fH(t,e){const n=e.documentKey.path.toArray();return[t,ZI(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pH(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=st(n[s],r[s]),i)return i;return i=st(n.length,r.length),i||(i=st(n[n.length-2],r[r.length-2]),i||st(n[n.length-1],r[r.length-1]))}class Xoe{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class gH{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(null!==r&&Bm(r.mutation,i,Gi.empty(),xn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ft()){const i=jo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Lm();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=qi();const o=Vm(),a=Vm();return n.forEach((u,d)=>{const f=r.get(d.key);i.has(d.key)&&(void 0===f||f.mutation instanceof Ma)?s=s.insert(d.key,d):void 0!==f?(o.set(d.key,f.mutation.getFieldMask()),Bm(f.mutation,d,f.mutation.getFieldMask(),xn.now())):o.set(d.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var m;return a.set(d,new Xoe(f,null!==(m=o.get(d))&&void 0!==m?m:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Vm();let i=new mn((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const d=n.get(u);if(null===d)return;let f=r.get(u)||Gi.empty();f=a.applyToLocalView(d,f),r.set(u,f);const m=(i.get(a.batchId)||ft()).add(u);i=i.insert(a.batchId,m)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),d=u.key,f=u.value,m=i$();f.forEach(y=>{if(!s.has(y)){const E=h$(n.get(y),r.get(y));null!==E&&m.set(y,E),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return be.isDocumentKey((o=n).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):h0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i);var o}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(jo());let a=-1,u=s;return o.next(d=>G.forEach(d,(f,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),s.get(f)?G.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{u=u.insert(f,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ft())).next(f=>({batchId:a,changes:r$(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new be(n)).next(r=>{let i=Lm();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Lm();return this.indexManager.getCollectionParents(e,s).next(a=>G.forEach(a,u=>{const d=(m=n,y=u.child(s),new Pa(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt));var m,y;return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(f=>{f.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const f=d.getKey();null===o.get(f)&&(o=o.insert(f,vn.newInvalidDocument(f)))});let a=Lm();return o.forEach((u,d)=>{const f=s.get(u);void 0!==f&&Bm(f.mutation,d,Gi.empty(),xn.now()),Fm(n,d)&&(a=a.insert(u,d))}),a})}}class eae{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return G.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,{id:(i=n).id,version:i.version,createTime:or(i.createTime)}),G.resolve();var i}getNamedQuery(e,n){return G.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,{name:(i=n).name,query:D0(i.bundledQuery),readTime:or(i.readTime)}),G.resolve();var i}}class tae{constructor(){this.overlays=new mn(be.comparator),this.Ir=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jo();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=jo(),s=n.length+1,o=new be(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new mn((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=s.get(d.largestBatchId);null===f&&(f=jo(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const a=jo(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>a.set(d,f)),!(a.size()>=i)););return G.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new v0(n,r));let s=this.Ir.get(n);void 0===s&&(s=ft(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}class nae{constructor(){this.sessionToken=qn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}class x0{constructor(){this.Tr=new tn(xr.Er),this.dr=new tn(xr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new xr(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new xr(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new be(new At([])),r=new xr(n,e),i=new xr(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new be(new At([])),r=new xr(n,e),i=new xr(n,e+1);let s=ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xr(e,0),r=this.Tr.firstAfterOrEqual(n);return null!==r&&e.isEqual(r.key)}}class xr{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return be.comparator(e.key,n.key)||st(e.wr,n.wr)}static Ar(e,n){return st(e.wr,n.wr)||be.comparator(e.key,n.key)}}class rae{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tn(xr.Er)}checkEmpty(e){return G.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++;const o=new _0(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new xr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=this.vr(n+1),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(0===this.mutationQueue.length?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xr(n,0),i=new xr(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tn(st);return n.forEach(i=>{const s=new xr(i,0),o=new xr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),G.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;be.isDocumentKey(s)||(s=s.child(""));const o=new xr(new be(s),0);let a=new tn(st);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(a=a.add(u.wr)),!0)},o),G.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);null!==i&&n.push(i)}),n}removeMutationBatch(e,n){je(0===this.Fr(n.batchId,"removed")),this.mutationQueue.shift();let r=this.br;return G.forEach(n.mutations,i=>{const s=new xr(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new xr(n,0),i=this.br.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return G.resolve()}Fr(e,n){return this.vr(e)}vr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class iae{constructor(e){this.Mr=e,this.docs=new mn(be.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():vn.newInvalidDocument(n))}getEntries(e,n){let r=qi();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vn.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=qi();const o=n.path,a=new be(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||e0(hj(f),r)<=0||(i.has(f.key)||Fm(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Oe()}Or(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sae(this)}getSize(e){return G.resolve(this.size)}}class sae extends lH{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}class oae{constructor(e){this.persistence=e,this.Nr=new Na(n=>Tl(n),Om),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.Lr=0,this.Br=new x0,this.targetCount=0,this.kr=Nl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),G.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Nl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Kn(n),G.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&null===r.get(a.targetId)&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this.Br.containsKey(n))}}class O0{constructor(e,n){this.qr={},this.overlays={},this.Qr=new fs(0),this.Kr=!1,this.Kr=!0,this.$r=new nae,this.referenceDelegate=e(this),this.Ur=new oae(this),this.indexManager=new Goe,this.remoteDocumentCache=new iae(r=>this.referenceDelegate.Wr(r)),this.serializer=new j$(n),this.Gr=new eae(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new tae,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new rae(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ge("MemoryPersistence","Starting transaction:",e);const i=new aae(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return G.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class aae extends pj{constructor(e){super(),this.currentSequenceNumber=e}}class sw{constructor(e){this.persistence=e,this.Jr=new x0,this.Yr=null}static Zr(e){return new sw(e)}get Xr(){if(this.Yr)return this.Yr;throw Oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),G.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,r=>{const i=be.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ze.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return G.or([()=>G.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}class uae{constructor(e){this.serializer=e}O(e,n,r,i){const s=new OI("createOrUpgrade",n);var u;r<1&&i>=1&&(e.createObjectStore("owner"),(u=e).createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vj,{unique:!0}),u.createObjectStore("documentMutations"),mH(e),function(u){u.createObjectStore("remoteDocuments")}(e));let o=G.resolve();return r<3&&i>=3&&(0!==r&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),mH(e)),o=o.next(()=>function(u){const d=u.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ze.min().toTimestamp(),targetCount:0};return d.put("targetGlobalKey",f)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(u,d){return d.store("mutations").U().next(f=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",vj,{unique:!0});const m=d.store("mutations"),y=f.map(E=>m.put(E));return G.waitFor(y)})}(e,s))),o=o.next(()=>{!function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(u){const d=u.createObjectStore("documentOverlays",{keyPath:Gse});d.createIndex("collectionPathOverlayIndex",qse,{unique:!1}),d.createIndex("collectionGroupOverlayIndex",Wse,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(u){const d=u.createObjectStore("remoteDocumentsV14",{keyPath:Ose});d.createIndex("documentKeyIndex",kse),d.createIndex("collectionGroupIndex",Fse)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:jse}).createIndex("sequenceNumberIndex",$se,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Hse}).createIndex("documentKeyIndex",zse,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{!function(u){u.createObjectStore("globals",{keyPath:"name"})}(e)})),o}ri(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=nw(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>G.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>G.forEach(a,u=>{je(u.userId===s.userId);const d=Sl(this.serializer,u);return rH(e,s.userId,d).next(()=>{})}))}))}ii(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const u=new At(o),d=[0,ni(u)];s.push(n.get(d).next(f=>f?G.resolve():n.put({targetId:0,path:ni(u),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>G.waitFor(s))})}si(e,n){e.createObjectStore("collectionParents",{keyPath:Bse});const r=n.store("collectionParents"),i=new M0,s=o=>{if(i.add(o)){const a=o.lastSegment(),u=o.popLast();return r.put({collectionId:a,parent:ni(u)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const u=new At(o);return s(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,u],d)=>{const f=Uo(a);return s(f.popLast())}))}oi(e){const n=e.store("targets");return n.J((r,i)=>{const s=qm(i),o=H$(this.serializer,s);return n.put(o)})}_i(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),u=(m=o,m.document?new be(At.fromString(m.document.name).popFirst(5)):m.noDocument?be.fromSegments(m.noDocument.path):m.unknownDocument?be.fromSegments(m.unknownDocument.path):Oe()).path.toArray(),d={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var m;i.push(a.put(d))}).next(()=>G.waitFor(i))}ai(e,n){const r=n.store("mutations"),i=dH(this.serializer),s=new O0(sw.Zr,this.serializer.ct);return r.U().next(o=>{const a=new Map;return o.forEach(u=>{var d;let f=null!==(d=a.get(u.userId))&&void 0!==d?d:ft();Sl(this.serializer,u).keys().forEach(m=>f=f.add(m)),a.set(u.userId,f)}),G.forEach(a,(u,d)=>{const f=new Mr(d),m=XI.lt(this.serializer,f),y=s.getIndexManager(f),E=rw.lt(f,this.serializer,y,s.referenceDelegate);return new gH(i,E,m,y).recalculateAndSaveOverlaysForDocumentKeys(new s0(n,fs.oe),u).next()})})}}function mH(t){t.createObjectStore("targetDocuments",{keyPath:Vse}).createIndex("documentTargetsIndex",Use,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lse,{unique:!0}),t.createObjectStore("targetGlobal")}const k0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class F0{constructor(e,n,r,i,s,o,a,u,d,f,m=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=d,this.li=f,this.hi=m,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=y=>Promise.resolve(),!F0.D())throw new fe(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yoe(this,i),this.Ai=n+"main",this.serializer=new j$(u),this.Ri=new Vo(this.Ai,this.hi,new uae(this.serializer)),this.$r=new Uoe,this.Ur=new Woe(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dH(this.serializer),this.Gr=new Voe,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,!1===f&&sr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new fe(K.FAILED_PRECONDITION,k0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fs(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){var n=this;return this.di=function(){var r=(0,re.A)(function*(i){if(n.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(function(){var n=(0,re.A)(function*(r){null===r.newVersion&&(yield e())});return function(r){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget((0,re.A)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>aw(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(n=>{n||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(n=>this.isPrimary&&!n?this.bi(e).next(()=>!1):!!n&&this.Di(e).next(()=>!0))).catch(e=>{if(Vu(e))return ge("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ge("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Jm(e).get("owner").next(n=>G.resolve(this.vi(n)))}Ci(e){return aw(e).delete(this.clientId)}Fi(){var e=this;return(0,re.A)(function*(){if(e.isPrimary&&!e.Mi(e.Ei,18e5)){e.Ei=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Tr(r,"clientMetadata");return i.U().next(s=>{const o=e.xi(s,18e5),a=s.filter(u=>-1===o.indexOf(u));return G.forEach(a,u=>i.delete(u.clientId)).next(()=>a)})}).catch(()=>[]);if(e.Vi)for(const r of n)e.Vi.removeItem(e.Oi(r.clientId))}})()}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?G.resolve(!0):Jm(e).get("owner").next(n=>{if(null!==n&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)){if(this.vi(n)&&this.networkEnabled)return!0;if(!this.vi(n)){if(!n.allowTabSynchronization)throw new fe(K.FAILED_PRECONDITION,k0);return!1}}return!(!this.networkEnabled||!this.inForeground)||aw(e).U().next(r=>void 0===this.xi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(n=>(this.isPrimary!==n&&ge("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,re.A)(function*(){e.Kr=!1,e.Li(),e.Ti&&(e.Ti.cancel(),e.Ti=null),e.Bi(),e.ki(),yield e.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const r=new s0(n,fs.oe);return e.bi(r).next(()=>e.Ci(r))}),e.Ri.close(),e.qi()})()}xi(e,n){return e.filter(r=>this.Mi(r.updateTimeMs,n)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>aw(e).U().next(n=>this.xi(n,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,n){return rw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qoe(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return XI.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,n,r){ge("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===n?"readonly":"readwrite",s=17===(u=this.hi)?Yse:16===u?Qse:15===u?r0:14===u?Tj:13===u?wj:12===u?Kse:11===u?Ij:void Oe();var u;let o;return this.Ri.runTransaction(e,i,s,a=>(o=new s0(a,this.Qr?this.Qr.next():fs.oe),"readwrite-primary"===n?this.wi(o).next(u=>!!u||this.Si(o)).next(u=>{if(!u)throw sr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new fe(K.FAILED_PRECONDITION,fj);return r(o)}).next(u=>this.Di(o).next(()=>u)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Jm(e).get("owner").next(n=>{if(null!==n&&this.Mi(n.leaseTimestampMs,5e3)&&!this.Ni(n.ownerId)&&!this.vi(n)&&!(this.li||this.allowTabSynchronization&&n.allowTabSynchronization))throw new fe(K.FAILED_PRECONDITION,k0)})}Di(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jm(e).put("owner",n)}static D(){return Vo.D()}bi(e){const n=Jm(e);return n.get("owner").next(r=>this.vi(r)?(ge("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):G.resolve())}Mi(e,n){const r=Date.now();return!(e<r-n||e>r&&(sr(`Detected an update time that is in the future: ${e} > ${r}`),1))}fi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground="visible"===this.document.visibilityState)}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Pi=()=>{this.Li();const n=/(?:Version|Mobile)\/1[456]/;(0,_t.nr)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var n;try{const r=null!==(null===(n=this.Vi)||void 0===n?void 0:n.getItem(this.Oi(e)));return ge("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return sr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){sr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jm(t){return Tr(t,"owner")}function aw(t){return Tr(t,"clientMetadata")}function L0(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class V0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ft(),i=ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new V0(e,n.fromCache,r,i)}}class cae{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _H{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(0,_t.nr)()?8:gj((0,_t.ZQ)())>0?6:4}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new cae;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Wh()<=Lo.$b.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",nf(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Wh()<=Lo.$b.DEBUG&&ge("QueryEngine","Query:",nf(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wh()<=Lo.$b.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",nf(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ri(n))):G.resolve())}Yi(e,n){if(Yj(n))return G.resolve(null);let r=ri(n);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==n.limit&&1===i&&(n=GI(n,null,"F"),r=ri(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ft(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,a);return this.ns(n,d,o,u.readTime)?this.Yi(e,GI(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,i){return Yj(n)||i.isEqual(ze.min())?G.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?G.resolve(null):(Wh()<=Lo.$b.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nf(n)),this.rs(e,o,n,dj(i,-1)).next(a=>a))})}ts(e,n){let r=new tn(t$(e));return n.forEach((i,s)=>{Fm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(null===e.limit)return!1;if(r.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Wh()<=Lo.$b.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",nf(n)),this.Ji.getDocumentsMatchingQuery(e,n,hs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class lae{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new mn(st),this._s=new Na(s=>Tl(s),Om),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gH(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yH(t,e,n,r){return new lae(t,e,n,r)}function vH(t,e){return U0.apply(this,arguments)}function U0(){return(U0=(0,re.A)(function*(t,e){const n=we(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=ft();for(const d of i){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:a}))})})})).apply(this,arguments)}function EH(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IH(t,e,n){let r=ft(),i=ft();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=qi();return n.forEach((a,u)=>{const d=s.get(a);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ze.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||0===u.version.compareTo(d.version)&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):ge("LocalStore","Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function fae(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gf(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new xa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function mf(t,e,n){return B0.apply(this,arguments)}function B0(){return(B0=(0,re.A)(function*(t,e,n){const r=we(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Vu(o))throw o;ge("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})).apply(this,arguments)}function uw(t,e,n){const r=we(t);let i=ze.min(),s=ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const m=we(u),y=m._s.get(f);return void 0!==y?G.resolve(m.os.get(y)):m.Ur.getTargetData(d,f)}(r,o,ri(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ze.min(),n?s:ft())).next(a=>(CH(r,e$(e),a),{documents:a,Ts:s})))}function wH(t,e){const n=we(t),r=we(n.Ur),i=n.os.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function TH(t,e){const n=we(t),r=n.us.get(e)||ze.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.cs.getAllFromCollectionGroup(i,e,dj(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CH(n,e,i),i))}function CH(t,e,n){let r=t.us.get(e)||ze.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}function j0(){return(j0=(0,re.A)(function*(t,e,n,r){const i=we(t);let s=ft(),o=qi();for(const d of n){const f=e.Es(d.metadata.name);d.document&&(s=s.add(f));const m=e.ds(d);m.setReadTime(e.As(d.metadata.readTime)),o=o.insert(f,m)}const a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield gf(i,(f=r,ri(ef(At.fromString(`__bundle__/docs/${f}`)))));var f;return i.persistence.runTransaction("Apply bundle documents","readwrite",d=>IH(d,a,o).next(f=>(a.apply(d),f)).next(f=>i.Ur.removeMatchingKeysForTargetId(d,u.targetId).next(()=>i.Ur.addMatchingKeys(d,s,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(d,f.Ps,f.Is)).next(()=>f.Ps)))})).apply(this,arguments)}function gae(t,e){return $0.apply(this,arguments)}function $0(){return($0=(0,re.A)(function*(t,e,n=ft()){const r=yield gf(t,ri(D0(e.bundledQuery))),i=we(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=or(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Gr.saveNamedQuery(s,e);const a=r.withResumeToken(qn.EMPTY_BYTE_STRING,o);return i.os=i.os.insert(a.targetId,a),i.Ur.updateTargetData(s,a).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,n,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})})).apply(this,arguments)}function AH(t,e){return`firestore_clients_${t}_${e}`}function DH(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function H0(t,e){return`firestore_targets_${t}_${e}`}class cw{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Rs(e,n,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new fe(i.error.code,i.error.message))),o?new cw(e,n,i.state,s):(sr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Zm{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Rs(e,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new fe(r.error.code,r.error.message))),s?new Zm(e,r.state,i):(sr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lw{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Rs(e,n){const r=JSON.parse(n);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=p0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=_j(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new lw(e,s):(sr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class z0{constructor(e,n){this.clientId=e,this.onlineState=n}static Rs(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new z0(n.clientId,n.onlineState):(sr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class G0{constructor(){this.activeTargetIds=p0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q0{constructor(e,n,r,i,s){this.window=e,this.ui=n,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new mn(st),this.started=!1,this.bs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=AH(this.persistenceKey,this.ps),this.vs=`firestore_sequence_number_${this.persistenceKey}`,this.Ss=this.Ss.insert(this.ps,new G0),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=`firestore_online_state_${this.persistenceKey}`,this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,re.A)(function*(){const n=yield e.syncEngine.Qi();for(const i of n){if(i===e.ps)continue;const s=e.getItem(AH(e.persistenceKey,i));if(s){const o=lw.Rs(i,s);o&&(e.Ss=e.Ss.insert(o.clientId,o))}}e.Ns();const r=e.storage.getItem(e.xs);if(r){const i=e.Ls(r);i&&e.Bs(i)}for(const i of e.bs)e.ws(i);e.bs=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let n=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,n,r){this.qs(e,n,r),this.Qs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(H0(this.persistenceKey,e));if(r){const i=Zm.Rs(e,r);i&&(n=i.state)}}return this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(H0(this.persistenceKey,e))}updateQueryState(e,n,r){this.$s(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return ge("SharedClientState","READ",e,n),n}setItem(e,n){ge("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){ge("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){var n=this;const r=e;if(r.storageArea===this.storage){if(ge("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ds)return void sr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable((0,re.A)(function*(){if(n.started){if(null!==r.key)if(n.Cs.test(r.key)){if(null==r.newValue){const i=n.Gs(r.key);return n.zs(i,null)}{const i=n.js(r.key,r.newValue);if(i)return n.zs(i.clientId,i)}}else if(n.Fs.test(r.key)){if(null!==r.newValue){const i=n.Hs(r.key,r.newValue);if(i)return n.Js(i)}}else if(n.Ms.test(r.key)){if(null!==r.newValue){const i=n.Ys(r.key,r.newValue);if(i)return n.Zs(i)}}else if(r.key===n.xs){if(null!==r.newValue){const i=n.Ls(r.newValue);if(i)return n.Bs(i)}}else if(r.key===n.vs){const i=function(o){let a=fs.oe;if(null!=o)try{const u=JSON.parse(o);je("number"==typeof u),a=u}catch(u){sr("SharedClientState","Failed to read sequence number from WebStorage",u)}return a}(r.newValue);i!==fs.oe&&n.sequenceNumberHandler(i)}else if(r.key===n.Os){const i=n.Xs(r.newValue);yield Promise.all(i.map(s=>n.syncEngine.eo(s)))}}else n.bs.push(r)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,n,r){const i=new cw(this.currentUser,e,n,r),s=DH(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const n=DH(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Us(e){this.storage.setItem(this.xs,JSON.stringify({clientId:this.ps,onlineState:e}))}$s(e,n,r){const i=H0(this.persistenceKey,e),s=new Zm(e,n,r);this.setItem(i,s.Vs())}Ws(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Os,n)}Gs(e){const n=this.Cs.exec(e);return n?n[1]:null}js(e,n){const r=this.Gs(e);return lw.Rs(r,n)}Hs(e,n){const r=this.Fs.exec(e),i=Number(r[1]);return cw.Rs(new Mr(void 0!==r[2]?r[2]:null),i,n)}Ys(e,n){const r=this.Ms.exec(e),i=Number(r[1]);return Zm.Rs(i,n)}Ls(e){return z0.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){var n=this;return(0,re.A)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.no(e.batchId,e.state,e.error);ge("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,n){const r=n?this.Ss.insert(e,n):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(u=>{i.has(u)||o.push(u)}),i.forEach(u=>{s.has(u)||a.push(u)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let n=p0();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bH{constructor(){this.so=new G0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new G0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class mae{_o(e){}shutdown(){}}class SH{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ge("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ge("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dw=null;function W0(){return null===dw?dw=268435456+Math.round(2147483648*Math.random()):dw++,"0x"+dw.toString(16)}const _ae={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yae{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const si="WebChannelConnection";class vae extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=W0(),u=this.xo(n,r.toUriEncodedString());ge("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,s,o),this.No(n,u,d,i).then(f=>(ge("RestConnection",`Received RPC '${n}' ${a}: `,f),f),f=>{throw zi("RestConnection",`RPC '${n}' ${a} failed with error: `,f,"url: ",u,"request:",i),f})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]="gl-js/ fire/"+qh,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){return`${this.Do}/v1/${r}:${_ae[n]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=W0();return new Promise((o,a)=>{const u=new ej;u.setWithCredentials(!0),u.listenOnce(nj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xI.NO_ERROR:const f=u.getResponseJson();ge(si,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case xI.TIMEOUT:ge(si,`RPC '${e}' ${s} timed out`),a(new fe(K.DEADLINE_EXCEEDED,"Request time out"));break;case xI.HTTP_ERROR:const m=u.getStatus();if(ge(si,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const E=y?.error;if(E&&E.status&&E.message){const T=function(D){const F=D.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(F)>=0?F:K.UNKNOWN}(E.status);a(new fe(T,E.message))}else a(new fe(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new fe(K.UNAVAILABLE,"Connection failed."));break;default:Oe()}}finally{ge(si,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ge(si,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const i=W0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=sj(),a=ij(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;void 0!==d&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.xmlHttpFactory=new tj({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=s.join("");ge(si,`Creating RPC '${e}' stream ${i}: ${f}`,u);const m=o.createWebChannel(f,u);let y=!1,E=!1;const T=new yae({Io:D=>{E?ge(si,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(y||(ge(si,`Opening RPC '${e}' stream ${i} transport.`),m.open(),y=!0),ge(si,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},To:()=>m.close()}),A=(D,F,x)=>{D.listen(F,V=>{try{x(V)}catch(ee){setTimeout(()=>{throw ee},0)}})};return A(m,Cm.EventType.OPEN,()=>{E||(ge(si,`RPC '${e}' stream ${i} transport opened.`),T.yo())}),A(m,Cm.EventType.CLOSE,()=>{E||(E=!0,ge(si,`RPC '${e}' stream ${i} transport closed`),T.So())}),A(m,Cm.EventType.ERROR,D=>{E||(E=!0,zi(si,`RPC '${e}' stream ${i} transport errored:`,D),T.So(new fe(K.UNAVAILABLE,"The operation could not be completed")))}),A(m,Cm.EventType.MESSAGE,D=>{var F;if(!E){const x=D.data[0];je(!!x);const ee=x.error||(null===(F=x[0])||void 0===F?void 0:F.error);if(ee){ge(si,`RPC '${e}' stream ${i} received error:`,ee);const ve=ee.status;let Te=function(M){const U=hr[M];if(void 0!==U)return v$(U)}(ve),k=ee.message;void 0===Te&&(Te=K.INTERNAL,k="Unknown error status: "+ve+" with message "+ee.message),E=!0,T.So(new fe(Te,k)),m.close()}else ge(si,`RPC '${e}' stream ${i} received:`,x),T.bo(x)}}),A(a,rj.STAT_EVENT,D=>{D.stat===JS.PROXY?ge(si,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===JS.NOPROXY&&ge(si,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function RH(){return typeof window<"u"?window:null}function hw(){return typeof document<"u"?document:null}function Xm(t){return new boe(t,!0)}class K0{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ge("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){null!==this.$o&&(this.$o.skipDelay(),this.$o=null)}cancel(){null!==this.$o&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class PH{constructor(e,n,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new K0(e,n)}n_(){return 1===this.state||5===this.state||this.r_()}r_(){return 2===this.state||3===this.state}start(){this.e_=0,4!==this.state?this.auth():this.i_()}stop(){var e=this;return(0,re.A)(function*(){e.n_()&&(yield e.close(0))})()}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&null===this.Zo&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){var e=this;return(0,re.A)(function*(){if(e.r_())return e.close(0)})()}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){var r=this;return(0,re.A)(function*(){r.u_(),r.c_(),r.t_.cancel(),r.Yo++,4!==e?r.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(sr(n.toString()),sr("Using maximum backoff delay to prevent overloading the backend."),r.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.l_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.mo(n)})()}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new fe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>1==++this.e_?this.E_(i):this.onNext(i))})}i_(){var e=this;this.state=5,this.t_.Go((0,re.A)(function*(){e.state=0,e.start()}))}I_(e){return ge("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ge("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Eae extends PH{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=function Poe(t,e){let n;if("targetChange"in e){const r="NO_CHANGE"===(d=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===d?1:"REMOVE"===d?2:"CURRENT"===d?3:"RESET"===d?4:Oe(),i=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(je(void 0===f||"string"==typeof f),qn.fromBase64String(f||"")):(je(void 0===f||f instanceof Buffer||f instanceof Uint8Array),qn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const f=void 0===d.code?K.UNKNOWN:v$(d.code);return new fe(f,d.message||"")}(o);n=new C$(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=$o(t,r.document.name),s=or(r.document.updateTime),o=r.document.createTime?or(r.document.createTime):ze.min(),a=new Hr({mapValue:{fields:r.document.fields}}),u=vn.newFoundDocument(i,s,o,a);n=new YI(r.targetIds||[],r.removedTargetIds||[],u.key,u)}else if("documentDelete"in e){const r=e.documentDelete,i=$o(t,r.document),s=r.readTime?or(r.readTime):ze.min(),o=vn.newNoDocument(i,s);n=new YI([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=$o(t,r.document);n=new YI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Oe();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Ioe(i,s);n=new T$(r.targetId,o)}}var d;return n}(this.serializer,e),r=function(s){if(!("targetChange"in s))return ze.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ze.min():o.readTime?or(o.readTime):ze.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=C0(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=HI(u)?{documents:k$(s,u)}:{query:JI(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=S$(s,o.resumeToken);const d=I0(s,o.expectedCount);null!==d&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(ze.min())>0){a.readTime=cf(s,o.snapshotVersion.toTimestamp());const d=I0(s,o.expectedCount);null!==d&&(a.expectedCount=d)}return a}(this.serializer,e);const r=function Moe(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=C0(this.serializer),n.removeTarget=e,this.a_(n)}}class Iae extends PH{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||0===e.writeResults.length),this.listener.f_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=function Noe(t,e){return t&&t.length>0?(je(void 0!==e),t.map(n=>function(i,s){let o=or(i.updateTime?i.updateTime:s);return o.isEqual(ze.min())&&(o=or(s)),new yoe(o,i.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),r=or(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=C0(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gm(this.serializer,r))};this.a_(n)}}class wae extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,T0(n,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new fe(K.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,T0(n,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new fe(K.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Tae{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){0===this.S_&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){"Online"===this.state?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,"Online"===e&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sr(n),this.D_=!1):ge("OnlineStateTracker",n)}x_(){null!==this.b_&&(this.b_.cancel(),this.b_=null)}}class Cae{constructor(e,n,r,i,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget((0,re.A)(function*(){var u;Qu(o)&&(ge("RemoteStore","Restarting streams for network reachability change."),yield(u=(0,re.A)(function*(f){const m=we(f);m.L_.add(4),yield _f(m),m.q_.set("Unknown"),m.L_.delete(4),yield e_(m)}),function d(f){return u.apply(this,arguments)})(o))}))}),this.q_=new Tae(r,i)}}function e_(t){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,re.A)(function*(t){if(Qu(t))for(const e of t.B_)yield e(!0)})).apply(this,arguments)}function _f(t){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,re.A)(function*(t){for(const e of t.B_)yield e(!1)})).apply(this,arguments)}function fw(t,e){const n=we(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),X0(n)?Z0(n):Ef(n).r_()&&J0(n,e))}function yf(t,e){const n=we(t),r=Ef(n);n.N_.delete(e),r.r_()&&NH(n,e),0===n.N_.size&&(r.r_()?r.o_():Qu(n)&&n.q_.set("Unknown"))}function J0(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ef(t).A_(e)}function NH(t,e){t.Q_.xe(e),Ef(t).R_(e)}function Z0(t){t.Q_=new Toe({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ef(t).start(),t.q_.v_()}function X0(t){return Qu(t)&&!Ef(t).n_()&&t.N_.size>0}function Qu(t){return 0===we(t).L_.size}function MH(t){t.Q_=void 0}function Aae(t){return eR.apply(this,arguments)}function eR(){return(eR=(0,re.A)(function*(t){t.q_.set("Online")})).apply(this,arguments)}function Dae(t){return tR.apply(this,arguments)}function tR(){return(tR=(0,re.A)(function*(t){t.N_.forEach((e,n)=>{J0(t,e)})})).apply(this,arguments)}function bae(t,e){return nR.apply(this,arguments)}function nR(){return(nR=(0,re.A)(function*(t,e){MH(t),X0(t)?(t.q_.M_(e),Z0(t)):t.q_.set("Unknown")})).apply(this,arguments)}function Sae(t,e,n){return rR.apply(this,arguments)}function rR(){return rR=(0,re.A)(function*(t,e,n){if(t.q_.set("Online"),e instanceof C$&&2===e.state&&e.cause)try{yield(r=(0,re.A)(function*(s,o){const a=o.cause;for(const u of o.targetIds)s.N_.has(u)&&(yield s.remoteSyncer.rejectListen(u,a),s.N_.delete(u),s.Q_.removeTarget(u))}),function i(s,o){return r.apply(this,arguments)})(t,e)}catch(r){ge("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield pw(t,r)}else if(e instanceof YI?t.Q_.Ke(e):e instanceof T$?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ze.min()))try{const r=yield EH(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.N_.get(d);f&&s.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,d)=>{const f=s.N_.get(u);if(!f)return;s.N_.set(u,f.withResumeToken(qn.EMPTY_BYTE_STRING,f.snapshotVersion)),NH(s,u);const m=new xa(f.target,u,d,f.sequenceNumber);J0(s,m)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){ge("RemoteStore","Failed to raise snapshot:",r),yield pw(t,r)}var r}),rR.apply(this,arguments)}function pw(t,e,n){return iR.apply(this,arguments)}function iR(){return(iR=(0,re.A)(function*(t,e,n){if(!Vu(e))throw e;t.L_.add(1),yield _f(t),t.q_.set("Offline"),n||(n=()=>EH(t.localStore)),t.asyncQueue.enqueueRetryable((0,re.A)(function*(){ge("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield e_(t)}))})).apply(this,arguments)}function xH(t,e){return e().catch(n=>pw(t,n,e))}function vf(t){return sR.apply(this,arguments)}function sR(){return(sR=(0,re.A)(function*(t){const e=we(t),n=Yu(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Rae(e);)try{const i=yield fae(e.localStore,r);if(null===i){0===e.O_.length&&n.o_();break}r=i.batchId,Pae(e,i)}catch(i){yield pw(e,i)}OH(e)&&kH(e)})).apply(this,arguments)}function Rae(t){return Qu(t)&&t.O_.length<10}function Pae(t,e){t.O_.push(e);const n=Yu(t);n.r_()&&n.V_&&n.m_(e.mutations)}function OH(t){return Qu(t)&&!Yu(t).n_()&&t.O_.length>0}function kH(t){Yu(t).start()}function Nae(t){return oR.apply(this,arguments)}function oR(){return(oR=(0,re.A)(function*(t){Yu(t).p_()})).apply(this,arguments)}function Mae(t){return aR.apply(this,arguments)}function aR(){return(aR=(0,re.A)(function*(t){const e=Yu(t);for(const n of t.O_)e.m_(n.mutations)})).apply(this,arguments)}function xae(t,e,n){return uR.apply(this,arguments)}function uR(){return(uR=(0,re.A)(function*(t,e,n){const r=t.O_.shift(),i=y0.from(r,e,n);yield xH(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield vf(t)})).apply(this,arguments)}function Oae(t,e){return cR.apply(this,arguments)}function cR(){return cR=(0,re.A)(function*(t,e){var n;e&&Yu(t).V_&&(yield(n=(0,re.A)(function*(i,s){if(y$(a=s.code)&&a!==K.ABORTED){const o=i.O_.shift();Yu(i).s_(),yield xH(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield vf(i)}var a}),function r(i,s){return n.apply(this,arguments)})(t,e)),OH(t)&&kH(t)}),cR.apply(this,arguments)}function FH(t,e){return lR.apply(this,arguments)}function lR(){return(lR=(0,re.A)(function*(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),ge("RemoteStore","RemoteStore received new credentials");const r=Qu(n);n.L_.add(3),yield _f(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield e_(n)})).apply(this,arguments)}function dR(t,e){return hR.apply(this,arguments)}function hR(){return(hR=(0,re.A)(function*(t,e){const n=we(t);e?(n.L_.delete(2),yield e_(n)):e||(n.L_.add(2),yield _f(n),n.q_.set("Unknown"))})).apply(this,arguments)}function Ef(t){return t.K_||(t.K_=function(n,r,i){const s=we(n);return s.w_(),new Eae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Aae.bind(null,t),Ro:Dae.bind(null,t),mo:bae.bind(null,t),d_:Sae.bind(null,t)}),t.B_.push(function(){var e=(0,re.A)(function*(n){n?(t.K_.s_(),X0(t)?Z0(t):t.q_.set("Unknown")):(yield t.K_.stop(),MH(t))});return function(n){return e.apply(this,arguments)}}())),t.K_}function Yu(t){return t.U_||(t.U_=function(n,r,i){const s=we(n);return s.w_(),new Iae(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Nae.bind(null,t),mo:Oae.bind(null,t),f_:Mae.bind(null,t),g_:xae.bind(null,t)}),t.B_.push(function(){var e=(0,re.A)(function*(n){n?(t.U_.s_(),yield vf(t)):(yield t.U_.stop(),t.O_.length>0&&(ge("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))});return function(n){return e.apply(this,arguments)}}())),t.U_}class fR{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new fR(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new fe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function If(t,e){if(sr("AsyncQueue",`${e}: ${t}`),Vu(t))return new fe(K.UNAVAILABLE,`${e}: ${t}`);throw t}class wf{constructor(e){this.comparator=e?(n,r)=>e(n,r)||be.comparator(n.key,r.key):(n,r)=>be.comparator(n.key,r.key),this.keyedMap=Lm(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new wf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof wf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new wf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class LH{constructor(){this.W_=new mn(be.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?0!==e.type&&3===r.type?this.W_=this.W_.insert(n,e):3===e.type&&1!==r.type?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.W_=this.W_.remove(n):1===e.type&&2===r.type?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Tf{constructor(e,n,r,i,s,o,a,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Tf(e,n,wf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&km(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}class kae{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Fae{constructor(){this.queries=VH(),this.onlineState="Unknown",this.Y_=new Set}terminate(){!function(n,r){const i=we(n),s=i.queries;i.queries=VH(),s.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})}(this,new fe(K.ABORTED,"Firestore shutting down"))}}function VH(){return new Na(t=>Xj(t),km)}function pR(t,e){return gR.apply(this,arguments)}function gR(){return(gR=(0,re.A)(function*(t,e){const n=we(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new kae,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){const a=If(o,`Initialization of query '${nf(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&yR(n)})).apply(this,arguments)}function mR(t,e){return _R.apply(this,arguments)}function _R(){return(_R=(0,re.A)(function*(t,e){const n=we(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),0===s.j_.length?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function Lae(t,e){const n=we(t);let r=!1;for(const i of e){const o=n.queries.get(i.query);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yR(n)}function Vae(t,e,n){const r=we(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function yR(t){t.Y_.forEach(e=>{e.next()})}var vR,UH;(UH=vR||(vR={})).ea="default",UH.Cache="cache";class ER{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Tf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){return!e.fromCache||!this.J_()||(!this.options._a||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}ia(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}oa(e){e=Tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vR.Cache}}class Uae{constructor(e,n){this.aa=e,this.byteLength=n}ua(){return"metadata"in this.aa}}class BH{constructor(e){this.serializer=e}Es(e){return $o(this.serializer,e)}ds(e){return e.metadata.exists?O$(this.serializer,e.document,!1):vn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return or(e)}}class Bae{constructor(e,n,r){this.ca=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=jH(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++n;const r=At.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ha(e){const n=new Map,r=new BH(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||ft()).add(s);n.set(o,a)}}return n}complete(){var e=this;return(0,re.A)(function*(){const n=yield function pae(t,e,n,r){return j0.apply(this,arguments)}(e.localStore,new BH(e.serializer),e.documents,e.ca.id),r=e.ha(e.documents);for(const i of e.queries)yield gae(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Pa:e.collectionGroups,Ia:n}})()}}function jH(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class $H{constructor(e){this.key=e}}class HH{constructor(e){this.key=e}}class zH{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ft(),this.mutatedKeys=ft(),this.Aa=t$(e),this.Ra=new wf(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new LH,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,d="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,m)=>{const y=i.get(f),E=Fm(this.query,m)?m:null,T=!!y&&this.mutatedKeys.has(y.key),A=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;y&&E?y.data.isEqual(E.data)?T!==A&&(r.track({type:3,doc:E}),D=!0):this.ga(y,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.Aa(E,u)>0||d&&this.Aa(E,d)<0)&&(a=!0)):!y&&E?(r.track({type:0,doc:E}),D=!0):y&&!E&&(r.track({type:1,doc:y}),D=!0,(u||d)&&(a=!0)),D&&(E?(o=o.add(E),s=A?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const f="F"===this.query.limitType?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,m)=>function(E,T){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe()}};return A(E)-A(T)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),i=null!=i&&i;const a=n&&!i?this.ya():[],u=0===this.da.size&&this.current&&!i?1:0,d=u!==this.Ea;return this.Ea=u,0!==o.length||d?{snapshot:new Tf(this.query,e.Ra,s,o,e.mutatedKeys,0===u,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new LH,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ft(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new HH(r))}),this.da.forEach(r=>{e.has(r)||n.push(new $H(r))}),n}ba(e){this.Ta=e.Ts,this.da=ft();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Tf.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,0===this.Ea,this.hasCachedResults)}}class jae{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $ae{constructor(e){this.key=e,this.va=!1}}class Hae{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Na(a=>Xj(a),km),this.Ma=new Map,this.xa=new Set,this.Oa=new mn(be.comparator),this.Na=new Map,this.La=new x0,this.Ba={},this.ka=new Map,this.qa=Nl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return!0===this.Qa}}function zae(t,e){return IR.apply(this,arguments)}function IR(){return(IR=(0,re.A)(function*(t,e,n=!0){const r=gw(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield GH(r,e,n,!0),i})).apply(this,arguments)}function Gae(t,e){return wR.apply(this,arguments)}function wR(){return(wR=(0,re.A)(function*(t,e){const n=gw(t);yield GH(n,e,!0,!1)})).apply(this,arguments)}function GH(t,e,n,r){return TR.apply(this,arguments)}function TR(){return(TR=(0,re.A)(function*(t,e,n,r){const i=yield gf(t.localStore,ri(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=yield CR(t,e,s,"current"===o,i.resumeToken)),t.isPrimaryClient&&n&&fw(t.remoteStore,i),a})).apply(this,arguments)}function CR(t,e,n,r,i){return AR.apply(this,arguments)}function AR(){return AR=(0,re.A)(function*(t,e,n,r,i){t.Ka=(m,y,E)=>{return(T=(0,re.A)(function*(D,F,x,V){let ee=F.view.ma(x);ee.ns&&(ee=yield uw(D.localStore,F.query,!1).then(({documents:S})=>F.view.ma(S,ee)));const ve=V&&V.targetChanges.get(F.targetId),Te=V&&null!=V.targetMismatches.get(F.targetId),k=F.view.applyChanges(ee,D.isPrimaryClient,ve,Te);return FR(D,F.targetId,k.wa),k.snapshot}),function A(D,F,x,V){return T.apply(this,arguments)})(t,m,y,E);var T};const s=yield uw(t.localStore,e,!0),o=new zH(e,s.Ts),a=o.ma(s.documents),u=Hm.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState,i),d=o.applyChanges(a,t.isPrimaryClient,u);FR(t,n,d.wa);const f=new jae(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}),AR.apply(this,arguments)}function qae(t,e,n){return DR.apply(this,arguments)}function DR(){return(DR=(0,re.A)(function*(t,e,n){const r=we(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!km(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield mf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&yf(r.remoteStore,i.targetId),Cf(r,i.targetId)}).catch(Lu))):(Cf(r,i.targetId),yield mf(r.localStore,i.targetId,!0))})).apply(this,arguments)}function Wae(t,e){return bR.apply(this,arguments)}function bR(){return(bR=(0,re.A)(function*(t,e){const n=we(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yf(n.remoteStore,r.targetId))})).apply(this,arguments)}function SR(){return(SR=(0,re.A)(function*(t,e,n){const r=WR(t);try{const i=yield function(o,a){const u=we(o),d=xn.now(),f=a.reduce((E,T)=>E.add(T.key),ft());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let T=qi(),A=ft();return u.cs.getEntries(E,f).next(D=>{T=D,T.forEach((F,x)=>{x.isValidDocument()||(A=A.add(F))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,T)).next(D=>{m=D;const F=[];for(const x of a){const V=Eoe(x,m.get(x.key).overlayedDocument);null!=V&&F.push(new Ma(x.key,V,Lj(V.value.mapValue),kn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,d,F,a)}).next(D=>{y=D;const F=D.applyToLocalDocumentSet(m,A);return u.documentOverlayCache.saveOverlays(E,D.batchId,F)})}).then(()=>({batchId:y.batchId,changes:r$(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new mn(st)),d=d.insert(a,u),o.Ba[o.currentUser.toKey()]=d}(r,i.batchId,n),yield Oa(r,i.changes),yield vf(r.remoteStore)}catch(i){const s=If(i,"Failed to persist write");n.reject(s)}})).apply(this,arguments)}function qH(t,e){return RR.apply(this,arguments)}function RR(){return(RR=(0,re.A)(function*(t,e){const n=we(t);try{const r=yield function hae(t,e){const n=we(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((f,m)=>{const y=i.get(m);if(!y)return;a.push(n.Ur.removeMatchingKeys(s,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,f.addedDocuments,m)));let E=y.withSequenceNumber(s.currentSequenceNumber);var A,D,F;null!==e.targetMismatches.get(m)?E=E.withResumeToken(qn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),i=i.insert(m,E),D=E,F=f,(0===(A=y).resumeToken.approximateByteSize()||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8||F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0)&&a.push(n.Ur.updateTargetData(s,E))});let u=qi(),d=ft();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),a.push(IH(s,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ze.min())){const f=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(f)}return G.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.os=i,s))}(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?je(o.va):i.removedDocuments.size>0&&(je(o.va),o.va=!1))}),yield Oa(n,r,e)}catch(r){yield Lu(r)}})).apply(this,arguments)}function WH(t,e,n){const r=we(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=we(o);u.onlineState=a;let d=!1;u.queries.forEach((f,m)=>{for(const y of m.j_)y.Z_(a)&&(d=!0)}),d&&yR(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Qae(t,e,n){return PR.apply(this,arguments)}function PR(){return(PR=(0,re.A)(function*(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new mn(be.comparator);o=o.insert(s,vn.newNoDocument(s,ze.min()));const a=ft().add(s),u=new $m(ze.min(),new Map,new mn(st),o,a);yield qH(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),LR(r)}else yield mf(r.localStore,e,!1).then(()=>Cf(r,e,n)).catch(Lu)})).apply(this,arguments)}function Yae(t,e){return NR.apply(this,arguments)}function NR(){return(NR=(0,re.A)(function*(t,e){const n=we(t),r=e.batch.batchId;try{const i=yield function dae(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,d,f){const m=d.batch,y=m.keys();let E=G.resolve();return y.forEach(T=>{E=E.next(()=>f.getEntry(u,T)).next(A=>{const D=d.docVersions.get(T);je(null!==D),A.version.compareTo(D)<0&&(m.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),E.next(()=>a.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ft();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(u=u.add(a.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}(n.localStore,e);kR(n,r,null),OR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Oa(n,i)}catch(i){yield Lu(i)}})).apply(this,arguments)}function Jae(t,e,n){return MR.apply(this,arguments)}function MR(){return(MR=(0,re.A)(function*(t,e,n){const r=we(t);try{const i=yield function(o,a){const u=we(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,a).next(m=>(je(null!==m),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);kR(r,e,n),OR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Oa(r,i)}catch(i){yield Lu(i)}})).apply(this,arguments)}function xR(){return(xR=(0,re.A)(function*(t,e){const n=we(t);Qu(n.remoteStore)||ge("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=we(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(-1===r)return void e.resolve();const i=n.ka.get(r)||[];i.push(e),n.ka.set(r,i)}catch(r){const i=If(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})).apply(this,arguments)}function OR(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function kR(t,e,n){const r=we(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Cf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||KH(t,r)})}function KH(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);null!==n&&(yf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),LR(t))}function FR(t,e,n){for(const r of n)r instanceof $H?(t.La.addReference(r.key,e),Xae(t,r)):r instanceof HH?(ge("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||KH(t,r.key)):Oe()}function Xae(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ge("SyncEngine","New document in limbo: "+n),t.xa.add(r),LR(t))}function LR(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new be(At.fromString(e)),r=t.qa.next();t.Na.set(r,new $ae(n)),t.Oa=t.Oa.insert(n,r),fw(t.remoteStore,new xa(ri(ef(n.path)),r,"TargetPurposeLimboResolution",fs.oe))}}function Oa(t,e,n){return VR.apply(this,arguments)}function VR(){return VR=(0,re.A)(function*(t,e,n){const r=we(t),i=[],s=[],o=[];var a;r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:null===(f=n?.targetChanges.get(u.targetId))||void 0===f?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=V0.Wi(u.targetId,d);s.push(m)}}))}),yield Promise.all(o),r.Ca.d_(i),yield(a=(0,re.A)(function*(d,f){const m=we(d);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>G.forEach(f,E=>G.forEach(E.$i,T=>m.persistence.referenceDelegate.addReference(y,E.targetId,T)).next(()=>G.forEach(E.Ui,T=>m.persistence.referenceDelegate.removeReference(y,E.targetId,T)))))}catch(y){if(!Vu(y))throw y;ge("LocalStore","Failed to update sequence numbers: "+y)}for(const y of f){const E=y.targetId;if(!y.fromCache){const T=m.os.get(E),D=T.withLastLimboFreeSnapshotVersion(T.snapshotVersion);m.os=m.os.insert(E,D)}}}),function u(d,f){return a.apply(this,arguments)})(r.localStore,s))}),VR.apply(this,arguments)}function eue(t,e){return UR.apply(this,arguments)}function UR(){return(UR=(0,re.A)(function*(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){ge("SyncEngine","User change. New user:",e.toKey());const r=yield vH(n.localStore,e);n.currentUser=e,(s=n).ka.forEach(a=>{a.forEach(u=>{u.reject(new fe(K.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.ka.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Oa(n,r.hs)}var s})).apply(this,arguments)}function tue(t,e){const n=we(t),r=n.Na.get(e);if(r&&r.va)return ft().add(r.key);{let i=ft();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function nue(t,e){return BR.apply(this,arguments)}function BR(){return(BR=(0,re.A)(function*(t,e){const n=we(t),r=yield uw(n.localStore,e.query,!0),i=e.view.ba(r);return n.isPrimaryClient&&FR(n,e.targetId,i.wa),i})).apply(this,arguments)}function rue(t,e){return jR.apply(this,arguments)}function jR(){return(jR=(0,re.A)(function*(t,e){const n=we(t);return TH(n.localStore,e).then(r=>Oa(n,r))})).apply(this,arguments)}function iue(t,e,n,r){return $R.apply(this,arguments)}function $R(){return($R=(0,re.A)(function*(t,e,n,r){const i=we(t),s=yield function(a,u){const d=we(a),f=we(d.mutationQueue);return d.persistence.runTransaction("Lookup mutation documents","readonly",m=>f.Mn(m,u).next(y=>y?d.localDocuments.getDocuments(m,y):G.resolve(null)))}(i.localStore,e);var u;null!==s?("pending"===n?yield vf(i.remoteStore):"acknowledged"===n||"rejected"===n?(kR(i,e,r||null),OR(i,e),u=e,we(we(i.localStore).mutationQueue).On(u)):Oe(),yield Oa(i,s)):ge("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function HR(){return(HR=(0,re.A)(function*(t,e){const n=we(t);if(gw(n),WR(n),!0===e&&!0!==n.Qa){const r=n.sharedClientState.getAllActiveQueryTargets(),i=yield QH(n,r.toArray());n.Qa=!0,yield dR(n.remoteStore,!0);for(const s of i)fw(n.remoteStore,s)}else if(!1===e&&!1!==n.Qa){const r=[];let i=Promise.resolve();n.Ma.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Cf(n,o),mf(n.localStore,o,!0))),yf(n.remoteStore,o)}),yield i,yield QH(n,r),function(o){const a=we(o);a.Na.forEach((u,d)=>{yf(a.remoteStore,d)}),a.La.pr(),a.Na=new Map,a.Oa=new mn(be.comparator)}(n),n.Qa=!1,yield dR(n.remoteStore,!1)}})).apply(this,arguments)}function QH(t,e,n){return zR.apply(this,arguments)}function zR(){return(zR=(0,re.A)(function*(t,e,n){const r=we(t),i=[],s=[];for(const o of e){let a;const u=r.Ma.get(o);if(u&&0!==u.length){a=yield gf(r.localStore,ri(u[0]));for(const d of u){const f=r.Fa.get(d),m=yield nue(r,f);m.snapshot&&s.push(m.snapshot)}}else{const d=yield wH(r.localStore,o);a=yield gf(r.localStore,d),yield CR(r,YH(d),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})).apply(this,arguments)}function YH(t){return Qj(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oue(t){return n=we(t).localStore,we(we(n).persistence).Qi();var n}function aue(t,e,n,r){return GR.apply(this,arguments)}function GR(){return(GR=(0,re.A)(function*(t,e,n,r){const i=we(t);if(i.Qa)return void ge("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=yield TH(i.localStore,e$(s[0])),a=$m.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,qn.EMPTY_BYTE_STRING);yield Oa(i,o,a);break}case"rejected":yield mf(i.localStore,e,!0),Cf(i,e,r);break;default:Oe()}})).apply(this,arguments)}function uue(t,e,n){return qR.apply(this,arguments)}function qR(){return(qR=(0,re.A)(function*(t,e,n){const r=gw(t);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){ge("SyncEngine","Adding an already active target "+i);continue}const s=yield wH(r.localStore,i),o=yield gf(r.localStore,s);yield CR(r,YH(s),o.targetId,!1,o.resumeToken),fw(r.remoteStore,o)}for(const i of n)r.Ma.has(i)&&(yield mf(r.localStore,i,!1).then(()=>{yf(r.remoteStore,i),Cf(r,i)}).catch(Lu))}})).apply(this,arguments)}function gw(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qH.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tue.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Qae.bind(null,e),e.Ca.d_=Lae.bind(null,e.eventManager),e.Ca.$a=Vae.bind(null,e.eventManager),e}function WR(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yae.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jae.bind(null,e),e}class Af{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,re.A)(function*(){n.serializer=Xm(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return yH(this.persistence,new _H,e.initialUser,this.serializer)}createPersistence(e){return new O0(sw.Zr,this.serializer)}createSharedClientState(e){return new bH}terminate(){var e=this;return(0,re.A)(function*(){var n,r;null===(n=e.gcScheduler)||void 0===n||n.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class KR extends Af{constructor(e,n,r){super(),this.Wa=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,r=this;return(0,re.A)(function*(){yield n().call(r,e),yield r.Wa.initialize(r,e),yield WR(r.Wa.syncEngine),yield vf(r.Wa.remoteStore),yield r.persistence.yi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return yH(this.persistence,new _H,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new uH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new Nse(n,this.persistence);return new Pse(e.asyncQueue,r)}createPersistence(e){const n=L0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ii.withCacheSize(this.cacheSizeBytes):ii.DEFAULT;return new F0(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,RH(),hw(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new bH}}class JH extends KR{constructor(e,n){super(e,n,!1),this.Wa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,r=this;return(0,re.A)(function*(){yield n().call(r,e);const i=r.Wa.syncEngine;r.sharedClientState instanceof q0&&(r.sharedClientState.syncEngine={no:iue.bind(null,i),ro:aue.bind(null,i),io:uue.bind(null,i),Qi:oue.bind(null,i),eo:rue.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.yi(function(){var s=(0,re.A)(function*(o){yield function sue(t,e){return HR.apply(this,arguments)}(r.Wa.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const n=RH();if(!q0.D(n))throw new fe(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=L0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new q0(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Df{initialize(e,n){var r=this;return(0,re.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>WH(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=eue.bind(null,r.syncEngine),yield dR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Fae}createDatastore(e){const n=Xm(e.databaseInfo.databaseId),r=new vae(e.databaseInfo);return new wae(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=n=>WH(this.syncEngine,n,0),a=SH.D()?new SH:new mae,new Cae(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,n){return function(i,s,o,a,u,d,f){const m=new Hae(i,s,o,a,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e=this;return(0,re.A)(function*(){var n,r,i;yield(i=(0,re.A)(function*(o){const a=we(o);ge("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield _f(a),a.k_.shutdown(),a.q_.set("Unknown")}),function s(o){return i.apply(this,arguments)})(e.remoteStore),null===(n=e.datastore)||void 0===n||n.terminate(),null===(r=e.eventManager)||void 0===r||r.terminate()})()}}function ZH(t,e=10240){let n=0;return{read:()=>(0,re.A)(function*(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})(),cancel:()=>(0,re.A)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):sr("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class due{constructor(e,n){this.ja=e,this.serializer=n,this.metadata=new wr,this.buffer=new Uint8Array,this.Ha=new TextDecoder("utf-8"),this.Ja().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.ja.cancel()}getMetadata(){var e=this;return(0,re.A)(function*(){return e.metadata.promise})()}Ua(){var e=this;return(0,re.A)(function*(){return yield e.getMetadata(),e.Ja()})()}Ja(){var e=this;return(0,re.A)(function*(){const n=yield e.Ya();if(null===n)return null;const r=e.Ha.decode(n),i=Number(r);isNaN(i)&&e.Za(`length string (${r}) is not valid number`);const s=yield e.Xa(i);return new Uae(JSON.parse(s),n.length+i)})()}eu(){return this.buffer.findIndex(e=>123===e)}Ya(){var e=this;return(0,re.A)(function*(){for(;e.eu()<0&&!(yield e.tu()););if(0===e.buffer.length)return null;const n=e.eu();n<0&&e.Za("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),r})()}Xa(e){var n=this;return(0,re.A)(function*(){for(;n.buffer.length<e;)(yield n.tu())&&n.Za("Reached the end of bundle when more is expected.");const r=n.Ha.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),r})()}Za(e){throw this.ja.cancel(),new Error(`Invalid bundle format: ${e}`)}tu(){var e=this;return(0,re.A)(function*(){const n=yield e.ja.read();if(!n.done){const r=new Uint8Array(e.buffer.length+n.value.length);r.set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r}return n.done})()}}class hue{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,re.A)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw n.lastTransactionError=new fe(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),n.lastTransactionError;const r=yield(i=(0,re.A)(function*(o,a){const u=we(o),d={documents:a.map(E=>zm(u.serializer,E))},f=yield u.Lo("BatchGetDocuments",u.serializer.databaseId,At.emptyPath(),d,a.length),m=new Map;f.forEach(E=>{const T=function Roe(t,e){return"found"in e?function(r,i){je(!!i.found);const s=$o(r,i.found.name),o=or(i.found.updateTime),a=i.found.createTime?or(i.found.createTime):ze.min(),u=new Hr({mapValue:{fields:i.found.fields}});return vn.newFoundDocument(s,o,a,u)}(t,e):"missing"in e?function(r,i){je(!!i.missing),je(!!i.readTime);const s=$o(r,i.missing),o=or(i.readTime);return vn.newNoDocument(s,o)}(t,e):Oe()}(u.serializer,E);m.set(T.key.toString(),T)});const y=[];return a.forEach(E=>{const T=m.get(E.toString());je(!!T),y.push(T)}),y}),function s(o,a){return i.apply(this,arguments)})(n.datastore,e);var i;return r.forEach(i=>n.recordVersion(i)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new uf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,re.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const n=e.readVersions;var r;e.mutations.forEach(r=>{n.delete(r.key.toString())}),n.forEach((r,i)=>{const s=be.fromPath(i);e.mutations.push(new m0(s,e.precondition(s)))}),yield(r=(0,re.A)(function*(s,o){const a=we(s),u={writes:o.map(d=>Gm(a.serializer,d))};yield a.Mo("Commit",a.serializer.databaseId,At.emptyPath(),u)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Oe();n=ze.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new fe(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ze.min())?kn.exists(!1):kn.updateTime(n):kn.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ze.min()))throw new fe(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kn.updateTime(n)}return kn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class fue{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.nu=r.maxAttempts,this.t_=new K0(this.asyncQueue,"transaction_retry")}ru(){this.nu-=1,this.iu()}iu(){var e=this;this.t_.Go((0,re.A)(function*(){const n=new hue(e.datastore),r=e.su(n);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.ou(s)}))}).catch(i=>{e.ou(i)})}))}su(e){try{const n=this.updateFunction(e);return!bm(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}ou(e){this.nu>0&&this._u(e)?(this.nu-=1,this.asyncQueue.enqueueAndForget(()=>(this.iu(),Promise.resolve()))):this.deferred.reject(e)}_u(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!y$(n)}return!1}}class pue{constructor(e,n,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mr.UNAUTHENTICATED,this.clientId=cj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,re.A)(function*(a){ge("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ge("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,re.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(r){const i=If(r,"Failed to shutdown persistence");n.reject(i)}})),n.promise}}function _w(t,e){return QR.apply(this,arguments)}function QR(){return QR=(0,re.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress(),ge("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(function(){var i=(0,re.A)(function*(s){r.isEqual(s)||(yield vH(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}),QR.apply(this,arguments)}function YR(t,e){return JR.apply(this,arguments)}function JR(){return(JR=(0,re.A)(function*(t,e){t.asyncQueue.verifyOperationInProgress();const n=yield ZR(t);ge("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>FH(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>FH(e.remoteStore,i)),t._onlineComponents=e})).apply(this,arguments)}function XH(t){return"FirebaseError"===t.name?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}function ZR(t){return XR.apply(this,arguments)}function XR(){return(XR=(0,re.A)(function*(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _w(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!XH(n))throw n;zi("Error using user provided cache. Falling back to memory cache: "+n),yield _w(t,new Af)}}else ge("FirestoreClient","Using default OfflineComponentProvider"),yield _w(t,new Af);return t._offlineComponents})).apply(this,arguments)}function yw(t){return eP.apply(this,arguments)}function eP(){return(eP=(0,re.A)(function*(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge("FirestoreClient","Using user provided OnlineComponentProvider"),yield YR(t,t._uninitializedComponentsProvider._online)):(ge("FirestoreClient","Using default OnlineComponentProvider"),yield YR(t,new Df))),t._onlineComponents})).apply(this,arguments)}function e4(t){return ZR(t).then(e=>e.persistence)}function bf(t){return ZR(t).then(e=>e.localStore)}function t4(t){return yw(t).then(e=>e.remoteStore)}function tP(t){return yw(t).then(e=>e.syncEngine)}function Sf(t){return nP.apply(this,arguments)}function nP(){return(nP=(0,re.A)(function*(t){const e=yield yw(t),n=e.eventManager;return n.onListen=zae.bind(null,e.syncEngine),n.onUnlisten=qae.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gae.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Wae.bind(null,e.syncEngine),n})).apply(this,arguments)}function r4(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function(s,o,a,u,d){const f=new mw({next:y=>{o.enqueueAndForget(()=>mR(s,m));const E=y.docs.has(a);!E&&y.fromCache?d.reject(new fe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&y.fromCache&&u&&"server"===u.source?d.reject(new fe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new ER(ef(a.path),f,{includeMetadataChanges:!0,_a:!0});return pR(s,m)}(yield Sf(t),t.asyncQueue,e,n,r)})),r.promise}function i4(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function(s,o,a,u,d){const f=new mw({next:y=>{o.enqueueAndForget(()=>mR(s,m)),y.fromCache&&"server"===u.source?d.reject(new fe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),m=new ER(a,f,{includeMetadataChanges:!0,_a:!0});return pR(s,m)}(yield Sf(t),t.asyncQueue,e,n,r)})),r.promise}function s4(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e}const o4=new Map;function rP(t,e,n){if(!n)throw new fe(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function a4(t,e,n,r){if(!0===e&&!0===r)throw new fe(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u4(t){if(!be.isDocumentKey(t))throw new fe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function c4(t){if(be.isDocumentKey(t))throw new fe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=(r=t).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof t?"a function":Oe()}function Et(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new fe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vw(t);throw new fe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function l4(t,e){if(e<=0)throw new fe(K.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}class d4{constructor(e){var n,r;if(void 0===e.host){if(void 0!==e.ssl)throw new fe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new fe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=s4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class t_{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new d4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new fe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new fe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new d4(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new yse;switch(r.type){case"firstParty":return new wse(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new fe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=o4.get(n);r&&(ge("ComponentProvider","Removing Datastore"),o4.delete(n),r.terminate())}(this),Promise.resolve()}}class zr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zr(this.firestore,e,this._query)}}class En{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ho(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new En(this.firestore,e,this._key)}}class Ho extends zr{constructor(e,n,r){super(e,n,ef(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new En(this.firestore,null,new be(e))}withConverter(e){return new Ho(this.firestore,e,this._path)}}function f4(t,e,...n){if(t=(0,_t.Ku)(t),rP("collection","path",e),t instanceof t_){const r=At.fromString(e,...n);return c4(r),new Ho(t,null,r)}{if(!(t instanceof En||t instanceof Ho))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return c4(r),new Ho(t.firestore,null,r)}}function Ew(t,e,...n){if(t=(0,_t.Ku)(t),1===arguments.length&&(e=cj.newId()),rP("doc","path",e),t instanceof t_){const r=At.fromString(e,...n);return u4(r),new En(t,null,new be(r))}{if(!(t instanceof En||t instanceof Ho))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(At.fromString(e,...n));return u4(r),new En(t.firestore,t instanceof Ho?t.converter:null,new be(r))}}function p4(t,e){return t=(0,_t.Ku)(t),e=(0,_t.Ku)(e),(t instanceof En||t instanceof Ho)&&(e instanceof En||e instanceof Ho)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function iP(t,e){return t=(0,_t.Ku)(t),e=(0,_t.Ku)(e),t instanceof zr&&e instanceof zr&&t.firestore===e.firestore&&km(t._query,e._query)&&t.converter===e.converter}class bue{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new K0(this,"async_queue_retry"),this.Eu=()=>{const n=hw();n&&ge("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=hw();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=hw();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new wr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){var e=this;return(0,re.A)(function*(){if(0!==e.uu.length){try{yield e.uu[0](),e.uu.shift(),e.t_.reset()}catch(n){if(!Vu(n))throw n;ge("AsyncQueue","Operation failed with retryable error: "+n)}e.uu.length>0&&e.t_.Go(()=>e.Ru())}})()}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{throw this.hu=r,this.Pu=!1,sr("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=fR.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&Oe()}verifyOperationInProgress(){}mu(){var e=this;return(0,re.A)(function*(){let n;do{n=e.au,yield n}while(n!==e.au)})()}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}function sP(t){return function(n){if("object"!=typeof n||null===n)return!1;const i=n;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(t)}class Sue{constructor(){this._progressObserver={},this._taskCompletionResolver=new wr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nn extends t_{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new bue,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||g4(this),this._firestoreClient.terminate()}}function Fn(t){return t._firestoreClient||g4(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function g4(t){var e,n,r;const i=t._freezeSettings(),s=(u=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",new Xse(t._databaseId,u,t._persistenceKey,(f=i).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,s4(f.experimentalLongPollingOptions),f.useFetchStreams));var u,f;t._firestoreClient=new pue(t._authCredentials,t._appCheckCredentials,t._queue,s),null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function m4(t,e,n){const r=new wr;return t.asyncQueue.enqueue((0,re.A)(function*(){try{yield _w(t,n),yield YR(t,e),r.resolve()}catch(i){const s=i;if(!XH(s))throw s;zi("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function _4(t){if(t._initialized||t._terminated)throw new fe(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(qn.fromBase64String(e))}catch(n){throw new fe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(qn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ka{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new fe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xl{constructor(e){this._methodName=e}}class Iw{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}class ww{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}const Uue=/^__.*__$/;class Bue{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return null!==this.fieldMask?new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms):new af(e,this.data,n,this.fieldTransforms)}}class y4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ma(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function v4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe()}}class Tw{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Tw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=null===(n=this.path)||void 0===n?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Dw(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(0===e.length)throw this.Mu("Document fields must not be empty");if(v4(this.wu)&&Uue.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class jue{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xm(e)}Nu(e,n,r,i=!1){return new Tw({wu:e,methodName:n,Ou:r,path:yn.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ol(t){const e=t._freezeSettings(),n=Xm(t._databaseId);return new jue(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Cw(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);hP("Data must be an object, but it was:",o,r);const a=w4(r,o);let u,d;if(s.merge)u=new Gi(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const m of s.mergeFields){const y=i_(e,m,n);if(!o.contains(y))throw new fe(K.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);C4(f,y)||f.push(y)}u=new Gi(f),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new Bue(new Hr(a),u,d)}class r_ extends xl{_toFieldTransform(e){if(2!==e.wu)throw e.Mu(1===e.wu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof r_}}function E4(t,e,n){return new Tw({wu:3,Ou:e.settings.Ou,methodName:t._methodName,Du:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class oP extends xl{_toFieldTransform(e){return new Um(e.path,new rf)}isEqual(e){return e instanceof oP}}class aP extends xl{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=E4(this,e,!0),r=this.Lu.map(s=>kl(s,n)),i=new Cl(r);return new Um(e.path,i)}isEqual(e){return e instanceof aP&&(0,_t.bD)(this.Lu,e.Lu)}}class uP extends xl{constructor(e,n){super(e),this.Lu=n}_toFieldTransform(e){const n=E4(this,e,!0),r=this.Lu.map(s=>kl(s,n)),i=new Al(r);return new Um(e.path,i)}isEqual(e){return e instanceof uP&&(0,_t.bD)(this.Lu,e.Lu)}}class cP extends xl{constructor(e,n){super(e),this.Bu=n}_toFieldTransform(e){const n=new sf(e.serializer,o$(e.serializer,this.Bu));return new Um(e.path,n)}isEqual(e){return e instanceof cP&&this.Bu===e.Bu}}function lP(t,e,n,r){const i=t.Nu(1,e,n);hP("Data must be an object, but it was:",i,r);const s=[],o=Hr.empty();Uu(r,(u,d)=>{const f=Aw(e,u,n);d=(0,_t.Ku)(d);const m=i.Cu(f);if(d instanceof r_)s.push(f);else{const y=kl(d,m);null!=y&&(s.push(f),o.set(f,y))}});const a=new Gi(s);return new y4(o,a,i.fieldTransforms)}function dP(t,e,n,r,i,s){const o=t.Nu(1,e,n),a=[i_(e,r,n)],u=[i];if(s.length%2!=0)throw new fe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<s.length;y+=2)a.push(i_(e,s[y])),u.push(s[y+1]);const d=[],f=Hr.empty();for(let y=a.length-1;y>=0;--y)if(!C4(d,a[y])){const E=a[y];let T=u[y];T=(0,_t.Ku)(T);const A=o.Cu(E);if(T instanceof r_)d.push(E);else{const D=kl(T,A);null!=D&&(d.push(E),f.set(E,D))}}const m=new Gi(d);return new y4(f,m,o.fieldTransforms)}function I4(t,e,n,r=!1){return kl(n,t.Nu(r?4:3,e))}function kl(t,e){if(T4(t=(0,_t.Ku)(t)))return hP("Unsupported field value:",e,t),w4(t,e);if(t instanceof xl)return function(r,i){if(!v4(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&4!==e.wu)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=kl(a,i.Fu(o));null==u&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if(null===(r=(0,_t.Ku)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return o$(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=xn.fromDate(r);return{timestampValue:cf(i.serializer,s)}}if(r instanceof xn){const s=new xn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cf(i.serializer,s)}}if(r instanceof Iw)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zo)return{bytesValue:S$(i.serializer,r._byteString)};if(r instanceof En){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:w0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ww)return a=i,{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:r.toArray().map(u=>{if("number"!=typeof u)throw a.Mu("VectorValues must only contain numeric values.");return g0(a.serializer,u)})}}}}};var a;throw i.Mu(`Unsupported field value: ${vw(r)}`)}(t,e)}function w4(t,e){const n={};return Dj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uu(t,(r,i)=>{const s=kl(i,e.bu(r));null!=s&&(n[r]=s)}),{mapValue:{fields:n}}}function T4(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof xn||t instanceof Iw||t instanceof zo||t instanceof En||t instanceof xl||t instanceof ww)}function hP(t,e,n){if(!T4(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=vw(n);throw e.Mu("an object"===r?t+" a custom object":t+" "+r)}var i}function i_(t,e,n){if((e=(0,_t.Ku)(e))instanceof ka)return e._internalPath;if("string"==typeof e)return Aw(t,e);throw Dw("Field path arguments must be of type string or ",t,!1,void 0,n)}const $ue=new RegExp("[~\\*/\\[\\]]");function Aw(t,e,n){if(e.search($ue)>=0)throw Dw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ka(...e.split("."))._internalPath}catch{throw Dw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Dw(t,e,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new fe(K.INVALID_ARGUMENT,a+t+u)}function C4(t,e){return t.some(n=>n.isEqual(e))}class s_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new En(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Hue(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(bw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class Hue extends s_{data(){return super.data()}}function bw(t,e){return"string"==typeof e?Aw(t,e):e instanceof ka?e._internalPath:e._delegate._internalPath}function A4(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new fe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fP{}class o_ extends fP{}function Ju(t,e,...n){let r=[];e instanceof fP&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Rf).length,a=s.filter(u=>u instanceof a_).length;if(o>1||o>0&&a>0)throw new fe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class a_ extends o_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new a_(e,n,r)}_apply(e){const n=this._parse(e);return R4(e._query,n),new zr(e.firestore,e.converter,f0(e._query,n))}_parse(e){const n=Ol(e.firestore);return function(s,o,a,u,d,f,m){let y;if(d.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new fe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){S4(m,f);const E=[];for(const T of m)E.push(b4(u,s,T));y={arrayValue:{values:E}}}else y=b4(u,s,m)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||S4(m,f),y=I4(a,"where",m,"in"===f||"not-in"===f);return Dt.create(d,f,y)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rf extends fP{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===n.length?n[0]:Jt.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)R4(o,u),o=f0(o,u)}(e._query,n),new zr(e.firestore,e.converter,f0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class pP extends o_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new pP(e,n)}_apply(e){const n=function(i,s,o){if(null!==i.startAt)throw new fe(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new fe(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xm(s,o)}(e._query,this._field,this._direction);return new zr(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Pa(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}class Sw extends o_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Sw(e,n,r)}_apply(e){return new zr(e.firestore,e.converter,GI(e._query,this._limit,this._limitType))}}class Rw extends o_{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Rw(e,n,r)}_apply(e){const n=D4(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=n,new Pa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class Pw extends o_{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pw(e,n,r)}_apply(e){const n=D4(e,this.type,this._docOrFields,this._inclusive);return new zr(e.firestore,e.converter,(s=n,new Pa((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function D4(t,e,n,r){if(n[0]=(0,_t.Ku)(n[0]),n[0]instanceof s_)return function(s,o,a,u,d){if(!u)throw new fe(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const m of tf(s))if(m.field.isKeyField())f.push(wl(o,u.key));else{const y=u.data.field(m.field);if(LI(y))throw new fe(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===y){const E=m.field.canonicalString();throw new fe(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(y)}return new zu(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Ol(t.firestore);return function(o,a,u,d,f,m){const y=o.explicitOrderBy;if(f.length>y.length)throw new fe(K.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let T=0;T<f.length;T++){const A=f[T];if(y[T].field.isKeyField()){if("string"!=typeof A)throw new fe(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof A}`);if(!h0(o)&&-1!==A.indexOf("/"))throw new fe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${A}' contains a slash.`);const D=o.path.child(At.fromString(A));if(!be.isDocumentKey(D))throw new fe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${D}' is not because it contains an odd number of segments.`);const F=new be(D);E.push(wl(a,F))}else{const D=I4(u,d,A);E.push(D)}}return new zu(E,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function b4(t,e,n){if("string"==typeof(n=(0,_t.Ku)(n))){if(""===n)throw new fe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!h0(e)&&-1!==n.indexOf("/"))throw new fe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(At.fromString(n));if(!be.isDocumentKey(r))throw new fe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wl(t,new be(r))}if(n instanceof En)return wl(t,n._key);throw new fe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vw(n)}.`)}function S4(t,e){if(!Array.isArray(t)||0===t.length)throw new fe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function R4(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new fe(K.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gP{convertValue(e,n="none"){switch($u(e)){case 0:return null;case 1:return e.booleanValue;case 2:return On(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ra(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Uu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=null===(i=null===(r=null===(n=e.fields)||void 0===n?void 0:n.value.arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(o=>On(o.doubleValue));return new ww(s)}convertGeoPoint(e){return new Iw(On(e.latitude),On(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=VI(e);return null==r?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Rm(e));default:return null}}convertTimestamp(e){const n=Sa(e);return new xn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=At.fromString(e);je(B$(r));const i=new Bu(r.get(1),r.get(3)),s=new be(r.popFirst(5));return i.isEqual(n)||sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function Nw(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zue extends gP{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}class Fl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fa extends s_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new u_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(bw("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class u_ extends Fa{data(e={}){return super.data(e)}}class Zu{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new u_(this._firestore,this._userDataWriter,r.key,r,new Fl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new u_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const u=new u_(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fl(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,f=-1;return 0!==a.type&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:ece(a.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ece(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe()}}function N4(t,e){return t instanceof Fa&&e instanceof Fa?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zu&&e instanceof Zu&&t._firestore===e._firestore&&iP(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}class Xu extends gP{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new En(this.firestore,null,n)}}function M4(t,e,n){t=Et(t,En);const r=Et(t.firestore,nn),i=Nw(t.converter,e,n);return Pf(r,[Cw(Ol(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,kn.none())])}function x4(t,e,n,...r){t=Et(t,En);const i=Et(t.firestore,nn),s=Ol(i);let o;return o="string"==typeof(e=(0,_t.Ku)(e))||e instanceof ka?dP(s,"updateDoc",t._key,e,n,r):lP(s,"updateDoc",t._key,e),Pf(i,[o.toMutation(t._key,kn.exists(!0))])}function O4(t,...e){var n,r,i;t=(0,_t.Ku)(t);let s={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof e[o]||sP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(sP(e[o])){const m=e[o];e[o]=null===(n=m.next)||void 0===n?void 0:n.bind(m),e[o+1]=null===(r=m.error)||void 0===r?void 0:r.bind(m),e[o+2]=null===(i=m.complete)||void 0===i?void 0:i.bind(m)}let u,d,f;if(t instanceof En)d=Et(t.firestore,nn),f=ef(t._key.path),u={next:m=>{e[o]&&e[o](mP(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Et(t,zr);d=Et(m.firestore,nn),f=m._query;const y=new Xu(d);u={next:E=>{e[o]&&e[o](new Zu(d,y,m,E))},error:e[o+1],complete:e[o+2]},A4(t._query)}return function(y,E,T,A){const D=new mw(A),F=new ER(E,D,T);return y.asyncQueue.enqueueAndForget((0,re.A)(function*(){return pR(yield Sf(y),F)})),()=>{D.za(),y.asyncQueue.enqueueAndForget((0,re.A)(function*(){return mR(yield Sf(y),F)}))}}(Fn(d),f,a,u)}function Pf(t,e){return function(r,i){const s=new wr;return r.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function Kae(t,e,n){return SR.apply(this,arguments)}(yield tP(r),i,s)})),s.promise}(Fn(t),e)}function mP(t,e,n){const r=n.docs.get(e._key),i=new Xu(t);return new Fa(t,i,e._key,r,new Fl(n.hasPendingWrites,n.fromCache),e.converter)}const yce={maxAttempts:5};class k4{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ol(e)}set(e,n,r){this._verifyNotCommitted();const i=ec(e,this._firestore),s=Nw(i.converter,n,r),o=Cw(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,kn.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=ec(e,this._firestore);let o;return o="string"==typeof(n=(0,_t.Ku)(n))||n instanceof ka?dP(this._dataReader,"WriteBatch.update",s._key,n,r,i):lP(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ec(e,this._firestore);return this._mutations=this._mutations.concat(new uf(n._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ec(t,e){if((t=(0,_t.Ku)(t)).firestore!==e)throw new fe(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class vce extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Ol(n)}get(n){const r=ec(n,this._firestore),i=new Zue(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return Oe();const o=s[0];if(o.isFoundDocument())return new s_(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new s_(this._firestore,i,r._key,null,r.converter);throw Oe()})}set(n,r,i){const s=ec(n,this._firestore),o=Nw(s.converter,r,i),a=Cw(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=ec(n,this._firestore);let a;return a="string"==typeof(r=(0,_t.Ku)(r))||r instanceof ka?dP(this._dataReader,"Transaction.update",o._key,r,i,s):lP(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=ec(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ec(e,this._firestore),r=new Xu(this._firestore);return super.get(e).then(i=>new Fa(this._firestore,r,n._key,i._document,new Fl(!1,!1),n.converter))}}function yP(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new fe("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function U4(){if(typeof Uint8Array>"u")throw new fe("unimplemented","Uint8Arrays are not available in this environment.")}function B4(){if(!function Jse(){return typeof atob<"u"}())throw new fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,n=!0){qh=Mo.SDK_VERSION,(0,Mo._registerComponent)(new CI.uA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new nn(new Ese(r.getProvider("auth-internal")),new Tse(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new fe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bu(d.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Mo.registerVersion)(oj,"4.7.0",e),(0,Mo.registerVersion)(oj,"4.7.0","esm2017")}();class c_{constructor(e){this._delegate=e}static fromBase64String(e){return B4(),new c_(zo.fromBase64String(e))}static fromUint8Array(e){return U4(),new c_(zo.fromUint8Array(e))}toBase64(){return B4(),this._delegate.toBase64()}toUint8Array(){return U4(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function vP(t){return function Rce(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const r of e)if(r in n&&"function"==typeof n[r])return!0;return!1}(t,["next","error","complete"])}class Pce{enableIndexedDbPersistence(e,n){return function Pue(t,e){_4(t=Et(t,nn));const n=Fn(t);if(n._uninitializedComponentsProvider)throw new fe(K.FAILED_PRECONDITION,"SDK cache is already specified.");zi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new Df;return m4(n,i,new KR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Nue(t){_4(t=Et(t,nn));const e=Fn(t);if(e._uninitializedComponentsProvider)throw new fe(K.FAILED_PRECONDITION,"SDK cache is already specified.");zi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new Df;return m4(e,r,new JH(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Mue(t){if(t._initialized&&!t._terminated)throw new fe(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new wr;return t._queue.enqueueAndForgetEvenWhileRestricted((0,re.A)(function*(){try{yield(n=(0,re.A)(function*(i){if(!Vo.D())return Promise.resolve();const s=i+"main";yield Vo.delete(s)}),function r(i){return n.apply(this,arguments)})(L0(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}(e._delegate)}}class j4{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&zi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,r={}){!function h4(t,e,n,r={}){var i;const s=(t=Et(t,t_))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=Mr.MOCK_USER;else{a=(0,_t.Fy)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new fe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Mr(d)}t._authCredentials=new vse(new aj(a,u))}}(this._delegate,e,n,r)}enableNetwork(){return function Oue(t){return function gue(t){return t.asyncQueue.enqueue((0,re.A)(function*(){const e=yield e4(t),n=yield t4(t);return e.setNetworkEnabled(!0),function(i){const s=we(i);return s.L_.delete(0),e_(s)}(n)}))}(Fn(t=Et(t,nn)))}(this._delegate)}disableNetwork(){return function kue(t){return function mue(t){return t.asyncQueue.enqueue((0,re.A)(function*(){const e=yield e4(t),n=yield t4(t);return e.setNetworkEnabled(!1),(r=(0,re.A)(function*(s){const o=we(s);o.L_.add(0),yield _f(o),o.q_.set("Offline")}),function i(s){return r.apply(this,arguments)})(n);var r}))}(Fn(t=Et(t,nn)))}(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,a4("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function xue(t){return function(n){const r=new wr;return n.asyncQueue.enqueueAndForget((0,re.A)(function*(){return function Zae(t,e){return xR.apply(this,arguments)}(yield tP(n),r)})),r.promise}(Fn(t=Et(t,nn)))}(this._delegate)}onSnapshotsInSync(e){return function cce(t,e){return function Eue(t,e){const n=new mw(e);return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return i=yield Sf(t),s=n,we(i).Y_.add(s),void s.next();var i,s})),()=>{n.za(),t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return i=yield Sf(t),s=n,void we(i).Y_.delete(s);var i,s}))}}(Fn(t=Et(t,nn)),sP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nf(this,f4(this._delegate,e))}catch(n){throw Ri(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ns(this,Ew(this._delegate,e))}catch(n){throw Ri(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Pi(this,function Due(t,e){if(t=Et(t,t_),rP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new fe(K.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zr(t,null,(r=e,new Pa(At.emptyPath(),r)));var r}(this._delegate,e))}catch(n){throw Ri(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ece(t,e,n){t=Et(t,nn);const r=Object.assign(Object.assign({},yce),n);return function(s){if(s.maxAttempts<1)throw new fe(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const u=new wr;return s.asyncQueue.enqueueAndForget((0,re.A)(function*(){const d=yield function n4(t){return yw(t).then(e=>e.datastore)}(s);new fue(s.asyncQueue,d,a,o,u).ru()})),u.promise}(Fn(t),i=>e(new vce(t,i)),r)}(this._delegate,n=>e(new $4(this,n)))}batch(){return Fn(this._delegate),new H4(new k4(this._delegate,e=>Pf(this._delegate,e)))}loadBundle(e){return function Fue(t,e){const n=Fn(t=Et(t,nn)),r=new Sue;return function Iue(t,e,n,r){const i=function(o,a){let u;return u="string"==typeof o?E$().encode(o):o,f=function(f,m){if(f instanceof Uint8Array)return ZH(f,m);if(f instanceof ArrayBuffer)return ZH(new Uint8Array(f),m);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),new due(f,a);var f}(n,Xm(e));t.asyncQueue.enqueueAndForget((0,re.A)(function*(){!function cue(t,e,n){const r=we(t);var i;(i=(0,re.A)(function*(o,a,u){try{const d=yield a.getMetadata();if(yield function(T,A){const D=we(T),F=or(A.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",x=>D.Gr.getBundleMetadata(x,A.id)).then(x=>!!x&&x.createTime.compareTo(F)>=0)}(o.localStore,d))return yield a.close(),u._completeWith({taskState:"Success",documentsLoaded:(T=d).totalDocuments,bytesLoaded:T.totalBytes,totalDocuments:T.totalDocuments,totalBytes:T.totalBytes}),Promise.resolve(new Set);u._updateProgress(jH(d));const f=new Bae(d,o.localStore,a.serializer);let m=yield a.Ua();for(;m;){const E=yield f.la(m);E&&u._updateProgress(E),m=yield a.Ua()}const y=yield f.complete();return yield Oa(o,y.Ia,void 0),yield function(T,A){const D=we(T);return D.persistence.runTransaction("Save bundle","readwrite",F=>D.Gr.saveBundleMetadata(F,A))}(o.localStore,d),u._completeWith(y.progress),Promise.resolve(y.Pa)}catch(d){return zi("SyncEngine",`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}var T}),function s(o,a,u){return i.apply(this,arguments)})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield tP(t),i,r)}))}(n,t._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Lue(t,e){return function wue(t,e){return t.asyncQueue.enqueue((0,re.A)(function*(){return function(r,i){const s=we(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield bf(t),e)}))}(Fn(t=Et(t,nn)),e).then(n=>n?new zr(t,null,n.query):null)}(this._delegate,e).then(n=>n?new Pi(this,n):null)}}class xw extends gP{constructor(e){super(),this.firestore=e}convertBytes(e){return new c_(new zo(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Ns.forKey(n,this.firestore,null)}}class $4{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}get(e){const n=Vl(e);return this._delegate.get(n).then(r=>new l_(this._firestore,new Fa(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Vl(e);return r?(yP("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Vl(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Vl(e);return this._delegate.delete(n),this}}class H4{constructor(e){this._delegate=e}set(e,n,r){const i=Vl(e);return r?(yP("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Vl(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Vl(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ll{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new u_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new d_(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ll.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new Ll(e,new xw(e),n),i.set(n,s)),s}}Ll.INSTANCES=new WeakMap;class Ns{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}static forPath(e,n,r){if(e.length%2!=0)throw new fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ns(n,new En(n._delegate,r,new be(e)))}static forKey(e,n,r){return new Ns(n,new En(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nf(this.firestore,f4(this._delegate,e))}catch(n){throw Ri(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,_t.Ku)(e))instanceof En&&p4(this._delegate,e)}set(e,n){n=yP("DocumentReference.set",n);try{return n?M4(this._delegate,e,n):M4(this._delegate,e)}catch(r){throw Ri(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return 1===arguments.length?x4(this._delegate,e):x4(this._delegate,e,n,...r)}catch(i){throw Ri(i,"updateDoc()","DocumentReference.update()")}}delete(){return function ace(t){return Pf(Et(t.firestore,nn),[new uf(t._key,kn.none())])}(this._delegate)}onSnapshot(...e){const n=z4(e),r=G4(e,i=>new l_(this.firestore,new Fa(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return O4(this._delegate,n,r)}get(e){let n;return n="cache"===e?.source?function nce(t){t=Et(t,En);const e=Et(t.firestore,nn),n=Fn(e),r=new Xu(e);return function _ue(t,e){const n=new wr;return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return(r=(0,re.A)(function*(s,o,a){try{const u=yield function(f,m){const y=we(f);return y.persistence.runTransaction("read document","readonly",E=>y.localDocuments.getDocument(E,m))}(s,o);u.isFoundDocument()?a.resolve(u):u.isNoDocument()?a.resolve(null):a.reject(new fe(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=If(u,`Failed to get document '${o} from cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield bf(t),e,n);var r})),n.promise}(n,t._key).then(i=>new Fa(e,r,t._key,i,new Fl(null!==i&&i.hasLocalMutations,!0),t.converter))}(this._delegate):"server"===e?.source?function rce(t){t=Et(t,En);const e=Et(t.firestore,nn);return r4(Fn(e),t._key,{source:"server"}).then(n=>mP(e,t,n))}(this._delegate):function tce(t){t=Et(t,En);const e=Et(t.firestore,nn);return r4(Fn(e),t._key).then(n=>mP(e,t,n))}(this._delegate),n.then(r=>new l_(this.firestore,new Fa(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}function Ri(t,e,n){return t.message=t.message.replace(e,n),t}function z4(t){for(const e of t)if("object"==typeof e&&!vP(e))return e;return{}}function G4(t,e){var n,r;let i;return i=vP(t[0])?t[0]:vP(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class l_{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ns(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return N4(this._delegate,e._delegate)}}class d_ extends l_{data(e){const n=this._delegate.data(e);return this._delegate._converter||function _se(t){t||Oe()}(void 0!==n),n}}class Pi{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new xw(e)}where(e,n,r){try{return new Pi(this.firestore,Ju(this._delegate,function zue(t,e,n){const r=e,i=bw("where",t);return a_._create(i,r,n)}(e,n,r)))}catch(i){throw Ri(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Pi(this.firestore,Ju(this._delegate,function Gue(t,e="asc"){const n=e,r=bw("orderBy",t);return pP._create(r,n)}(e,n)))}catch(r){throw Ri(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Pi(this.firestore,Ju(this._delegate,function que(t){return l4("limit",t),Sw._create("limit",t,"F")}(e)))}catch(n){throw Ri(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Pi(this.firestore,Ju(this._delegate,function Wue(t){return l4("limitToLast",t),Sw._create("limitToLast",t,"L")}(e)))}catch(n){throw Ri(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Pi(this.firestore,Ju(this._delegate,function Kue(...t){return Rw._create("startAt",t,!0)}(...e)))}catch(n){throw Ri(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Pi(this.firestore,Ju(this._delegate,function Que(...t){return Rw._create("startAfter",t,!1)}(...e)))}catch(n){throw Ri(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Pi(this.firestore,Ju(this._delegate,function Yue(...t){return Pw._create("endBefore",t,!1)}(...e)))}catch(n){throw Ri(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Pi(this.firestore,Ju(this._delegate,function Jue(...t){return Pw._create("endAt",t,!0)}(...e)))}catch(n){throw Ri(n,"endAt()","Query.endAt()")}}isEqual(e){return iP(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function sce(t){t=Et(t,zr);const e=Et(t.firestore,nn),n=Fn(e),r=new Xu(e);return function yue(t,e){const n=new wr;return t.asyncQueue.enqueueAndForget((0,re.A)(function*(){return(r=(0,re.A)(function*(s,o,a){try{const u=yield uw(s,o,!0),d=new zH(o,u.Ts),f=d.ma(u.documents),m=d.applyChanges(f,!1);a.resolve(m.snapshot)}catch(u){const d=If(u,`Failed to execute query '${o} against cache`);a.reject(d)}}),function i(s,o,a){return r.apply(this,arguments)})(yield bf(t),e,n);var r})),n.promise}(n,t._query).then(i=>new Zu(e,r,t,i))}(this._delegate):"server"===e?.source?function oce(t){t=Et(t,zr);const e=Et(t.firestore,nn),n=Fn(e),r=new Xu(e);return i4(n,t._query,{source:"server"}).then(i=>new Zu(e,r,t,i))}(this._delegate):function ice(t){t=Et(t,zr);const e=Et(t.firestore,nn),n=Fn(e),r=new Xu(e);return A4(t._query),i4(n,t._query).then(i=>new Zu(e,r,t,i))}(this._delegate),n.then(r=>new EP(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=z4(e),r=G4(e,i=>new EP(this.firestore,new Zu(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return O4(this._delegate,n,r)}withConverter(e){return new Pi(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}class Mce{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new d_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class EP{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Pi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new d_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Mce(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new d_(this._firestore,r))})}isEqual(e){return N4(this._delegate,e._delegate)}}class Nf extends Pi{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ns(this.firestore,e):null}doc(e){try{return new Ns(this.firestore,void 0===e?Ew(this._delegate):Ew(this._delegate,e))}catch(n){throw Ri(n,"doc()","CollectionReference.doc()")}}add(e){return function uce(t,e){const n=Et(t.firestore,nn),r=Ew(t),i=Nw(t.converter,e);return Pf(n,[Cw(Ol(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,kn.exists(!1))]).then(()=>r)}(this._delegate,e).then(n=>new Ns(this.firestore,n))}isEqual(e){return p4(this._delegate,e._delegate)}withConverter(e){return new Nf(this.firestore,this._delegate.withConverter(e?Ll.getInstance(this.firestore,e):null))}}function Vl(t){return Et(t,En)}class IP{constructor(...e){this._delegate=new ka(...e)}static documentId(){return new IP(yn.keyField().canonicalString())}isEqual(e){return(e=(0,_t.Ku)(e))instanceof ka&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ul{constructor(e){this._delegate=e}static serverTimestamp(){const e=function wce(){return new oP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ul(e)}static delete(){const e=function Ice(){return new r_("deleteField")}();return e._methodName="FieldValue.delete",new Ul(e)}static arrayUnion(...e){const n=function Tce(...t){return new aP("arrayUnion",t)}(...e);return n._methodName="FieldValue.arrayUnion",new Ul(n)}static arrayRemove(...e){const n=function Cce(...t){return new uP("arrayRemove",t)}(...e);return n._methodName="FieldValue.arrayRemove",new Ul(n)}static increment(e){const n=function Ace(t){return new cP("increment",t)}(e);return n._methodName="FieldValue.increment",new Ul(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const xce={Firestore:j4,GeoPoint:Iw,Timestamp:xn,Blob:c_,Transaction:$4,WriteBatch:H4,DocumentReference:Ns,DocumentSnapshot:l_,Query:Pi,QueryDocumentSnapshot:d_,QuerySnapshot:EP,CollectionReference:Nf,FieldPath:IP,FieldValue:Ul,setLogLevel:function Nce(t){!function mse(t){Fu.setLogLevel(t)}(t)},CACHE_SIZE_UNLIMITED:-1};function q4(t,e){return function Fce(t,e=xS){return new Wt(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}(t,e)}function wP(t,e){return q4(t,e).pipe(Pe(n=>({payload:n,type:"query"})))}!function kce(t){(function Oce(t,e){t.INTERNAL.registerComponent(new CI.uA("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},xce)))})(t,(e,n)=>new j4(e,n,new Pce)),t.registerVersion("@firebase/firestore-compat","0.3.35")}(xo.A);class W4{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const r=this.ref.collection(e),{ref:i,query:s}=X4(r,n);return new Y4(i,s,this.afs)}snapshotChanges(){return function Lce(t,e){return q4(t,e).pipe(XE(void 0),YS(),Pe(n=>{const[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return this.snapshotChanges().pipe(Pe(({payload:n})=>e.idField?{...n.data(),[e.idField]:n.id}:n.data()))}get(e){return Gt(this.ref.get(e)).pipe(Di)}}function Ow(t,e){return wP(t,e).pipe(XE(void 0),YS(),Pe(n=>{const[r,i]=n,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{const d=s.find(m=>m.doc.ref.isEqual(a.ref)),f=r?.payload.docs.find(m=>m.ref.isEqual(a.ref));d&&JSON.stringify(d.doc.metadata)===JSON.stringify(a.metadata)||!d&&f&&JSON.stringify(f.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),o}))}function K4(t,e,n){return Ow(t,n).pipe(tI((r,i)=>function Vce(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=function Uce(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return TP(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return TP(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TP(t,e.oldIndex,1)}return t}(t,r))}),t}(r,i.map(s=>s.payload),e),[]),function pse(t,e=kr){return t=t??gse,Fe((n,r)=>{let i,s=!0;n.subscribe($e(r,o=>{const a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}(),Pe(r=>r.map(i=>({type:i.type,payload:i}))))}function TP(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Q4(t){return(!t||0===t.length)&&(t=["added","removed","modified"]),t}class Y4{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Ow(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(Pe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(XE(void 0),YS(),Rs(([r,i])=>i.length>0||!r),Pe(([,r])=>r),Di)}auditTrail(e){return this.stateChanges(e).pipe(tI((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=Q4(e);return K4(this.query,n,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return wP(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(n=>n.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),Di)}get(e){return Gt(this.query.get(e)).pipe(Di)}add(e){return this.ref.add(e)}doc(e){return new W4(this.ref.doc(e),this.afs)}}class Bce{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?Ow(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(n=>n.filter(r=>e.indexOf(r.type)>-1)),Rs(n=>n.length>0),Di):Ow(this.query,this.afs.schedulers.outsideAngular).pipe(Di)}auditTrail(e){return this.stateChanges(e).pipe(tI((n,r)=>[...n,...r],[]))}snapshotChanges(e){const n=Q4(e);return K4(this.query,n,this.afs.schedulers.outsideAngular).pipe(Di)}valueChanges(e={}){return wP(this.query,this.afs.schedulers.outsideAngular).pipe(Pe(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),Di)}get(e){return Gt(this.query.get(e)).pipe(Di)}}const J4=new pe("angularfire2.enableFirestorePersistence"),Z4=new pe("angularfire2.firestore.persistenceSettings"),jce=new pe("angularfire2.firestore.settings"),$ce=new pe("angularfire2.firestore.use-emulator");function X4(t,e=n=>n){return{query:e(t),ref:t}}let ez=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,s,o,a,u,d,f,m,y,E,T,A,D,F,x){this.schedulers=u;const V=TI(n,a,r),ee=f;m&&QB(V,a,y,T,A,D,E,F),[this.firestore,this.persistenceEnabled$]=FS(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{const ve=a.runOutsideAngular(()=>V.firestore());if(s&&ve.settings(s),ee&&ve.useEmulator(...ee),i&&!OE(o)){const Te=()=>{try{return Gt(ve.enablePersistence(d||void 0).then(()=>!0,()=>!1))}catch(k){return typeof console<"u"&&console.warn(k),Ve(!1)}};return[ve,a.runOutsideAngular(Te)]}return[ve,Ve(!1)]},[s,ee,i])}collection(n,r){let i;i="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=X4(i,r),a=this.schedulers.ngZone.run(()=>s);return new Y4(a,o,this)}collectionGroup(n,r){const i=r||(o=>o),s=this.firestore.collectionGroup(n);return new Bce(i(s),this)}doc(n){let r;r="string"==typeof n?this.firestore.doc(n):n;const i=this.schedulers.ngZone.run(()=>r);return new W4(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(de(ym),de(vm,8),de(J4,8),de(jce,8),de(is),de(Rt),de(kS),de(Z4,8),de($ce,8),de(QS,8),de(HB,8),de(zB,8),de(GB,8),de(qB,8),de(WB,8),de(KB,8),de(OS,8))};static \u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),tz=(()=>{class t{constructor(){xo.A.registerVersion("angularfire",wI.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:J4,useValue:!0},{provide:Z4,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=gr({type:t});static \u0275inj=ur({providers:[ez]})}return t})(),Hce=(()=>{class t{constructor(n){this.firestore=n}getRooms(){return this.firestore.collection("Rooms").valueChanges()}static#e=this.\u0275fac=function(r){return new(r||t)(de(ez))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zce(t,e){if(1&t&&wi(0,"img",4),2&t){const n=mh().$implicit;HD("alt",n.name),jr("src",n.imagePath,sg)}}function Gce(t,e){if(1&t&&(Ze(0,"div")(1,"h2"),yt(2),Qe(),Ze(3,"p"),yt(4),Qe(),Ze(5,"p"),yt(6),Pn(7,"date"),Qe(),To(8,zce,1,2,"img",3),Qe()),2&t){const n=e.$implicit;Pt(2),Sn(n.name),Pt(2),_h("Status: ",n.status,""),Pt(2),_h("Available Since: ",Nn(7,4,null==n.availableSince?null:n.availableSince.toDate()),""),Pt(2),jr("ngIf",n.imagePath)}}function qce(t,e){if(1&t&&(Ze(0,"div"),To(1,Gce,9,6,"div",2),Qe()),2&t){const n=mh();Pt(),jr("ngForOf",n.rooms)}}function Wce(t,e){1&t&&(Ze(0,"p"),yt(1),Pn(2,"translate"),Qe()),2&t&&(Pt(),Sn(Nn(2,1,"ROOMS.NO_ROOMS")))}const Kce=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-home"]],decls:46,vars:39,consts:[[1,"home-container"],[1,"hero"],["routerLink","/contact",1,"cta-button"],[1,"features"],[1,"feature"],[1,"about"],["routerLink","/about",1,"cta-button"]],template:function(r,i){1&r&&(Ze(0,"div",0)(1,"section",1)(2,"h1"),yt(3),Pn(4,"translate"),Qe(),Ze(5,"p"),yt(6),Pn(7,"translate"),Qe(),Ze(8,"a",2),yt(9),Pn(10,"translate"),Qe()(),Ze(11,"section",3)(12,"h2"),yt(13),Pn(14,"translate"),Qe(),Ze(15,"div",4)(16,"h3"),yt(17),Pn(18,"translate"),Qe(),Ze(19,"p"),yt(20),Pn(21,"translate"),Qe()(),Ze(22,"div",4)(23,"h3"),yt(24),Pn(25,"translate"),Qe(),Ze(26,"p"),yt(27),Pn(28,"translate"),Qe()(),Ze(29,"div",4)(30,"h3"),yt(31),Pn(32,"translate"),Qe(),Ze(33,"p"),yt(34),Pn(35,"translate"),Qe()()(),Ze(36,"section",5)(37,"h2"),yt(38),Pn(39,"translate"),Qe(),Ze(40,"p"),yt(41),Pn(42,"translate"),Qe(),Ze(43,"a",6),yt(44),Pn(45,"translate"),Qe()()()),2&r&&(Pt(3),Sn(Nn(4,13,"HOME.TITLE")),Pt(3),Sn(Nn(7,15,"HOME.DESCRIPTION")),Pt(3),Sn(Nn(10,17,"HOME.CTA_CONTACT")),Pt(4),Sn(Nn(14,19,"FEATURES.TITLE")),Pt(4),Sn(Nn(18,21,"FEATURES.FEATURE1.TITLE")),Pt(3),Sn(Nn(21,23,"FEATURES.FEATURE1.DESCRIPTION")),Pt(4),Sn(Nn(25,25,"FEATURES.FEATURE2.TITLE")),Pt(3),Sn(Nn(28,27,"FEATURES.FEATURE2.DESCRIPTION")),Pt(4),Sn(Nn(32,29,"FEATURES.FEATURE3.TITLE")),Pt(3),Sn(Nn(35,31,"FEATURES.FEATURE3.DESCRIPTION")),Pt(4),Sn(Nn(39,33,"ABOUT.TITLE")),Pt(3),Sn(Nn(42,35,"ABOUT.DESCRIPTION")),Pt(3),Sn(Nn(45,37,"ABOUT.CTA_LEARN_MORE")))},dependencies:[mm,sS],styles:[".home-container[_ngcontent-%COMP%]{padding:20px;font-family:Arial,sans-serif}.home-container[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]{text-align:center;padding:50px;background-color:#f4f4f4}.home-container[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5em;color:#333}.home-container[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;color:#666}.home-container[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;margin-top:20px;background-color:#007bff;color:#fff;text-decoration:none;border-radius:5px}.home-container[_ngcontent-%COMP%]   .hero[_ngcontent-%COMP%]   .cta-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.home-container[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]{padding:20px}.home-container[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{margin-bottom:20px}.home-container[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;color:#333}.home-container[_ngcontent-%COMP%]   .features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666}.home-container[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]{padding:20px;background-color:#f9f9f9}.home-container[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   a.cta-button[_ngcontent-%COMP%]{background-color:#28a745}.home-container[_ngcontent-%COMP%]   .about[_ngcontent-%COMP%]   a.cta-button[_ngcontent-%COMP%]:hover{background-color:#218838}"]})}return t})()},{path:"pictures",component:lse},{path:"contact",component:dse},{path:"rooms",component:(()=>{class t{constructor(n){this.roomService=n,this.rooms=[]}ngOnInit(){this.roomService.getRooms().subscribe(n=>{console.log(n),this.rooms=n},n=>{console.error("Error fetching rooms:",n)})}static#e=this.\u0275fac=function(r){return new(r||t)(me(Hce))};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-rooms"]],decls:10,vars:8,consts:[["noRooms",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],["style","width: 100%; max-width: 300px; margin-top: 10px;",3,"src","alt",4,"ngIf"],[2,"width","100%","max-width","300px","margin-top","10px",3,"src","alt"]],template:function(r,i){if(1&r&&(Ze(0,"div")(1,"h1"),yt(2),Pn(3,"translate"),Qe(),Ze(4,"p"),yt(5),Pn(6,"translate"),Qe(),To(7,qce,2,1,"div",1)(8,Wce,3,3,"ng-template",null,0,LF),Qe()),2&r){const s=sF(9);Pt(2),Sn(Nn(3,4,"ROOMS.TITLE")),Pt(3),Sn(Nn(6,6,"ROOMS.DESCRIPTION")),Pt(2),jr("ngIf",i.rooms.length>0)("ngIfElse",s)}},dependencies:[ME,xE,CV,sS]})}return t})()},{path:"**",redirectTo:"",pathMatch:"full"}];let Qce=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({imports:[q2.forRoot(Kce),q2]})}return t})(),nz=(()=>{class t{constructor(n){this.translateService=n,this.selectedLanguage="es",this.languages=["es","en"],this.translateService.setDefaultLang(this.selectedLanguage),this.translateService.use(this.selectedLanguage)}changeLanguage(n){this.selectedLanguage=n,this.translateService.use(n)}getFlagUrl(n){return{es:"assets/flags/es.png",en:"assets/flags/en.png"}[n]||""}static#e=this.\u0275fac=function(r){return new(r||t)(de(YE))};static#t=this.\u0275prov=Ae({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rz=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static#e=this.\u0275fac=function(r){return new(r||t)(me(va),me(rs))};static#t=this.\u0275dir=tt({type:t})}return t})(),Bl=(()=>{class t extends rz{static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static#t=this.\u0275dir=tt({type:t,features:[Yt]})}return t})();const Go=new pe(""),oi=new pe(""),nc=new pe("");function pz(t){return null!=t}function gz(t){return Bg(t)?Gt(t):t}function mz(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function _z(t,e){return e.map(n=>n(t))}function yz(t){return t.map(e=>function tle(t){return!t.validate}(e)?e:n=>e.validate(n))}function AP(t){return null!=t?function vz(t){if(!t)return null;const e=t.filter(pz);return 0==e.length?null:function(n){return mz(_z(n,e))}}(yz(t)):null}function DP(t){return null!=t?function Ez(t){if(!t)return null;const e=t.filter(pz);return 0==e.length?null:function(n){return FU(_z(n,e).map(gz)).pipe(Pe(mz))}}(yz(t)):null}function Iz(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function bP(t){return t?Array.isArray(t)?t:[t]:[]}function Fw(t,e){return Array.isArray(t)?t.includes(e):t===e}function Cz(t,e){const n=bP(e);return bP(t).forEach(i=>{Fw(n,i)||n.push(i)}),n}function Az(t,e){return bP(e).filter(n=>!Fw(t,n))}class Dz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=AP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Ni extends Dz{get formDirective(){return null}get path(){return null}}class bz{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let Sz=(()=>{class t extends bz{constructor(n){super(n)}static#e=this.\u0275fac=function(r){return new(r||t)(me(Ni,10))};static#t=this.\u0275dir=tt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Yv("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Yt]})}return t})();const h_="VALID",Vw="INVALID",Mf="PENDING",f_="DISABLED";class xf{}class Pz extends xf{constructor(e,n){super(),this.value=e,this.source=n}}class PP extends xf{constructor(e,n){super(),this.pristine=e,this.source=n}}class NP extends xf{constructor(e,n){super(),this.touched=e,this.source=n}}class Uw extends xf{constructor(e,n){super(),this.status=e,this.source=n}}function Bw(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class OP{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Gg(()=>this.statusReactive()),this.statusReactive=Yd(void 0),this._pristine=Gg(()=>this.pristineReactive()),this.pristineReactive=Yd(!0),this._touched=Gg(()=>this.touchedReactive()),this.touchedReactive=Yd(!1),this._events=new L,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Do(this.statusReactive)}set status(e){Do(()=>this.statusReactive.set(e))}get valid(){return this.status===h_}get invalid(){return this.status===Vw}get pending(){return this.status==Mf}get disabled(){return this.status===f_}get enabled(){return this.status!==f_}get pristine(){return Do(this.pristineReactive)}set pristine(e){Do(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Do(this.touchedReactive)}set touched(e){Do(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Cz(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Cz(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Az(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Az(e,this._rawAsyncValidators))}hasValidator(e){return Fw(this._rawValidators,e)}hasAsyncValidator(e){return Fw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new NP(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new NP(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new PP(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new PP(!0,r))}markAsPending(e={}){this.status=Mf;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Uw(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=f_,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Pz(this.value,r)),this._events.next(new Uw(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=h_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===h_||this.status===Mf)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Pz(this.value,n)),this._events.next(new Uw(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?f_:h_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Mf,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n};const r=gz(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Uw(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Xt,this.statusChanges=new Xt}_calculateStatus(){return this._allControlsDisabled()?f_:this.errors?Vw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mf)?Mf:this._anyControlsHaveStatus(Vw)?Vw:h_}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new PP(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new NP(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function cle(t){return Array.isArray(t)?AP(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function lle(t){return Array.isArray(t)?DP(t):t||null}(this._rawAsyncValidators)}}class kP extends OP{constructor(e,n,r){super(function MP(t){return(Bw(t)?t.validators:t)||null}(n),function xP(t,e){return(Bw(e)?e.asyncValidators:t)||null}(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function Mz(t,e,n){t._forEachChild((r,i)=>{if(void 0===n[i])throw new ce(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function Nz(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new ce(1e3,"");if(!r[n])throw new ce(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const Of=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>jw}),jw="always";function zw(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function FP(t,e){const n=function wz(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(Iz(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function Tz(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(Iz(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const i=()=>t.updateValueAndValidity();zw(e._rawValidators,i),zw(e._rawAsyncValidators,i)}function xz(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const Ele={provide:Ni,useExisting:Zt(()=>qw)},g_=Promise.resolve();let qw=(()=>{class t extends Ni{get submitted(){return Do(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Gg(()=>this.submittedReactive()),this.submittedReactive=Yd(!1),this._directives=new Set,this.ngSubmit=new Xt,this.form=new kP({},AP(n),DP(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){g_.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),function p_(t,e,n=jw){FP(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function fle(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&xz(t,e)})}(t,e),function gle(t,e){const n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function ple(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&xz(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function hle(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){g_.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){g_.then(()=>{const r=this._findContainer(n.path),i=new kP({});(function Oz(t,e){FP(t,e)})(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){g_.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){g_.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),function kz(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static#e=this.\u0275fac=function(r){return new(r||t)(me(oi,10),me(nc,10),me(Of,8))};static#t=this.\u0275dir=tt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){1&r&&as("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Rn([Ele]),Yt]})}return t})();Promise.resolve();let Hz=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275dir=tt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return t})();const xle={provide:Go,useExisting:Zt(()=>HP),multi:!0};function Jz(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let HP=(()=>{class t extends Bl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const i=Jz(this._getOptionId(n),n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){const r=function Ole(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static#t=this.\u0275dir=tt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){1&r&&as("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rn([xle]),Yt]})}return t})(),Zz=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(Jz(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(me(rs),me(va),me(HP,9))};static#t=this.\u0275dir=tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})();const kle={provide:Go,useExisting:Zt(()=>zP),multi:!0};function Xz(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let zP=(()=>{class t extends Bl{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let r;if(this.value=n,Array.isArray(n)){const i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{const i=[],s=r.selectedOptions;if(void 0!==s){const o=s;for(let a=0;a<o.length;a++){const d=this._getOptionValue(o[a].value);i.push(d)}}else{const o=r.options;for(let a=0;a<o.length;a++){const u=o[a];if(u.selected){const d=this._getOptionValue(u.value);i.push(d)}}}this.value=i,n(i)}}_registerOption(n){const r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(const r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){const r=function Fle(t){return t.split(":")[0]}(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static#e=this.\u0275fac=(()=>{let n;return function(i){return(n||(n=er(t)))(i||t)}})();static#t=this.\u0275dir=tt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){1&r&&as("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Rn([kle]),Yt]})}return t})(),eG=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(Xz(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(Xz(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(r){return new(r||t)(me(rs),me(va),me(zP,9))};static#t=this.\u0275dir=tt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return t})(),Gle=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({})}return t})(),Wle=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Of,useValue:n.callSetDisabledState??jw}]}}static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({imports:[Gle]})}return t})();function Kle(t,e){if(1&t&&wi(0,"img",15),2&t){const n=mh();jr("src",n.translationService.getFlagUrl(n.translationService.selectedLanguage),sg)}}function Qle(t,e){if(1&t&&(Ze(0,"option",16),yt(1),Pn(2,"uppercase"),Qe()),2&t){const n=e.$implicit,r=mh();jr("value",n)("selected",n===r.translationService.selectedLanguage),Pt(),Sn(Nn(2,3,n))}}let Yle=(()=>{class t{constructor(n){this.translationService=n}changeLanguage(n){const r=n.target;r&&this.translationService.changeLanguage(r.value)}static#e=this.\u0275fac=function(r){return new(r||t)(me(nz))};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-header"]],decls:28,vars:17,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","d-flex","justify-content-between"],[1,"navbar-nav"],[1,"nav-item"],["routerLink","/",1,"nav-link"],["routerLink","/rooms",1,"nav-link"],["routerLink","/pictures",1,"nav-link"],["routerLink","/contact",1,"nav-link"],[1,"form-inline"],["for","language",1,"mr-2"],["alt","Flag","class","flag-icon",3,"src",4,"ngIf"],["id","language","name","language",1,"form-control",3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],["alt","Flag",1,"flag-icon",3,"src"],[3,"value","selected"]],template:function(r,i){1&r&&(Ze(0,"nav",0)(1,"button",1),wi(2,"span",2),Qe(),Ze(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),yt(7),Pn(8,"translate"),Qe()(),Ze(9,"li",5)(10,"a",7),yt(11),Pn(12,"translate"),Qe()(),Ze(13,"li",5)(14,"a",8),yt(15),Pn(16,"translate"),Qe()(),Ze(17,"li",5)(18,"a",9),yt(19),Pn(20,"translate"),Qe()()(),Ze(21,"form",10)(22,"label",11),yt(23),Pn(24,"translate"),Qe(),To(25,Kle,1,1,"img",12),Ze(26,"select",13),as("change",function(o){return i.changeLanguage(o)}),To(27,Qle,3,5,"option",14),Qe()()()()),2&r&&(Pt(7),Sn(Nn(8,7,"HOME.TITLE")),Pt(4),Sn(Nn(12,9,"ROOMS.TITLE")),Pt(4),Sn(Nn(16,11,"PICTURES.TITLE")),Pt(4),Sn(Nn(20,13,"CONTACT.TITLE")),Pt(4),_h("",Nn(24,15,"LANGUAGE"),":"),Pt(2),jr("ngIf",i.translationService.selectedLanguage),Pt(2),jr("ngForOf",i.translationService.languages))},dependencies:[ME,xE,mm,Hz,Zz,eG,Sz,qw,TV,sS],styles:['@charset "UTF-8";.navbar-nav[_ngcontent-%COMP%]{display:flex;gap:2rem;flex-grow:1;margin-left:2rem}.form-inline[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:auto;margin-right:1rem}.flag-icon[_ngcontent-%COMP%]{width:24px;height:16px;object-fit:contain;margin-right:1rem}.form-inline[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:.5rem}.navbar-collapse[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}']})}return t})(),Jle=(()=>{class t{constructor(n){this.translationService=n,this.title="flatWebEscaleritas"}changeLanguage(n){this.translationService.changeLanguage(n)}static#e=this.\u0275fac=function(r){return new(r||t)(me(nz))};static#t=this.\u0275cmp=ho({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&wi(0,"app-header")(1,"router-outlet")},dependencies:[IS,Yle]})}return t})();const lG_firebaseConfig={apiKey:"AIzaSyCnA1Ab6HMVZTMGq-WIYzc1bGGSQzMfHsk",authDomain:"flatwebescaleritas.firebaseapp.com",projectId:"flatwebescaleritas",storageBucket:"flatwebescaleritas.appspot.com",messagingSenderId:"408099038970",appId:"1:408099038970:web:903f7622571d30f48f8b43"};let Zle=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t});static#n=this.\u0275inj=ur({imports:[X2.initializeApp(lG_firebaseConfig),YB,tz,X2,YB,tz]})}return t})();function Xle(t){return new Aee(t)}let ede=(()=>{class t{static#e=this.\u0275fac=function(r){return new(r||t)};static#t=this.\u0275mod=gr({type:t,bootstrap:[Jle]});static#n=this.\u0275inj=ur({imports:[uX,Qce,Zle,Wle,iee,Cee.forRoot({loader:{provide:nm,useFactory:Xle,deps:[pU]}})]})}return t})();oX().bootstrapModule(ede).catch(t=>console.error(t))},345:(Ms,Cr,ct)=>{ct.d(Cr,{A:()=>ar});var b=ct(76),ke=ct(362),Me=ct(852),Z=ct(41);class Ut{constructor(nt,gt){this._delegate=nt,this.firebase=gt,(0,Me._addComponent)(nt,new ke.uA("app-compat",()=>this,"PUBLIC")),this.container=nt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this._delegate.automaticDataCollectionEnabled=nt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(nt=>{this._delegate.checkDestroyed(),nt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Me.deleteApp)(this._delegate)))}_getService(nt,gt=Me._DEFAULT_ENTRY_NAME){var Kn;this._delegate.checkDestroyed();const fr=this._delegate.container.getProvider(nt);return!fr.isInitialized()&&"EXPLICIT"===(null===(Kn=fr.getComponent())||void 0===Kn?void 0:Kn.instantiationMode)&&fr.initialize(),fr.getImmediate({identifier:gt})}_removeServiceInstance(nt,gt=Me._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(nt).clearInstance(gt)}_addComponent(nt){(0,Me._addComponent)(this._delegate,nt)}_addOrOverwriteComponent(nt){(0,Me._addOrOverwriteComponent)(this._delegate,nt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const wn=new b.FA("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),le=function Ft(){const kt=function Ar(kt){const nt={},gt={__esModule:!0,initializeApp:function rn(Ye,Tn={}){const cn=Me.initializeApp(Ye,Tn);if((0,b.gR)(nt,cn.name))return nt[cn.name];const he=new kt(cn,gt);return nt[cn.name]=he,he},app:fr,registerVersion:Me.registerVersion,setLogLevel:Me.setLogLevel,onLog:Me.onLog,apps:null,SDK_VERSION:Me.SDK_VERSION,INTERNAL:{registerComponent:function xt(Ye){const Tn=Ye.name,cn=Tn.replace("-compat","");if(Me._registerComponent(Ye)&&"PUBLIC"===Ye.type){const he=(ln=fr())=>{if("function"!=typeof ln[cn])throw wn.create("invalid-app-argument",{appName:Tn});return ln[cn]()};void 0!==Ye.serviceProps&&(0,b.zw)(he,Ye.serviceProps),gt[cn]=he,kt.prototype[cn]=function(...ln){return this._getService.bind(this,Tn).apply(this,Ye.multipleInstances?ln:[])}}return"PUBLIC"===Ye.type?gt[cn]:null},removeApp:function Kn(Ye){delete nt[Ye]},useAsService:function qr(Ye,Tn){return"serverAuth"===Tn?null:Tn},modularAPIs:Me}};function fr(Ye){if(!(0,b.gR)(nt,Ye=Ye||Me._DEFAULT_ENTRY_NAME))throw wn.create("no-app",{appName:Ye});return nt[Ye]}return gt.default=gt,Object.defineProperty(gt,"apps",{get:function Mt(){return Object.keys(nt).map(Ye=>nt[Ye])}}),fr.App=kt,gt}(Ut);return kt.INTERNAL=Object.assign(Object.assign({},kt.INTERNAL),{createFirebaseNamespace:Ft,extendNamespace:function nt(gt){(0,b.zw)(kt,gt)},createSubscribe:b.tD,ErrorFactory:b.FA,deepExtend:b.zw}),kt}(),_e=new Z.Vy("@firebase/app-compat");try{const kt=(0,b.mS)();if(void 0!==kt.firebase){_e.warn("\n      Warning: Firebase is already defined in the global scope. Please make sure\n      Firebase library is only loaded once.\n    ");const nt=kt.firebase.SDK_VERSION;nt&&nt.indexOf("LITE")>=0&&_e.warn("\n        Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n        ")}}catch{}const ar=le;!function Ct(kt){(0,Me.registerVersion)("@firebase/app-compat","0.2.39",kt)}()},852:(Ms,Cr,ct)=>{ct.r(Cr),ct.d(Cr,{FirebaseError:()=>Z.g,SDK_VERSION:()=>Ki,_DEFAULT_ENTRY_NAME:()=>hi,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>Ko,_apps:()=>fi,_clearComponents:()=>br,_components:()=>Kr,_getProvider:()=>ks,_isFirebaseApp:()=>ys,_isFirebaseServerApp:()=>dc,_registerComponent:()=>_s,_removeServiceInstance:()=>Fs,_serverApps:()=>Wi,deleteApp:()=>ro,getApp:()=>Jo,getApps:()=>Wt,initializeApp:()=>kr,initializeServerApp:()=>hc,onLog:()=>P,registerVersion:()=>N,setLogLevel:()=>L});var b=ct(467),ke=ct(362),Me=ct(41),Z=ct(76);const Ut=(Q,j)=>j.some(ae=>Q instanceof ae);let Ue,wn;const le=new WeakMap,_e=new WeakMap,Le=new WeakMap,pt=new WeakMap,Ct=new WeakMap;let nt={get(Q,j,ae){if(Q instanceof IDBTransaction){if("done"===j)return _e.get(Q);if("objectStoreNames"===j)return Q.objectStoreNames||Le.get(Q);if("store"===j)return ae.objectStoreNames[1]?void 0:ae.objectStore(ae.objectStoreNames[0])}return rn(Q[j])},set:(Q,j,ae)=>(Q[j]=ae,!0),has:(Q,j)=>Q instanceof IDBTransaction&&("done"===j||"store"===j)||j in Q};function fr(Q){return"function"==typeof Q?function Kn(Q){return Q!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ft(){return wn||(wn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Q)?function(...j){return Q.apply(Mt(this),j),rn(le.get(this))}:function(...j){return rn(Q.apply(Mt(this),j))}:function(j,...ae){const De=Q.call(Mt(this),j,...ae);return Le.set(De,j.sort?j.sort():[j]),rn(De)}}(Q):(Q instanceof IDBTransaction&&function kt(Q){if(_e.has(Q))return;const j=new Promise((ae,De)=>{const Xe=()=>{Q.removeEventListener("complete",ot),Q.removeEventListener("error",It),Q.removeEventListener("abort",It)},ot=()=>{ae(),Xe()},It=()=>{De(Q.error||new DOMException("AbortError","AbortError")),Xe()};Q.addEventListener("complete",ot),Q.addEventListener("error",It),Q.addEventListener("abort",It)});_e.set(Q,j)}(Q),Ut(Q,function Ar(){return Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Q,nt):Q)}function rn(Q){if(Q instanceof IDBRequest)return function ar(Q){const j=new Promise((ae,De)=>{const Xe=()=>{Q.removeEventListener("success",ot),Q.removeEventListener("error",It)},ot=()=>{ae(rn(Q.result)),Xe()},It=()=>{De(Q.error),Xe()};Q.addEventListener("success",ot),Q.addEventListener("error",It)});return j.then(ae=>{ae instanceof IDBCursor&&le.set(ae,Q)}).catch(()=>{}),Ct.set(j,Q),j}(Q);if(pt.has(Q))return pt.get(Q);const j=fr(Q);return j!==Q&&(pt.set(Q,j),Ct.set(j,Q)),j}const Mt=Q=>Ct.get(Q),Ye=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],cn=new Map;function he(Q,j){if(!(Q instanceof IDBDatabase)||j in Q||"string"!=typeof j)return;if(cn.get(j))return cn.get(j);const ae=j.replace(/FromIndex$/,""),De=j!==ae,Xe=Tn.includes(ae);if(!(ae in(De?IDBIndex:IDBObjectStore).prototype)||!Xe&&!Ye.includes(ae))return;const ot=function(){var It=(0,b.A)(function*(sn,...rt){const pi=this.transaction(sn,Xe?"readwrite":"readonly");let io=pi.store;return De&&(io=io.index(rt.shift())),(yield Promise.all([io[ae](...rt),Xe&&pi.done]))[0]});return function(rt){return It.apply(this,arguments)}}();return cn.set(j,ot),ot}!function gt(Q){nt=Q(nt)}(Q=>({...Q,get:(j,ae,De)=>he(j,ae)||Q.get(j,ae,De),has:(j,ae)=>!!he(j,ae)||Q.has(j,ae)}));class ln{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function Ln(Q){const j=Q.getComponent();return"VERSION"===j?.type}(ae)){const De=ae.getImmediate();return`${De.library}/${De.version}`}return null}).filter(ae=>ae).join(" ")}}const Wr="@firebase/app",gs="0.10.9",pr=new Me.Vy("@firebase/app"),qo="@firebase/app-compat",uc="@firebase/analytics-compat",W="@firebase/analytics",Y="@firebase/app-check-compat",se="@firebase/app-check",oe="@firebase/auth",Ee="@firebase/auth-compat",ue="@firebase/database",Ne="@firebase/database-compat",wt="@firebase/functions",Cn="@firebase/functions-compat",Je="@firebase/installations",Tt="@firebase/installations-compat",qt="@firebase/messaging",ms="@firebase/messaging-compat",qe="@firebase/performance",Hn="@firebase/performance-compat",An="@firebase/remote-config",Qn="@firebase/remote-config-compat",zt="@firebase/storage",Wo="@firebase/storage-compat",cc="@firebase/firestore",xs="@firebase/vertexai-preview",di="@firebase/firestore-compat",Os="firebase",hi="[DEFAULT]",lc={[Wr]:"fire-core",[qo]:"fire-core-compat",[W]:"fire-analytics",[uc]:"fire-analytics-compat",[se]:"fire-app-check",[Y]:"fire-app-check-compat",[oe]:"fire-auth",[Ee]:"fire-auth-compat",[ue]:"fire-rtdb",[Ne]:"fire-rtdb-compat",[wt]:"fire-fn",[Cn]:"fire-fn-compat",[Je]:"fire-iid",[Tt]:"fire-iid-compat",[qt]:"fire-fcm",[ms]:"fire-fcm-compat",[qe]:"fire-perf",[Hn]:"fire-perf-compat",[An]:"fire-rc",[Qn]:"fire-rc-compat",[zt]:"fire-gcs",[Wo]:"fire-gcs-compat",[cc]:"fire-fst",[di]:"fire-fst-compat",[xs]:"fire-vertex","fire-js":"fire-js",[Os]:"fire-js-all"},fi=new Map,Wi=new Map,Kr=new Map;function Dr(Q,j){try{Q.container.addComponent(j)}catch(ae){pr.debug(`Component ${j.name} failed to register with FirebaseApp ${Q.name}`,ae)}}function Ko(Q,j){Q.container.addOrOverwriteComponent(j)}function _s(Q){const j=Q.name;if(Kr.has(j))return pr.debug(`There were multiple attempts to register component ${j}.`),!1;Kr.set(j,Q);for(const ae of fi.values())Dr(ae,Q);for(const ae of Wi.values())Dr(ae,Q);return!0}function ks(Q,j){const ae=Q.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),Q.container.getProvider(j)}function Fs(Q,j,ae=hi){ks(Q,j).clearInstance(ae)}function ys(Q){return void 0!==Q.options}function dc(Q){return void 0!==Q.settings}function br(){Kr.clear()}const Or=new Z.FA("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Qo{constructor(j,ae,De){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=De,this.container.addComponent(new ke.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}}class Yo extends Qo{constructor(j,ae,De,Xe){const ot=void 0!==ae.automaticDataCollectionEnabled&&ae.automaticDataCollectionEnabled,It={name:De,automaticDataCollectionEnabled:ot};super(void 0!==j.apiKey?j:j.options,It,Xe),this._serverConfig=Object.assign({automaticDataCollectionEnabled:ot},ae),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,ae.releaseOnDeref=void 0,N(Wr,gs,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(j){this.isDeleted||(this._refCount++,void 0!==j&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(j,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ro(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Or.create("server-app-deleted")}}const Ki="10.13.0";function kr(Q,j={}){let ae=Q;"object"!=typeof j&&(j={name:j});const De=Object.assign({name:hi,automaticDataCollectionEnabled:!1},j),Xe=De.name;if("string"!=typeof Xe||!Xe)throw Or.create("bad-app-name",{appName:String(Xe)});if(ae||(ae=(0,Z.T9)()),!ae)throw Or.create("no-options");const ot=fi.get(Xe);if(ot){if((0,Z.bD)(ae,ot.options)&&(0,Z.bD)(De,ot.config))return ot;throw Or.create("duplicate-app",{appName:Xe})}const It=new ke.h1(Xe);for(const rt of Kr.values())It.addComponent(rt);const sn=new Qo(ae,De,It);return fi.set(Xe,sn),sn}function hc(Q,j){if((0,Z.Bd)()&&!(0,Z.p7)())throw Or.create("invalid-server-app-environment");let ae;void 0===j.automaticDataCollectionEnabled&&(j.automaticDataCollectionEnabled=!1),ae=ys(Q)?Q.options:Q;const De=Object.assign(Object.assign({},j),ae);if(void 0!==De.releaseOnDeref&&delete De.releaseOnDeref,void 0!==j.releaseOnDeref&&typeof FinalizationRegistry>"u")throw Or.create("finalization-registry-not-supported",{});const ot=""+(pi=JSON.stringify(De),[...pi].reduce((io,Kt)=>Math.imul(31,io)+Kt.charCodeAt(0)|0,0)),It=Wi.get(ot);var pi;if(It)return It.incRefCount(j.releaseOnDeref),It;const sn=new ke.h1(ot);for(const pi of Kr.values())sn.addComponent(pi);const rt=new Yo(ae,j,ot,sn);return Wi.set(ot,rt),rt}function Jo(Q=hi){const j=fi.get(Q);if(!j&&Q===hi&&(0,Z.T9)())return kr();if(!j)throw Or.create("no-app",{appName:Q});return j}function Wt(){return Array.from(fi.values())}function ro(Q){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,b.A)(function*(Q){let j=!1;const ae=Q.name;fi.has(ae)?(j=!0,fi.delete(ae)):Wi.has(ae)&&Q.decRefCount()<=0&&(Wi.delete(ae),j=!0),j&&(yield Promise.all(Q.container.getProviders().map(De=>De.delete())),Q.isDeleted=!0)})).apply(this,arguments)}function N(Q,j,ae){var De;let Xe=null!==(De=lc[Q])&&void 0!==De?De:Q;ae&&(Xe+=`-${ae}`);const ot=Xe.match(/\s|\//),It=j.match(/\s|\//);if(ot||It){const sn=[`Unable to register library "${Xe}" with version "${j}":`];return ot&&sn.push(`library name "${Xe}" contains illegal characters (whitespace or "/")`),ot&&It&&sn.push("and"),It&&sn.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void pr.warn(sn.join(" "))}_s(new ke.uA(`${Xe}-version`,()=>({library:Xe,version:j}),"VERSION"))}function P(Q,j){if(null!==Q&&"function"!=typeof Q)throw Or.create("invalid-log-argument");(0,Me.Ey)(Q,j)}function L(Q){(0,Me.He)(Q)}const ie="firebase-heartbeat-database",H=1,Se="firebase-heartbeat-store";let Fe=null;function $e(){return Fe||(Fe=function xt(Q,j,{blocked:ae,upgrade:De,blocking:Xe,terminated:ot}={}){const It=indexedDB.open(Q,j),sn=rn(It);return De&&It.addEventListener("upgradeneeded",rt=>{De(rn(It.result),rt.oldVersion,rt.newVersion,rn(It.transaction),rt)}),ae&&It.addEventListener("blocked",rt=>ae(rt.oldVersion,rt.newVersion,rt)),sn.then(rt=>{ot&&rt.addEventListener("close",()=>ot()),Xe&&rt.addEventListener("versionchange",pi=>Xe(pi.oldVersion,pi.newVersion,pi))}).catch(()=>{}),sn}(ie,H,{upgrade:(Q,j)=>{if(0===j)try{Q.createObjectStore(Se)}catch(ae){console.warn(ae)}}}).catch(Q=>{throw Or.create("idb-open",{originalErrorMessage:Q.message})})),Fe}function Pe(){return(Pe=(0,b.A)(function*(Q){try{const ae=(yield $e()).transaction(Se),De=yield ae.objectStore(Se).get(Sr(Q));return yield ae.done,De}catch(j){if(j instanceof Z.g)pr.warn(j.message);else{const ae=Or.create("idb-get",{originalErrorMessage:j?.message});pr.warn(ae.message)}}})).apply(this,arguments)}function Yn(Q,j){return at.apply(this,arguments)}function at(){return(at=(0,b.A)(function*(Q,j){try{const De=(yield $e()).transaction(Se,"readwrite");yield De.objectStore(Se).put(j,Sr(Q)),yield De.done}catch(ae){if(ae instanceof Z.g)pr.warn(ae.message);else{const De=Or.create("idb-set",{originalErrorMessage:ae?.message});pr.warn(De.message)}}})).apply(this,arguments)}function Sr(Q){return`${Q.name}!${Q.options.appId}`}class ja{constructor(j){this.container=j,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new Uf(ae),this._heartbeatsCachePromise=this._storage.read().then(De=>(this._heartbeatsCache=De,De))}triggerHeartbeat(){var j=this;return(0,b.A)(function*(){var ae,De,Xe;try{const It=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),sn=fc();return console.log("heartbeats",null===(ae=j._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats),null==(null===(De=j._heartbeatsCache)||void 0===De?void 0:De.heartbeats)&&(j._heartbeatsCache=yield j._heartbeatsCachePromise,null==(null===(Xe=j._heartbeatsCache)||void 0===Xe?void 0:Xe.heartbeats))||j._heartbeatsCache.lastSentHeartbeatDate===sn||j._heartbeatsCache.heartbeats.some(rt=>rt.date===sn)?void 0:(j._heartbeatsCache.heartbeats.push({date:sn,agent:It}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(rt=>{const pi=new Date(rt.date).valueOf();return Date.now()-pi<=2592e6}),j._storage.overwrite(j._heartbeatsCache))}catch(ot){pr.warn(ot)}})()}getHeartbeatsHeader(){var j=this;return(0,b.A)(function*(){var ae;try{if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null==(null===(ae=j._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||0===j._heartbeatsCache.heartbeats.length)return"";const De=fc(),{heartbeatsToSend:Xe,unsentEntries:ot}=function ea(Q,j=1024){const ae=[];let De=Q.slice();for(const Xe of Q){const ot=ae.find(It=>It.agent===Xe.agent);if(ot){if(ot.dates.push(Xe.date),He(ae)>j){ot.dates.pop();break}}else if(ae.push({agent:Xe.agent,dates:[Xe.date]}),He(ae)>j){ae.pop();break}De=De.slice(1)}return{heartbeatsToSend:ae,unsentEntries:De}}(j._heartbeatsCache.heartbeats),It=(0,Z.Uj)(JSON.stringify({version:2,heartbeats:Xe}));return j._heartbeatsCache.lastSentHeartbeatDate=De,ot.length>0?(j._heartbeatsCache.heartbeats=ot,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),It}catch(De){return pr.warn(De),""}})()}}function fc(){return(new Date).toISOString().substring(0,10)}class Uf{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,b.A)(function*(){return!!(0,Z.zW)()&&(0,Z.eX)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,b.A)(function*(){if(yield j._canUseIndexedDBPromise){const De=yield function Qr(Q){return Pe.apply(this,arguments)}(j.app);return De?.heartbeats?De:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(j){var ae=this;return(0,b.A)(function*(){var De;if(yield ae._canUseIndexedDBPromise){const ot=yield ae.read();return Yn(ae.app,{lastSentHeartbeatDate:null!==(De=j.lastSentHeartbeatDate)&&void 0!==De?De:ot.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var ae=this;return(0,b.A)(function*(){var De;if(yield ae._canUseIndexedDBPromise){const ot=yield ae.read();return Yn(ae.app,{lastSentHeartbeatDate:null!==(De=j.lastSentHeartbeatDate)&&void 0!==De?De:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...j.heartbeats]})}})()}}function He(Q){return(0,Z.Uj)(JSON.stringify({version:2,heartbeats:Q})).length}!function $a(Q){_s(new ke.uA("platform-logger",j=>new ln(j),"PRIVATE")),_s(new ke.uA("heartbeat",j=>new ja(j),"PRIVATE")),N(Wr,gs,Q),N(Wr,gs,"esm2017"),N("fire-js","")}("")},362:(Ms,Cr,ct)=>{ct.d(Cr,{h1:()=>Ar,uA:()=>Me});var b=ct(467),ke=ct(76);class Me{constructor(le,_e,Le){this.name=le,this.instanceFactory=_e,this.type=Le,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(le){return this.instantiationMode=le,this}setMultipleInstances(le){return this.multipleInstances=le,this}setServiceProps(le){return this.serviceProps=le,this}setInstanceCreatedCallback(le){return this.onInstanceCreated=le,this}}const Z="[DEFAULT]";class Ut{constructor(le,_e){this.name=le,this.container=_e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(le){const _e=this.normalizeInstanceIdentifier(le);if(!this.instancesDeferred.has(_e)){const Le=new ke.cY;if(this.instancesDeferred.set(_e,Le),this.isInitialized(_e)||this.shouldAutoInitialize())try{const pt=this.getOrInitializeService({instanceIdentifier:_e});pt&&Le.resolve(pt)}catch{}}return this.instancesDeferred.get(_e).promise}getImmediate(le){var _e;const Le=this.normalizeInstanceIdentifier(le?.identifier),pt=null!==(_e=le?.optional)&&void 0!==_e&&_e;if(!this.isInitialized(Le)&&!this.shouldAutoInitialize()){if(pt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Le})}catch(Ct){if(pt)return null;throw Ct}}getComponent(){return this.component}setComponent(le){if(le.name!==this.name)throw Error(`Mismatching Component ${le.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=le,this.shouldAutoInitialize()){if(function wn(Ft){return"EAGER"===Ft.instantiationMode}(le))try{this.getOrInitializeService({instanceIdentifier:Z})}catch{}for(const[_e,Le]of this.instancesDeferred.entries()){const pt=this.normalizeInstanceIdentifier(_e);try{const Ct=this.getOrInitializeService({instanceIdentifier:pt});Le.resolve(Ct)}catch{}}}}clearInstance(le=Z){this.instancesDeferred.delete(le),this.instancesOptions.delete(le),this.instances.delete(le)}delete(){var le=this;return(0,b.A)(function*(){const _e=Array.from(le.instances.values());yield Promise.all([..._e.filter(Le=>"INTERNAL"in Le).map(Le=>Le.INTERNAL.delete()),..._e.filter(Le=>"_delete"in Le).map(Le=>Le._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(le=Z){return this.instances.has(le)}getOptions(le=Z){return this.instancesOptions.get(le)||{}}initialize(le={}){const{options:_e={}}=le,Le=this.normalizeInstanceIdentifier(le.instanceIdentifier);if(this.isInitialized(Le))throw Error(`${this.name}(${Le}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pt=this.getOrInitializeService({instanceIdentifier:Le,options:_e});for(const[Ct,ar]of this.instancesDeferred.entries())Le===this.normalizeInstanceIdentifier(Ct)&&ar.resolve(pt);return pt}onInit(le,_e){var Le;const pt=this.normalizeInstanceIdentifier(_e),Ct=null!==(Le=this.onInitCallbacks.get(pt))&&void 0!==Le?Le:new Set;Ct.add(le),this.onInitCallbacks.set(pt,Ct);const ar=this.instances.get(pt);return ar&&le(ar,pt),()=>{Ct.delete(le)}}invokeOnInitCallbacks(le,_e){const Le=this.onInitCallbacks.get(_e);if(Le)for(const pt of Le)try{pt(le,_e)}catch{}}getOrInitializeService({instanceIdentifier:le,options:_e={}}){let Le=this.instances.get(le);if(!Le&&this.component&&(Le=this.component.instanceFactory(this.container,{instanceIdentifier:(Ft=le,Ft===Z?void 0:Ft),options:_e}),this.instances.set(le,Le),this.instancesOptions.set(le,_e),this.invokeOnInitCallbacks(Le,le),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,le,Le)}catch{}var Ft;return Le||null}normalizeInstanceIdentifier(le=Z){return this.component?this.component.multipleInstances?le:Z:le}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ar{constructor(le){this.name=le,this.providers=new Map}addComponent(le){const _e=this.getProvider(le.name);if(_e.isComponentSet())throw new Error(`Component ${le.name} has already been registered with ${this.name}`);_e.setComponent(le)}addOrOverwriteComponent(le){this.getProvider(le.name).isComponentSet()&&this.providers.delete(le.name),this.addComponent(le)}getProvider(le){if(this.providers.has(le))return this.providers.get(le);const _e=new Ut(le,this);return this.providers.set(le,_e),_e}getProviders(){return Array.from(this.providers.values())}}},41:(Ms,Cr,ct)=>{ct.d(Cr,{$b:()=>ke,Ey:()=>Ft,He:()=>Ar,Vy:()=>wn});const b=[];var ke=function(le){return le[le.DEBUG=0]="DEBUG",le[le.VERBOSE=1]="VERBOSE",le[le.INFO=2]="INFO",le[le.WARN=3]="WARN",le[le.ERROR=4]="ERROR",le[le.SILENT=5]="SILENT",le}(ke||{});const Me={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},Z=ke.INFO,Ut={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},Ue=(le,_e,...Le)=>{if(_e<le.logLevel)return;const pt=(new Date).toISOString(),Ct=Ut[_e];if(!Ct)throw new Error(`Attempted to log a message with an invalid logType (value: ${_e})`);console[Ct](`[${pt}]  ${le.name}:`,...Le)};class wn{constructor(_e){this.name=_e,this._logLevel=Z,this._logHandler=Ue,this._userLogHandler=null,b.push(this)}get logLevel(){return this._logLevel}set logLevel(_e){if(!(_e in ke))throw new TypeError(`Invalid value "${_e}" assigned to \`logLevel\``);this._logLevel=_e}setLogLevel(_e){this._logLevel="string"==typeof _e?Me[_e]:_e}get logHandler(){return this._logHandler}set logHandler(_e){if("function"!=typeof _e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=_e}get userLogHandler(){return this._userLogHandler}set userLogHandler(_e){this._userLogHandler=_e}debug(..._e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,..._e),this._logHandler(this,ke.DEBUG,..._e)}log(..._e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,..._e),this._logHandler(this,ke.VERBOSE,..._e)}info(..._e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,..._e),this._logHandler(this,ke.INFO,..._e)}warn(..._e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,..._e),this._logHandler(this,ke.WARN,..._e)}error(..._e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,..._e),this._logHandler(this,ke.ERROR,..._e)}}function Ar(le){b.forEach(_e=>{_e.setLogLevel(le)})}function Ft(le,_e){for(const Le of b){let pt=null;_e&&_e.level&&(pt=Me[_e.level]),Le.userLogHandler=null===le?null:(Ct,ar,...kt)=>{const nt=kt.map(gt=>{if(null==gt)return null;if("string"==typeof gt)return gt;if("number"==typeof gt||"boolean"==typeof gt)return gt.toString();if(gt instanceof Error)return gt.message;try{return JSON.stringify(gt)}catch{return null}}).filter(gt=>gt).join(" ");ar>=(pt??Ct.logLevel)&&le({level:ke[ar].toLowerCase(),message:nt,args:kt,type:Ct.name})}}}},982:(Ms,Cr,ct)=>{var b=ct(467),ke=ct(345),Me=ct(852),Z=ct(76),Ut=ct(41),Ue=ct(635),wn=ct(362);const Ft={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const ar=function pt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},kt=function Ct(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},nt=new Z.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Kn=new Ut.Vy("@firebase/auth");function rn(p,...c){Kn.logLevel<=Ut.$b.ERROR&&Kn.error(`Auth (${Me.SDK_VERSION}): ${p}`,...c)}function Mt(p,...c){throw cn(p,...c)}function xt(p,...c){return cn(p,...c)}function qr(p,c,l){const g=Object.assign(Object.assign({},kt()),{[c]:l});return new Z.FA("auth","Firebase",g).create(c,{appName:p.name})}function Ye(p){return qr(p,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tn(p,c,l){if(!(c instanceof l))throw l.name!==c.constructor.name&&Mt(p,"argument-error"),qr(p,"argument-error",`Type of ${c.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function cn(p,...c){if("string"!=typeof p){const l=c[0],g=[...c.slice(1)];return g[0]&&(g[0].appName=p.name),p._errorFactory.create(l,...g)}return nt.create(p,...c)}function he(p,c,...l){if(!p)throw cn(c,...l)}function ln(p){const c="INTERNAL ASSERTION FAILED: "+p;throw rn(c),new Error(c)}function Ln(p,c){p||ln(c)}function Wr(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.href)||""}function gs(){return"http:"===pr()||"https:"===pr()}function pr(){var p;return typeof self<"u"&&(null===(p=self.location)||void 0===p?void 0:p.protocol)||null}class W{constructor(c,l){this.shortDelay=c,this.longDelay=l,Ln(l>c,"Short delay should be less than long delay!"),this.isMobile=(0,Z.jZ)()||(0,Z.lV)()}get(){return function qo(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(gs()||(0,Z.sr)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Y(p,c){Ln(p.emulator,"Emulator should always be set here");const{url:l}=p.emulator;return c?`${l}${c.startsWith("/")?c.slice(1):c}`:l}class se{static initialize(c,l,g){this.fetchImpl=c,l&&(this.headersImpl=l),g&&(this.responseImpl=g)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Ee=new W(3e4,6e4);function ue(p,c){return p.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:p.tenantId}):c}function Ne(p,c,l,g){return wt.apply(this,arguments)}function wt(){return(wt=(0,b.A)(function*(p,c,l,g,v={}){return Cn(p,v,(0,b.A)(function*(){let w={},R={};g&&("GET"===c?R=g:w={body:JSON.stringify(g)});const B=(0,Z.Am)(Object.assign({key:p.config.apiKey},R)).slice(1),ne=yield p._getAdditionalHeaders();return ne["Content-Type"]="application/json",p.languageCode&&(ne["X-Firebase-Locale"]=p.languageCode),se.fetch()(ms(p,p.config.apiHost,l,B),Object.assign({method:c,headers:ne,referrerPolicy:"no-referrer"},w))}))})).apply(this,arguments)}function Cn(p,c,l){return Je.apply(this,arguments)}function Je(){return(Je=(0,b.A)(function*(p,c,l){p._canInitEmulator=!1;const g=Object.assign(Object.assign({},oe),c);try{const v=new Hn(p),w=yield Promise.race([l(),v.promise]);v.clearNetworkTimeout();const R=yield w.json();if("needConfirmation"in R)throw An(p,"account-exists-with-different-credential",R);if(w.ok&&!("errorMessage"in R))return R;{const B=w.ok?R.errorMessage:R.error.message,[ne,Ie]=B.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ne)throw An(p,"credential-already-in-use",R);if("EMAIL_EXISTS"===ne)throw An(p,"email-already-in-use",R);if("USER_DISABLED"===ne)throw An(p,"user-disabled",R);const Re=g[ne]||ne.toLowerCase().replace(/[_\s]+/g,"-");if(Ie)throw qr(p,Re,Ie);Mt(p,Re)}}catch(v){if(v instanceof Z.g)throw v;Mt(p,"network-request-failed",{message:String(v)})}})).apply(this,arguments)}function Tt(p,c,l,g){return qt.apply(this,arguments)}function qt(){return(qt=(0,b.A)(function*(p,c,l,g,v={}){const w=yield Ne(p,c,l,g,v);return"mfaPendingCredential"in w&&Mt(p,"multi-factor-auth-required",{_serverResponse:w}),w})).apply(this,arguments)}function ms(p,c,l,g){const v=`${c}${l}?${g}`;return p.config.emulator?Y(p.config,v):`${p.config.apiScheme}://${v}`}function qe(p){switch(p){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Hn{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((l,g)=>{this.timer=setTimeout(()=>g(xt(this.auth,"network-request-failed")),Ee.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function An(p,c,l){const g={appName:p.name};l.email&&(g.email=l.email),l.phoneNumber&&(g.phoneNumber=l.phoneNumber);const v=xt(p,c,g);return v.customData._tokenResponse=l,v}function Qn(p){return void 0!==p&&void 0!==p.getResponse}function zt(p){return void 0!==p&&void 0!==p.enterprise}class Wo{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===c.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const l of this.recaptchaEnforcementState)if(l.provider&&l.provider===c)return qe(l.enforcementState);return null}isProviderEnabled(c){return"ENFORCE"===this.getProviderEnforcementState(c)||"AUDIT"===this.getProviderEnforcementState(c)}}function xs(){return(xs=(0,b.A)(function*(p){return(yield Ne(p,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function di(p,c){return Os.apply(this,arguments)}function Os(){return(Os=(0,b.A)(function*(p,c){return Ne(p,"GET","/v2/recaptchaConfig",ue(p,c))})).apply(this,arguments)}function hi(){return(hi=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:delete",c)})).apply(this,arguments)}function fi(){return(fi=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function Wi(p,c){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:lookup",c)})).apply(this,arguments)}function Dr(p){if(p)try{const c=new Date(Number(p));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}function ks(){return(ks=(0,b.A)(function*(p,c=!1){const l=(0,Z.Ku)(p),g=yield l.getIdToken(c),v=ys(g);he(v&&v.exp&&v.auth_time&&v.iat,l.auth,"internal-error");const w="object"==typeof v.firebase?v.firebase:void 0,R=w?.sign_in_provider;return{claims:v,token:g,authTime:Dr(Fs(v.auth_time)),issuedAtTime:Dr(Fs(v.iat)),expirationTime:Dr(Fs(v.exp)),signInProvider:R||null,signInSecondFactor:w?.sign_in_second_factor||null}})).apply(this,arguments)}function Fs(p){return 1e3*Number(p)}function ys(p){const[c,l,g]=p.split(".");if(void 0===c||void 0===l||void 0===g)return rn("JWT malformed, contained fewer than 3 sections"),null;try{const v=(0,Z.u)(l);return v?JSON.parse(v):(rn("Failed to decode base64 JWT payload"),null)}catch(v){return rn("Caught error parsing JWT payload as JSON",v?.toString()),null}}function dc(p){const c=ys(p);return he(c,"internal-error"),he(typeof c.exp<"u","internal-error"),he(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}function br(p,c){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,b.A)(function*(p,c,l=!1){if(l)return c;try{return yield c}catch(g){throw g instanceof Z.g&&function Or({code:p}){return"auth/user-disabled"===p||"auth/user-token-expired"===p}(g)&&p.auth.currentUser===p&&(yield p.auth.signOut()),g}})).apply(this,arguments)}class Qo{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(c){var l;if(c){const g=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),g}{this.errorBackoff=3e4;const v=(null!==(l=this.user.stsTokenManager.expirationTime)&&void 0!==l?l:0)-Date.now()-3e5;return Math.max(0,v)}}schedule(c=!1){var l=this;if(!this.isRunning)return;const g=this.getInterval(c);this.timerId=setTimeout((0,b.A)(function*(){yield l.iteration()}),g)}iteration(){var c=this;return(0,b.A)(function*(){try{yield c.user.getIdToken(!0)}catch(l){return void("auth/network-request-failed"===l?.code&&c.schedule(!0))}c.schedule()})()}}class Yo{constructor(c,l){this.createdAt=c,this.lastLoginAt=l,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ki(p){return kr.apply(this,arguments)}function kr(){return(kr=(0,b.A)(function*(p){var c;const l=p.auth,g=yield p.getIdToken(),v=yield br(p,Wi(l,{idToken:g}));he(v?.users.length,l,"internal-error");const w=v.users[0];p._notifyReloadListener(w);const R=null!==(c=w.providerUserInfo)&&void 0!==c&&c.length?ro(w.providerUserInfo):[],B=function Wt(p,c){return[...p.filter(g=>!c.some(v=>v.providerId===g.providerId)),...c]}(p.providerData,R),Re=!!p.isAnonymous&&!(p.email&&w.passwordHash||B?.length),xe={uid:w.localId,displayName:w.displayName||null,photoURL:w.photoUrl||null,email:w.email||null,emailVerified:w.emailVerified||!1,phoneNumber:w.phoneNumber||null,tenantId:w.tenantId||null,providerData:B,metadata:new Yo(w.createdAt,w.lastLoginAt),isAnonymous:Re};Object.assign(p,xe)})).apply(this,arguments)}function Jo(){return(Jo=(0,b.A)(function*(p){const c=(0,Z.Ku)(p);yield Ki(c),yield c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)})).apply(this,arguments)}function ro(p){return p.map(c=>{var{providerId:l}=c,g=(0,Ue.Tt)(c,["providerId"]);return{providerId:l,uid:g.rawId||"",displayName:g.displayName||null,email:g.email||null,phoneNumber:g.phoneNumber||null,photoURL:g.photoUrl||null}})}function N(){return(N=(0,b.A)(function*(p,c){const l=yield Cn(p,{},(0,b.A)(function*(){const g=(0,Z.Am)({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:v,apiKey:w}=p.config,R=ms(p,v,"/v1/token",`key=${w}`),B=yield p._getAdditionalHeaders();return B["Content-Type"]="application/x-www-form-urlencoded",se.fetch()(R,{method:"POST",headers:B,body:g})}));return{accessToken:l.access_token,expiresIn:l.expires_in,refreshToken:l.refresh_token}})).apply(this,arguments)}function L(){return(L=(0,b.A)(function*(p,c){return Ne(p,"POST","/v2/accounts:revokeToken",ue(p,c))})).apply(this,arguments)}class ie{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){he(c.idToken,"internal-error"),he(typeof c.idToken<"u","internal-error"),he(typeof c.refreshToken<"u","internal-error");const l="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):dc(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,l)}updateFromIdToken(c){he(0!==c.length,"internal-error");const l=dc(c);this.updateTokensAndExpiration(c,null,l)}getToken(c,l=!1){var g=this;return(0,b.A)(function*(){return l||!g.accessToken||g.isExpired?(he(g.refreshToken,c,"user-token-expired"),g.refreshToken?(yield g.refresh(c,g.refreshToken),g.accessToken):null):g.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(c,l){var g=this;return(0,b.A)(function*(){const{accessToken:v,refreshToken:w,expiresIn:R}=yield function Zo(p,c){return N.apply(this,arguments)}(c,l);g.updateTokensAndExpiration(v,w,Number(R))})()}updateTokensAndExpiration(c,l,g){this.refreshToken=l||null,this.accessToken=c||null,this.expirationTime=Date.now()+1e3*g}static fromJSON(c,l){const{refreshToken:g,accessToken:v,expirationTime:w}=l,R=new ie;return g&&(he("string"==typeof g,"internal-error",{appName:c}),R.refreshToken=g),v&&(he("string"==typeof v,"internal-error",{appName:c}),R.accessToken=v),w&&(he("number"==typeof w,"internal-error",{appName:c}),R.expirationTime=w),R}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new ie,this.toJSON())}_performRefresh(){return ln("not implemented")}}function H(p,c){he("string"==typeof p||typeof p>"u","internal-error",{appName:c})}class Se{constructor(c){var{uid:l,auth:g,stsTokenManager:v}=c,w=(0,Ue.Tt)(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Qo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=l,this.auth=g,this.stsTokenManager=v,this.accessToken=v.accessToken,this.displayName=w.displayName||null,this.email=w.email||null,this.emailVerified=w.emailVerified||!1,this.phoneNumber=w.phoneNumber||null,this.photoURL=w.photoURL||null,this.isAnonymous=w.isAnonymous||!1,this.tenantId=w.tenantId||null,this.providerData=w.providerData?[...w.providerData]:[],this.metadata=new Yo(w.createdAt||void 0,w.lastLoginAt||void 0)}getIdToken(c){var l=this;return(0,b.A)(function*(){const g=yield br(l,l.stsTokenManager.getToken(l.auth,c));return he(g,l.auth,"internal-error"),l.accessToken!==g&&(l.accessToken=g,yield l.auth._persistUserIfCurrent(l),l.auth._notifyListenersIfCurrent(l)),g})()}getIdTokenResult(c){return function _s(p){return ks.apply(this,arguments)}(this,c)}reload(){return function hc(p){return Jo.apply(this,arguments)}(this)}_assign(c){this!==c&&(he(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(l=>Object.assign({},l)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const l=new Se(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return l.metadata._copy(this.metadata),l}_onReload(c){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(c,l=!1){var g=this;return(0,b.A)(function*(){let v=!1;c.idToken&&c.idToken!==g.stsTokenManager.accessToken&&(g.stsTokenManager.updateFromServerResponse(c),v=!0),l&&(yield Ki(g)),yield g.auth._persistUserIfCurrent(g),v&&g.auth._notifyListenersIfCurrent(g)})()}delete(){var c=this;return(0,b.A)(function*(){if((0,Me._isFirebaseServerApp)(c.auth.app))return Promise.reject(Ye(c.auth));const l=yield c.getIdToken();return yield br(c,function Ba(p,c){return hi.apply(this,arguments)}(c.auth,{idToken:l})),c.stsTokenManager.clearRefreshToken(),c.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,l){var g,v,w,R,B,ne,Ie,Re;const xe=null!==(g=l.displayName)&&void 0!==g?g:void 0,_n=null!==(v=l.email)&&void 0!==v?v:void 0,ns=null!==(w=l.phoneNumber)&&void 0!==w?w:void 0,xd=null!==(R=l.photoURL)&&void 0!==R?R:void 0,Wy=null!==(B=l.tenantId)&&void 0!==B?B:void 0,X=null!==(ne=l._redirectEventId)&&void 0!==ne?ne:void 0,lt=null!==(Ie=l.createdAt)&&void 0!==Ie?Ie:void 0,Ky=null!==(Re=l.lastLoginAt)&&void 0!==Re?Re:void 0,{uid:Bp,emailVerified:Lt,isAnonymous:jp,providerData:ha,stsTokenManager:Vi}=l;he(Bp&&Vi,c,"internal-error");const $p=ie.fromJSON(this.name,Vi);he("string"==typeof Bp,c,"internal-error"),H(xe,c.name),H(_n,c.name),he("boolean"==typeof Lt,c,"internal-error"),he("boolean"==typeof jp,c,"internal-error"),H(ns,c.name),H(xd,c.name),H(Wy,c.name),H(X,c.name),H(lt,c.name),H(Ky,c.name);const zc=new Se({uid:Bp,auth:c,email:_n,emailVerified:Lt,displayName:xe,isAnonymous:jp,photoURL:xd,phoneNumber:ns,tenantId:Wy,stsTokenManager:$p,createdAt:lt,lastLoginAt:Ky});return ha&&Array.isArray(ha)&&(zc.providerData=ha.map(Qy=>Object.assign({},Qy))),X&&(zc._redirectEventId=X),zc}static _fromIdTokenResponse(c,l,g=!1){return(0,b.A)(function*(){const v=new ie;v.updateFromServerResponse(l);const w=new Se({uid:l.localId,auth:c,stsTokenManager:v,isAnonymous:g});return yield Ki(w),w})()}static _fromGetAccountInfoResponse(c,l,g){return(0,b.A)(function*(){const v=l.users[0];he(void 0!==v.localId,"internal-error");const w=void 0!==v.providerUserInfo?ro(v.providerUserInfo):[],R=!(v.email&&v.passwordHash||w?.length),B=new ie;B.updateFromIdToken(g);const ne=new Se({uid:v.localId,auth:c,stsTokenManager:B,isAnonymous:R}),Ie={uid:v.localId,displayName:v.displayName||null,photoURL:v.photoUrl||null,email:v.email||null,emailVerified:v.emailVerified||!1,phoneNumber:v.phoneNumber||null,tenantId:v.tenantId||null,providerData:w,metadata:new Yo(v.createdAt,v.lastLoginAt),isAnonymous:!(v.email&&v.passwordHash||w?.length)};return Object.assign(ne,Ie),ne})()}}const Fe=new Map;function $e(p){Ln(p instanceof Function,"Expected a class definition");let c=Fe.get(p);return c?(Ln(c instanceof p,"Instance stored in cache mismatched with class"),c):(c=new p,Fe.set(p,c),c)}const Pe=(()=>{class p{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,b.A)(function*(){return!0})()}_set(l,g){var v=this;return(0,b.A)(function*(){v.storage[l]=g})()}_get(l){var g=this;return(0,b.A)(function*(){const v=g.storage[l];return void 0===v?null:v})()}_remove(l){var g=this;return(0,b.A)(function*(){delete g.storage[l]})()}_addListener(l,g){}_removeListener(l,g){}}return p.type="NONE",p})();function Yn(p,c,l){return`firebase:${p}:${c}:${l}`}class at{constructor(c,l,g){this.persistence=c,this.auth=l,this.userKey=g;const{config:v,name:w}=this.auth;this.fullUserKey=Yn(this.userKey,v.apiKey,w),this.fullPersistenceKey=Yn("persistence",v.apiKey,w),this.boundEventHandler=l._onStorageEvent.bind(l),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}getCurrentUser(){var c=this;return(0,b.A)(function*(){const l=yield c.persistence._get(c.fullUserKey);return l?Se._fromJSON(c.auth,l):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(c){var l=this;return(0,b.A)(function*(){if(l.persistence===c)return;const g=yield l.getCurrentUser();return yield l.removeCurrentUser(),l.persistence=c,g?l.setCurrentUser(g):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(c,l,g="authUser"){return(0,b.A)(function*(){if(!l.length)return new at($e(Pe),c,g);const v=(yield Promise.all(l.map(function(){var Ie=(0,b.A)(function*(Re){if(yield Re._isAvailable())return Re});return function(Re){return Ie.apply(this,arguments)}}()))).filter(Ie=>Ie);let w=v[0]||$e(Pe);const R=Yn(g,c.config.apiKey,c.name);let B=null;for(const Ie of l)try{const Re=yield Ie._get(R);if(Re){const xe=Se._fromJSON(c,Re);Ie!==w&&(B=xe),w=Ie;break}}catch{}const ne=v.filter(Ie=>Ie._shouldAllowMigration);return w._shouldAllowMigration&&ne.length?(w=ne[0],B&&(yield w._set(R,B.toJSON())),yield Promise.all(l.map(function(){var Ie=(0,b.A)(function*(Re){if(Re!==w)try{yield Re._remove(R)}catch{}});return function(Re){return Ie.apply(this,arguments)}}())),new at(w,c,g)):new at(w,c,g)})()}}function Sr(p){const c=p.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(fc(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(vs(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(Uf(c))return"Blackberry";if(He(c))return"Webos";if(Xo(c))return"Safari";if((c.includes("chrome/")||ja(c))&&!c.includes("edge/"))return"Chrome";if(ea(c))return"Android";{const g=p.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===g?.length)return g[1]}return"Other"}function vs(p=(0,Z.ZQ)()){return/firefox\//i.test(p)}function Xo(p=(0,Z.ZQ)()){const c=p.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function ja(p=(0,Z.ZQ)()){return/crios\//i.test(p)}function fc(p=(0,Z.ZQ)()){return/iemobile/i.test(p)}function ea(p=(0,Z.ZQ)()){return/android/i.test(p)}function Uf(p=(0,Z.ZQ)()){return/blackberry/i.test(p)}function He(p=(0,Z.ZQ)()){return/webos/i.test(p)}function $a(p=(0,Z.ZQ)()){return/iphone|ipad|ipod/i.test(p)||/macintosh/i.test(p)&&/mobile/i.test(p)}function De(p=(0,Z.ZQ)()){return $a(p)||ea(p)||He(p)||Uf(p)||/windows phone/i.test(p)||fc(p)}function Xe(p,c=[]){let l;switch(p){case"Browser":l=Sr((0,Z.ZQ)());break;case"Worker":l=`${Sr((0,Z.ZQ)())}-${p}`;break;default:l=p}const g=c.length?c.join(","):"FirebaseCore-web";return`${l}/JsCore/${Me.SDK_VERSION}/${g}`}class ot{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,l){const g=w=>new Promise((R,B)=>{try{R(c(w))}catch(ne){B(ne)}});g.onAbort=l,this.queue.push(g);const v=this.queue.length-1;return()=>{this.queue[v]=()=>Promise.resolve()}}runMiddleware(c){var l=this;return(0,b.A)(function*(){if(l.auth.currentUser===c)return;const g=[];try{for(const v of l.queue)yield v(c),v.onAbort&&g.push(v.onAbort)}catch(v){g.reverse();for(const w of g)try{w()}catch{}throw l.auth._errorFactory.create("login-blocked",{originalMessage:v?.message})}})()}}function sn(){return(sn=(0,b.A)(function*(p,c={}){return Ne(p,"GET","/v2/passwordPolicy",ue(p,c))})).apply(this,arguments)}class pi{constructor(c){var l,g,v,w;const R=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(l=R.minPasswordLength)&&void 0!==l?l:6,R.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=R.maxPasswordLength),void 0!==R.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=R.containsLowercaseCharacter),void 0!==R.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=R.containsUppercaseCharacter),void 0!==R.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=R.containsNumericCharacter),void 0!==R.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=R.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(v=null===(g=c.allowedNonAlphanumericCharacters)||void 0===g?void 0:g.join(""))&&void 0!==v?v:"",this.forceUpgradeOnSignin=null!==(w=c.forceUpgradeOnSignin)&&void 0!==w&&w,this.schemaVersion=c.schemaVersion}validatePassword(c){var l,g,v,w,R,B;const ne={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,ne),this.validatePasswordCharacterOptions(c,ne),ne.isValid&&(ne.isValid=null===(l=ne.meetsMinPasswordLength)||void 0===l||l),ne.isValid&&(ne.isValid=null===(g=ne.meetsMaxPasswordLength)||void 0===g||g),ne.isValid&&(ne.isValid=null===(v=ne.containsLowercaseLetter)||void 0===v||v),ne.isValid&&(ne.isValid=null===(w=ne.containsUppercaseLetter)||void 0===w||w),ne.isValid&&(ne.isValid=null===(R=ne.containsNumericCharacter)||void 0===R||R),ne.isValid&&(ne.isValid=null===(B=ne.containsNonAlphanumericCharacter)||void 0===B||B),ne}validatePasswordLengthOptions(c,l){const g=this.customStrengthOptions.minPasswordLength,v=this.customStrengthOptions.maxPasswordLength;g&&(l.meetsMinPasswordLength=c.length>=g),v&&(l.meetsMaxPasswordLength=c.length<=v)}validatePasswordCharacterOptions(c,l){let g;this.updatePasswordCharacterOptionsStatuses(l,!1,!1,!1,!1);for(let v=0;v<c.length;v++)g=c.charAt(v),this.updatePasswordCharacterOptionsStatuses(l,g>="a"&&g<="z",g>="A"&&g<="Z",g>="0"&&g<="9",this.allowedNonAlphanumericCharacters.includes(g))}updatePasswordCharacterOptionsStatuses(c,l,g,v,w){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=l)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=g)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=v)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=w))}}class io{constructor(c,l,g,v){this.app=c,this.heartbeatServiceProvider=l,this.appCheckServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lT(this),this.idTokenSubscription=new lT(this),this.beforeStateQueue=new ot(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(c,l){var g=this;return l&&(this._popupRedirectResolver=$e(l)),this._initializationPromise=this.queue((0,b.A)(function*(){var v,w;if(!g._deleted&&(g.persistenceManager=yield at.create(g,c),!g._deleted)){if(null!==(v=g._popupRedirectResolver)&&void 0!==v&&v._shouldInitProactively)try{yield g._popupRedirectResolver._initialize(g)}catch{}yield g.initializeCurrentUser(l),g.lastNotifiedUid=(null===(w=g.currentUser)||void 0===w?void 0:w.uid)||null,!g._deleted&&(g._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var c=this;return(0,b.A)(function*(){if(c._deleted)return;const l=yield c.assertedPersistence.getCurrentUser();if(c.currentUser||l){if(c.currentUser&&l&&c.currentUser.uid===l.uid)return c._currentUser._assign(l),void(yield c.currentUser.getIdToken());yield c._updateCurrentUser(l,!0)}})()}initializeCurrentUserFromIdToken(c){var l=this;return(0,b.A)(function*(){try{const g=yield Wi(l,{idToken:c}),v=yield Se._fromGetAccountInfoResponse(l,g,c);yield l.directlySetCurrentUser(v)}catch(g){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",g),yield l.directlySetCurrentUser(null)}})()}initializeCurrentUser(c){var l=this;return(0,b.A)(function*(){var g;if((0,Me._isFirebaseServerApp)(l.app)){const B=l.app.settings.authIdToken;return B?new Promise(ne=>{setTimeout(()=>l.initializeCurrentUserFromIdToken(B).then(ne,ne))}):l.directlySetCurrentUser(null)}const v=yield l.assertedPersistence.getCurrentUser();let w=v,R=!1;if(c&&l.config.authDomain){yield l.getOrInitRedirectPersistenceManager();const B=null===(g=l.redirectUser)||void 0===g?void 0:g._redirectEventId,ne=w?._redirectEventId,Ie=yield l.tryRedirectSignIn(c);(!B||B===ne)&&Ie?.user&&(w=Ie.user,R=!0)}if(!w)return l.directlySetCurrentUser(null);if(!w._redirectEventId){if(R)try{yield l.beforeStateQueue.runMiddleware(w)}catch(B){w=v,l._popupRedirectResolver._overrideRedirectResult(l,()=>Promise.reject(B))}return w?l.reloadAndSetCurrentUserOrClear(w):l.directlySetCurrentUser(null)}return he(l._popupRedirectResolver,l,"argument-error"),yield l.getOrInitRedirectPersistenceManager(),l.redirectUser&&l.redirectUser._redirectEventId===w._redirectEventId?l.directlySetCurrentUser(w):l.reloadAndSetCurrentUserOrClear(w)})()}tryRedirectSignIn(c){var l=this;return(0,b.A)(function*(){let g=null;try{g=yield l._popupRedirectResolver._completeRedirectFn(l,c,!0)}catch{yield l._setRedirectUser(null)}return g})()}reloadAndSetCurrentUserOrClear(c){var l=this;return(0,b.A)(function*(){try{yield Ki(c)}catch(g){if("auth/network-request-failed"!==g?.code)return l.directlySetCurrentUser(null)}return l.directlySetCurrentUser(c)})()}useDeviceLanguage(){this.languageCode=function uc(){if(typeof navigator>"u")return null;const p=navigator;return p.languages&&p.languages[0]||p.language||null}()}_delete(){var c=this;return(0,b.A)(function*(){c._deleted=!0})()}updateCurrentUser(c){var l=this;return(0,b.A)(function*(){if((0,Me._isFirebaseServerApp)(l.app))return Promise.reject(Ye(l));const g=c?(0,Z.Ku)(c):null;return g&&he(g.auth.config.apiKey===l.config.apiKey,l,"invalid-user-token"),l._updateCurrentUser(g&&g._clone(l))})()}_updateCurrentUser(c,l=!1){var g=this;return(0,b.A)(function*(){if(!g._deleted)return c&&he(g.tenantId===c.tenantId,g,"tenant-id-mismatch"),l||(yield g.beforeStateQueue.runMiddleware(c)),g.queue((0,b.A)(function*(){yield g.directlySetCurrentUser(c),g.notifyAuthListeners()}))})()}signOut(){var c=this;return(0,b.A)(function*(){return(0,Me._isFirebaseServerApp)(c.app)?Promise.reject(Ye(c)):(yield c.beforeStateQueue.runMiddleware(null),(c.redirectPersistenceManager||c._popupRedirectResolver)&&(yield c._setRedirectUser(null)),c._updateCurrentUser(null,!0))})()}setPersistence(c){var l=this;return(0,Me._isFirebaseServerApp)(this.app)?Promise.reject(Ye(this)):this.queue((0,b.A)(function*(){yield l.assertedPersistence.setPersistence($e(c))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(c){var l=this;return(0,b.A)(function*(){l._getPasswordPolicyInternal()||(yield l._updatePasswordPolicy());const g=l._getPasswordPolicyInternal();return g.schemaVersion!==l.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(l._errorFactory.create("unsupported-password-policy-schema-version",{})):g.validatePassword(c)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var c=this;return(0,b.A)(function*(){const l=yield function It(p){return sn.apply(this,arguments)}(c),g=new pi(l);null===c.tenantId?c._projectPasswordPolicy=g:c._tenantPasswordPolicies[c.tenantId]=g})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Z.FA("auth","Firebase",c())}onAuthStateChanged(c,l,g){return this.registerStateListener(this.authStateSubscription,c,l,g)}beforeAuthStateChanged(c,l){return this.beforeStateQueue.pushCallback(c,l)}onIdTokenChanged(c,l,g){return this.registerStateListener(this.idTokenSubscription,c,l,g)}authStateReady(){return new Promise((c,l)=>{if(this.currentUser)c();else{const g=this.onAuthStateChanged(()=>{g(),c()},l)}})}revokeAccessToken(c){var l=this;return(0,b.A)(function*(){if(l.currentUser){const g=yield l.currentUser.getIdToken(),v={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:g};null!=l.tenantId&&(v.tenantId=l.tenantId),yield function P(p,c){return L.apply(this,arguments)}(l,v)}})()}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(c=this._currentUser)||void 0===c?void 0:c.toJSON()}}_setRedirectUser(c,l){var g=this;return(0,b.A)(function*(){const v=yield g.getOrInitRedirectPersistenceManager(l);return null===c?v.removeCurrentUser():v.setCurrentUser(c)})()}getOrInitRedirectPersistenceManager(c){var l=this;return(0,b.A)(function*(){if(!l.redirectPersistenceManager){const g=c&&$e(c)||l._popupRedirectResolver;he(g,l,"argument-error"),l.redirectPersistenceManager=yield at.create(l,[$e(g._redirectPersistence)],"redirectUser"),l.redirectUser=yield l.redirectPersistenceManager.getCurrentUser()}return l.redirectPersistenceManager})()}_redirectUserForId(c){var l=this;return(0,b.A)(function*(){var g,v;return l._isInitialized&&(yield l.queue((0,b.A)(function*(){}))),(null===(g=l._currentUser)||void 0===g?void 0:g._redirectEventId)===c?l._currentUser:(null===(v=l.redirectUser)||void 0===v?void 0:v._redirectEventId)===c?l.redirectUser:null})()}_persistUserIfCurrent(c){var l=this;return(0,b.A)(function*(){if(c===l.currentUser)return l.queue((0,b.A)(function*(){return l.directlySetCurrentUser(c)}))})()}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,l;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const g=null!==(l=null===(c=this.currentUser)||void 0===c?void 0:c.uid)&&void 0!==l?l:null;this.lastNotifiedUid!==g&&(this.lastNotifiedUid=g,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,l,g,v){if(this._deleted)return()=>{};const w="function"==typeof l?l:l.next.bind(l);let R=!1;const B=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(B,this,"internal-error"),B.then(()=>{R||w(this.currentUser)}),"function"==typeof l){const ne=c.addObserver(l,g,v);return()=>{R=!0,ne()}}{const ne=c.addObserver(l);return()=>{R=!0,ne()}}}directlySetCurrentUser(c){var l=this;return(0,b.A)(function*(){l.currentUser&&l.currentUser!==c&&l._currentUser._stopProactiveRefresh(),c&&l.isProactiveRefreshEnabled&&c._startProactiveRefresh(),l.currentUser=c,c?yield l.assertedPersistence.setCurrentUser(c):yield l.assertedPersistence.removeCurrentUser()})()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=Xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var c=this;return(0,b.A)(function*(){var l;const g={"X-Client-Version":c.clientVersion};c.app.options.appId&&(g["X-Firebase-gmpid"]=c.app.options.appId);const v=yield null===(l=c.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getHeartbeatsHeader();v&&(g["X-Firebase-Client"]=v);const w=yield c._getAppCheckToken();return w&&(g["X-Firebase-AppCheck"]=w),g})()}_getAppCheckToken(){var c=this;return(0,b.A)(function*(){var l;const g=yield null===(l=c.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===l?void 0:l.getToken();return g?.error&&function fr(p,...c){Kn.logLevel<=Ut.$b.WARN&&Kn.warn(`Auth (${Me.SDK_VERSION}): ${p}`,...c)}(`Error while retrieving App Check token: ${g.error}`),g?.token})()}}function Kt(p){return(0,Z.Ku)(p)}class lT{constructor(c){this.auth=c,this.observer=null,this.addObserver=(0,Z.tD)(l=>this.observer=l)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let pc={loadJS:()=>(0,b.A)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gc(p){return pc.loadJS(p)}function pT(p){return`__${p}${Math.floor(1e6*Math.random())}`}class k_{constructor(c){this.type="recaptcha-enterprise",this.auth=Kt(c)}verify(c="verify",l=!1){var g=this;return(0,b.A)(function*(){function w(){return w=(0,b.A)(function*(B){if(!l){if(null==B.tenantId&&null!=B._agentRecaptchaConfig)return B._agentRecaptchaConfig.siteKey;if(null!=B.tenantId&&void 0!==B._tenantRecaptchaConfigs[B.tenantId])return B._tenantRecaptchaConfigs[B.tenantId].siteKey}return new Promise(function(){var ne=(0,b.A)(function*(Ie,Re){di(B,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(xe=>{if(void 0!==xe.recaptchaKey){const _n=new Wo(xe);return null==B.tenantId?B._agentRecaptchaConfig=_n:B._tenantRecaptchaConfigs[B.tenantId]=_n,Ie(_n.siteKey)}Re(new Error("recaptcha Enterprise site key undefined"))}).catch(xe=>{Re(xe)})});return function(Ie,Re){return ne.apply(this,arguments)}}())}),w.apply(this,arguments)}function R(B,ne,Ie){const Re=window.grecaptcha;zt(Re)?Re.enterprise.ready(()=>{Re.enterprise.execute(B,{action:c}).then(xe=>{ne(xe)}).catch(()=>{ne("NO_RECAPTCHA")})}):Ie(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((B,ne)=>{(function v(B){return w.apply(this,arguments)})(g.auth).then(Ie=>{if(!l&&zt(window.grecaptcha))R(Ie,B,ne);else{if(typeof window>"u")return void ne(new Error("RecaptchaVerifier is only supported in browser"));let Re=function hT(){return pc.recaptchaEnterpriseScript}();0!==Re.length&&(Re+=Ie),gc(Re).then(()=>{R(Ie,B,ne)}).catch(xe=>{ne(xe)})}}).catch(Ie=>{ne(Ie)})})})()}}function mT(p,c,l){return F_.apply(this,arguments)}function F_(){return(F_=(0,b.A)(function*(p,c,l,g=!1){const v=new k_(p);let w;try{w=yield v.verify(l)}catch{w=yield v.verify(l,!0)}const R=Object.assign({},c);return Object.assign(R,g?{captchaResp:w}:{captchaResponse:w}),Object.assign(R,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(R,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),R})).apply(this,arguments)}function mc(p,c,l,g){return jf.apply(this,arguments)}function jf(){return jf=(0,b.A)(function*(p,c,l,g){var v;if(null!==(v=p._getRecaptchaConfig())&&void 0!==v&&v.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const w=yield mT(p,c,l,"getOobCode"===l);return g(p,w)}return g(p,c).catch(function(){var w=(0,b.A)(function*(R){if("auth/missing-recaptcha-token"===R.code){console.log(`${l} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const B=yield mT(p,c,l,"getOobCode"===l);return g(p,B)}return Promise.reject(R)});return function(R){return w.apply(this,arguments)}}())}),jf.apply(this,arguments)}function ET(p){const c=p.indexOf(":");return c<0?"":p.substr(0,c+1)}function U_(p){if(!p)return null;const c=Number(p);return isNaN(c)?null:c}class ta{constructor(c,l){this.providerId=c,this.signInMethod=l}toJSON(){return ln("not implemented")}_getIdTokenResponse(c){return ln("not implemented")}_linkToIdToken(c,l){return ln("not implemented")}_getReauthenticationResolver(c){return ln("not implemented")}}function $f(p,c){return ql.apply(this,arguments)}function ql(){return(ql=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:resetPassword",ue(p,c))})).apply(this,arguments)}function Hf(){return(Hf=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function CT(p,c){return zf.apply(this,arguments)}function zf(){return(zf=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:signUp",c)})).apply(this,arguments)}function B_(){return(B_=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:update",ue(p,c))})).apply(this,arguments)}function DT(p,c){return j_.apply(this,arguments)}function j_(){return(j_=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithPassword",ue(p,c))})).apply(this,arguments)}function Wl(p,c){return Es.apply(this,arguments)}function Es(){return(Es=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:sendOobCode",ue(p,c))})).apply(this,arguments)}function Ha(){return(Ha=(0,b.A)(function*(p,c){return Wl(p,c)})).apply(this,arguments)}function H_(p,c){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,b.A)(function*(p,c){return Wl(p,c)})).apply(this,arguments)}function z_(p,c){return Ql.apply(this,arguments)}function Ql(){return(Ql=(0,b.A)(function*(p,c){return Wl(p,c)})).apply(this,arguments)}function Gf(){return(Gf=(0,b.A)(function*(p,c){return Wl(p,c)})).apply(this,arguments)}function za(){return(za=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,c))})).apply(this,arguments)}function _c(){return(_c=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithEmailLink",ue(p,c))})).apply(this,arguments)}class Yl extends ta{constructor(c,l,g,v=null){super("password",g),this._email=c,this._password=l,this._tenantId=v}static _fromEmailAndPassword(c,l){return new Yl(c,l,"password")}static _fromEmailAndCode(c,l,g=null){return new Yl(c,l,"emailLink",g)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c;if(l?.email&&l?.password){if("password"===l.signInMethod)return this._fromEmailAndPassword(l.email,l.password);if("emailLink"===l.signInMethod)return this._fromEmailAndCode(l.email,l.password,l.tenantId)}return null}_getIdTokenResponse(c){var l=this;return(0,b.A)(function*(){switch(l.signInMethod){case"password":return mc(c,{returnSecureToken:!0,email:l._email,password:l._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",DT);case"emailLink":return function ST(p,c){return za.apply(this,arguments)}(c,{email:l._email,oobCode:l._password});default:Mt(c,"internal-error")}})()}_linkToIdToken(c,l){var g=this;return(0,b.A)(function*(){switch(g.signInMethod){case"password":return mc(c,{idToken:l,returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CT);case"emailLink":return function G_(p,c){return _c.apply(this,arguments)}(c,{idToken:l,email:g._email,oobCode:g._password});default:Mt(c,"internal-error")}})()}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}function Oi(p,c){return qf.apply(this,arguments)}function qf(){return(qf=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithIdp",ue(p,c))})).apply(this,arguments)}class Vs extends ta{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const l=new Vs(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(l.idToken=c.idToken),c.accessToken&&(l.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(l.nonce=c.nonce),c.pendingToken&&(l.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(l.accessToken=c.oauthToken,l.secret=c.oauthTokenSecret):Mt("argument-error"),l}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v}=l,w=(0,Ue.Tt)(l,["providerId","signInMethod"]);if(!g||!v)return null;const R=new Vs(g,v);return R.idToken=w.idToken||void 0,R.accessToken=w.accessToken||void 0,R.secret=w.secret,R.nonce=w.nonce,R.pendingToken=w.pendingToken||null,R}_getIdTokenResponse(c){return Oi(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,Oi(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Oi(c,l)}buildRequest(){const c={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const l={};this.idToken&&(l.id_token=this.idToken),this.accessToken&&(l.access_token=this.accessToken),this.secret&&(l.oauth_token_secret=this.secret),l.providerId=this.providerId,this.nonce&&!this.pendingToken&&(l.nonce=this.nonce),c.postBody=(0,Z.Am)(l)}return c}}function Jl(){return(Jl=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:sendVerificationCode",ue(p,c))})).apply(this,arguments)}function Wf(){return(Wf=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,c))})).apply(this,arguments)}function W_(){return(W_=(0,b.A)(function*(p,c){const l=yield Tt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,c));if(l.temporaryProof)throw An(p,"account-exists-with-different-credential",l);return l})).apply(this,arguments)}const Kf={USER_NOT_FOUND:"user-not-found"};function Qf(){return(Qf=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithPhoneNumber",ue(p,Object.assign(Object.assign({},c),{operation:"REAUTH"})),Kf)})).apply(this,arguments)}class na extends ta{constructor(c){super("phone","phone"),this.params=c}static _fromVerification(c,l){return new na({verificationId:c,verificationCode:l})}static _fromTokenResponse(c,l){return new na({phoneNumber:c,temporaryProof:l})}_getIdTokenResponse(c){return function q_(p,c){return Wf.apply(this,arguments)}(c,this._makeVerificationRequest())}_linkToIdToken(c,l){return function PT(p,c){return W_.apply(this,arguments)}(c,Object.assign({idToken:l},this._makeVerificationRequest()))}_getReauthenticationResolver(c){return function NT(p,c){return Qf.apply(this,arguments)}(c,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:c,phoneNumber:l,verificationId:g,verificationCode:v}=this.params;return c&&l?{temporaryProof:c,phoneNumber:l}:{sessionInfo:g,code:v}}toJSON(){const c={providerId:this.providerId};return this.params.phoneNumber&&(c.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(c.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(c.verificationCode=this.params.verificationCode),this.params.verificationId&&(c.verificationId=this.params.verificationId),c}static fromJSON(c){"string"==typeof c&&(c=JSON.parse(c));const{verificationId:l,verificationCode:g,phoneNumber:v,temporaryProof:w}=c;return g||l||v||w?new na({verificationId:l,verificationCode:g,phoneNumber:v,temporaryProof:w}):null}}class yc{constructor(c){var l,g,v,w,R,B;const ne=(0,Z.I9)((0,Z.hp)(c)),Ie=null!==(l=ne.apiKey)&&void 0!==l?l:null,Re=null!==(g=ne.oobCode)&&void 0!==g?g:null,xe=function MT(p){switch(p){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(v=ne.mode)&&void 0!==v?v:null);he(Ie&&Re&&xe,"argument-error"),this.apiKey=Ie,this.operation=xe,this.code=Re,this.continueUrl=null!==(w=ne.continueUrl)&&void 0!==w?w:null,this.languageCode=null!==(R=ne.languageCode)&&void 0!==R?R:null,this.tenantId=null!==(B=ne.tenantId)&&void 0!==B?B:null}static parseLink(c){const l=function Yf(p){const c=(0,Z.I9)((0,Z.hp)(p)).link,l=c?(0,Z.I9)((0,Z.hp)(c)).deep_link_id:null,g=(0,Z.I9)((0,Z.hp)(p)).deep_link_id;return(g?(0,Z.I9)((0,Z.hp)(g)).link:null)||g||l||c||p}(c);try{return new yc(l)}catch{return null}}}let Jf=(()=>{class p{constructor(){this.providerId=p.PROVIDER_ID}static credential(l,g){return Yl._fromEmailAndPassword(l,g)}static credentialWithLink(l,g){const v=yc.parseLink(g);return he(v,"argument-error"),Yl._fromEmailAndCode(l,v.code,v.tenantId)}}return p.PROVIDER_ID="password",p.EMAIL_PASSWORD_SIGN_IN_METHOD="password",p.EMAIL_LINK_SIGN_IN_METHOD="emailLink",p})();class so{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}class ra extends so{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}class Ga extends ra{static credentialFromJSON(c){const l="string"==typeof c?JSON.parse(c):c;return he("providerId"in l&&"signInMethod"in l,"argument-error"),Vs._fromParams(l)}credential(c){return this._credential(Object.assign(Object.assign({},c),{nonce:c.rawNonce}))}_credential(c){return he(c.idToken||c.accessToken,"argument-error"),Vs._fromParams(Object.assign(Object.assign({},c),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(c){return Ga.oauthCredentialFromTaggedObject(c)}static credentialFromError(c){return Ga.oauthCredentialFromTaggedObject(c.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:l,oauthAccessToken:g,oauthTokenSecret:v,pendingToken:w,nonce:R,providerId:B}=c;if(!g&&!v&&!l&&!w||!B)return null;try{return new Ga(B)._credential({idToken:l,accessToken:g,nonce:R,pendingToken:w})}catch{return null}}}let xT=(()=>{class p extends ra{constructor(){super("facebook.com")}static credential(l){return Vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.FACEBOOK_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return p.credentialFromTaggedObject(l)}static credentialFromError(l){return p.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return p.credential(l.oauthAccessToken)}catch{return null}}}return p.FACEBOOK_SIGN_IN_METHOD="facebook.com",p.PROVIDER_ID="facebook.com",p})(),K_=(()=>{class p extends ra{constructor(){super("google.com"),this.addScope("profile")}static credential(l,g){return Vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GOOGLE_SIGN_IN_METHOD,idToken:l,accessToken:g})}static credentialFromResult(l){return p.credentialFromTaggedObject(l)}static credentialFromError(l){return p.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthIdToken:g,oauthAccessToken:v}=l;if(!g&&!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.GOOGLE_SIGN_IN_METHOD="google.com",p.PROVIDER_ID="google.com",p})(),OT=(()=>{class p extends ra{constructor(){super("github.com")}static credential(l){return Vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.GITHUB_SIGN_IN_METHOD,accessToken:l})}static credentialFromResult(l){return p.credentialFromTaggedObject(l)}static credentialFromError(l){return p.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l||!("oauthAccessToken"in l)||!l.oauthAccessToken)return null;try{return p.credential(l.oauthAccessToken)}catch{return null}}}return p.GITHUB_SIGN_IN_METHOD="github.com",p.PROVIDER_ID="github.com",p})();class vc extends ta{constructor(c,l){super(c,c),this.pendingToken=l}_getIdTokenResponse(c){return Oi(c,this.buildRequest())}_linkToIdToken(c,l){const g=this.buildRequest();return g.idToken=l,Oi(c,g)}_getReauthenticationResolver(c){const l=this.buildRequest();return l.autoCreate=!1,Oi(c,l)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(c){const l="string"==typeof c?JSON.parse(c):c,{providerId:g,signInMethod:v,pendingToken:w}=l;return g&&v&&w&&g===v?new vc(g,w):null}static _create(c,l){return new vc(c,l)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Zl extends so{constructor(c){he(c.startsWith("saml."),"argument-error"),super(c)}static credentialFromResult(c){return Zl.samlCredentialFromTaggedObject(c)}static credentialFromError(c){return Zl.samlCredentialFromTaggedObject(c.customData||{})}static credentialFromJSON(c){const l=vc.fromJSON(c);return he(l,"argument-error"),l}static samlCredentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{pendingToken:l,providerId:g}=c;if(!l||!g)return null;try{return vc._create(g,l)}catch{return null}}}let Q_=(()=>{class p extends ra{constructor(){super("twitter.com")}static credential(l,g){return Vs._fromParams({providerId:p.PROVIDER_ID,signInMethod:p.TWITTER_SIGN_IN_METHOD,oauthToken:l,oauthTokenSecret:g})}static credentialFromResult(l){return p.credentialFromTaggedObject(l)}static credentialFromError(l){return p.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{oauthAccessToken:g,oauthTokenSecret:v}=l;if(!g||!v)return null;try{return p.credential(g,v)}catch{return null}}}return p.TWITTER_SIGN_IN_METHOD="twitter.com",p.PROVIDER_ID="twitter.com",p})();function Y_(p,c){return Us.apply(this,arguments)}function Us(){return(Us=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signUp",ue(p,c))})).apply(this,arguments)}class Qi{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static _fromIdTokenResponse(c,l,g,v=!1){return(0,b.A)(function*(){const w=yield Se._fromIdTokenResponse(c,g,v),R=LT(g);return new Qi({user:w,providerId:R,_tokenResponse:g,operationType:l})})()}static _forOperation(c,l,g){return(0,b.A)(function*(){yield c._updateTokensIfNecessary(g,!0);const v=LT(g);return new Qi({user:c,providerId:v,_tokenResponse:g,operationType:l})})()}}function LT(p){return p.providerId?p.providerId:"phoneNumber"in p?"phone":null}function Ec(){return(Ec=(0,b.A)(function*(p){var c;if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const l=Kt(p);if(yield l._initializationPromise,null!==(c=l.currentUser)&&void 0!==c&&c.isAnonymous)return new Qi({user:l.currentUser,providerId:null,operationType:"signIn"});const g=yield Y_(l,{returnSecureToken:!0}),v=yield Qi._fromIdTokenResponse(l,"signIn",g,!0);return yield l._updateCurrentUser(v.user),v})).apply(this,arguments)}class Xl extends Z.g{constructor(c,l,g,v){var w;super(l.code,l.message),this.operationType=g,this.user=v,Object.setPrototypeOf(this,Xl.prototype),this.customData={appName:c.name,tenantId:null!==(w=c.tenantId)&&void 0!==w?w:void 0,_serverResponse:l.customData._serverResponse,operationType:g}}static _fromErrorAndOperation(c,l,g,v){return new Xl(c,l,g,v)}}function Z_(p,c,l,g){return("reauthenticate"===c?l._getReauthenticationResolver(p):l._getIdTokenResponse(p)).catch(w=>{throw"auth/multi-factor-auth-required"===w.code?Xl._fromErrorAndOperation(p,w,c,g):w})}function X_(p){return new Set(p.map(({providerId:c})=>c).filter(c=>!!c))}function ty(){return ty=(0,b.A)(function*(p,c){const l=(0,Z.Ku)(p);yield Zf(!0,l,c);const{providerUserInfo:g}=yield function lc(p,c){return fi.apply(this,arguments)}(l.auth,{idToken:yield l.getIdToken(),deleteProvider:[c]}),v=X_(g||[]);return l.providerData=l.providerData.filter(w=>v.has(w.providerId)),v.has("phone")||(l.phoneNumber=null),yield l.auth._persistUserIfCurrent(l),l}),ty.apply(this,arguments)}function ny(p,c){return ry.apply(this,arguments)}function ry(){return(ry=(0,b.A)(function*(p,c,l=!1){const g=yield br(p,c._linkToIdToken(p.auth,yield p.getIdToken()),l);return Qi._forOperation(p,"link",g)})).apply(this,arguments)}function Zf(p,c,l){return iy.apply(this,arguments)}function iy(){return(iy=(0,b.A)(function*(p,c,l){yield Ki(c);const v=!1===p?"provider-already-linked":"no-such-provider";he(X_(c.providerData).has(l)===p,c.auth,v)})).apply(this,arguments)}function VT(p,c){return sy.apply(this,arguments)}function sy(){return(sy=(0,b.A)(function*(p,c,l=!1){const{auth:g}=p;if((0,Me._isFirebaseServerApp)(g.app))return Promise.reject(Ye(g));const v="reauthenticate";try{const w=yield br(p,Z_(g,v,c,p),l);he(w.idToken,g,"internal-error");const R=ys(w.idToken);he(R,g,"internal-error");const{sub:B}=R;return he(p.uid===B,g,"user-mismatch"),Qi._forOperation(p,v,w)}catch(w){throw"auth/user-not-found"===w?.code&&Mt(g,"user-mismatch"),w}})).apply(this,arguments)}function UT(p,c){return ed.apply(this,arguments)}function ed(){return(ed=(0,b.A)(function*(p,c,l=!1){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g="signIn",v=yield Z_(p,g,c),w=yield Qi._fromIdTokenResponse(p,g,v);return l||(yield p._updateCurrentUser(w.user)),w})).apply(this,arguments)}function ce(p,c){return oo.apply(this,arguments)}function oo(){return(oo=(0,b.A)(function*(p,c){return UT(Kt(p),c)})).apply(this,arguments)}function Ic(p,c){return td.apply(this,arguments)}function td(){return(td=(0,b.A)(function*(p,c){const l=(0,Z.Ku)(p);return yield Zf(!1,l,c.providerId),ny(l,c)})).apply(this,arguments)}function BT(p,c){return oy.apply(this,arguments)}function oy(){return(oy=(0,b.A)(function*(p,c){return VT((0,Z.Ku)(p),c)})).apply(this,arguments)}function Yi(){return(Yi=(0,b.A)(function*(p,c){return Tt(p,"POST","/v1/accounts:signInWithCustomToken",ue(p,c))})).apply(this,arguments)}function ao(){return ao=(0,b.A)(function*(p,c){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const l=Kt(p),g=yield function ay(p,c){return Yi.apply(this,arguments)}(l,{token:c,returnSecureToken:!0}),v=yield Qi._fromIdTokenResponse(l,"signIn",g);return yield l._updateCurrentUser(v.user),v}),ao.apply(this,arguments)}class Is{constructor(c,l){this.factorId=c,this.uid=l.mfaEnrollmentId,this.enrollmentTime=new Date(l.enrolledAt).toUTCString(),this.displayName=l.displayName}static _fromServerResponse(c,l){return"phoneInfo"in l?nd._fromServerResponse(c,l):"totpInfo"in l?wc._fromServerResponse(c,l):Mt(c,"internal-error")}}class nd extends Is{constructor(c){super("phone",c),this.phoneNumber=c.phoneInfo}static _fromServerResponse(c,l){return new nd(l)}}class wc extends Is{constructor(c){super("totp",c)}static _fromServerResponse(c,l){return new wc(l)}}function Bs(p,c,l){var g;he((null===(g=l.url)||void 0===g?void 0:g.length)>0,p,"invalid-continue-uri"),he(typeof l.dynamicLinkDomain>"u"||l.dynamicLinkDomain.length>0,p,"invalid-dynamic-link-domain"),c.continueUrl=l.url,c.dynamicLinkDomain=l.dynamicLinkDomain,c.canHandleCodeInApp=l.handleCodeInApp,l.iOS&&(he(l.iOS.bundleId.length>0,p,"missing-ios-bundle-id"),c.iOSBundleId=l.iOS.bundleId),l.android&&(he(l.android.packageName.length>0,p,"missing-android-pkg-name"),c.androidInstallApp=l.android.installApp,c.androidMinimumVersionCode=l.android.minimumVersion,c.androidPackageName=l.android.packageName)}function uy(p){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,b.A)(function*(p){const c=Kt(p);c._getPasswordPolicyInternal()&&(yield c._updatePasswordPolicy())})).apply(this,arguments)}function cy(){return(cy=(0,b.A)(function*(p,c,l){const g=Kt(p),v={requestType:"PASSWORD_RESET",email:c,clientType:"CLIENT_TYPE_WEB"};l&&Bs(g,v,l),yield mc(g,v,"getOobCode",H_)})).apply(this,arguments)}function Xf(){return Xf=(0,b.A)(function*(p,c,l){yield $f((0,Z.Ku)(p),{oobCode:c,newPassword:l}).catch(function(){var g=(0,b.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&uy(p),v});return function(v){return g.apply(this,arguments)}}())}),Xf.apply(this,arguments)}function Tc(){return Tc=(0,b.A)(function*(p,c){yield function AT(p,c){return B_.apply(this,arguments)}((0,Z.Ku)(p),{oobCode:c})}),Tc.apply(this,arguments)}function jT(p,c){return ep.apply(this,arguments)}function ep(){return(ep=(0,b.A)(function*(p,c){const l=(0,Z.Ku)(p),g=yield $f(l,{oobCode:c}),v=g.requestType;switch(he(v,l,"internal-error"),v){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(g.newEmail,l,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(g.mfaInfo,l,"internal-error");default:he(g.email,l,"internal-error")}let w=null;return g.mfaInfo&&(w=Is._fromServerResponse(Kt(l),g.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.newEmail:g.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===g.requestType?g.email:g.newEmail)||null,multiFactorInfo:w},operation:v}})).apply(this,arguments)}function Ke(){return(Ke=(0,b.A)(function*(p,c){const{data:l}=yield jT((0,Z.Ku)(p),c);return l.email})).apply(this,arguments)}function Fr(){return(Fr=(0,b.A)(function*(p,c,l){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),R=yield mc(g,{returnSecureToken:!0,email:c,password:l,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Y_).catch(ne=>{throw"auth/password-does-not-meet-requirements"===ne.code&&uy(p),ne}),B=yield Qi._fromIdTokenResponse(g,"signIn",R);return yield g._updateCurrentUser(B.user),B})).apply(this,arguments)}function ly(){return(ly=(0,b.A)(function*(p,c,l){const g=Kt(p),v={requestType:"EMAIL_SIGNIN",email:c,clientType:"CLIENT_TYPE_WEB"};(function w(R,B){he(B.handleCodeInApp,g,"argument-error"),B&&Bs(g,R,B)})(v,l),yield mc(g,v,"getOobCode",z_)})).apply(this,arguments)}function dy(){return(dy=(0,b.A)(function*(p,c,l){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=(0,Z.Ku)(p),v=Jf.credentialWithLink(c,l||Wr());return he(v._tenantId===(g.tenantId||null),g,"tenant-id-mismatch"),ce(g,v)})).apply(this,arguments)}function hy(){return(hy=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:createAuthUri",ue(p,c))})).apply(this,arguments)}function fy(){return fy=(0,b.A)(function*(p,c){const g={identifier:c,continueUri:gs()?Wr():"http://localhost"},{signinMethods:v}=yield function wN(p,c){return hy.apply(this,arguments)}((0,Z.Ku)(p),g);return v||[]}),fy.apply(this,arguments)}function py(){return py=(0,b.A)(function*(p,c){const l=(0,Z.Ku)(p),v={requestType:"VERIFY_EMAIL",idToken:yield p.getIdToken()};c&&Bs(l.auth,v,c);const{email:w}=yield function $_(p,c){return Ha.apply(this,arguments)}(l.auth,v);w!==p.email&&(yield p.reload())}),py.apply(this,arguments)}function We(){return We=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p),w={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield p.getIdToken(),newEmail:c};l&&Bs(g.auth,w,l);const{email:R}=yield function bT(p,c){return Gf.apply(this,arguments)}(g.auth,w);R!==p.email&&(yield p.reload())}),We.apply(this,arguments)}function gy(){return(gy=(0,b.A)(function*(p,c){return Ne(p,"POST","/v1/accounts:update",c)})).apply(this,arguments)}function my(){return my=(0,b.A)(function*(p,{displayName:c,photoURL:l}){if(void 0===c&&void 0===l)return;const g=(0,Z.Ku)(p),w={idToken:yield g.getIdToken(),displayName:c,photoUrl:l,returnSecureToken:!0},R=yield br(g,function TN(p,c){return gy.apply(this,arguments)}(g.auth,w));g.displayName=R.displayName||null,g.photoURL=R.photoUrl||null;const B=g.providerData.find(({providerId:ne})=>"password"===ne);B&&(B.displayName=g.displayName,B.photoURL=g.photoURL),yield g._updateTokensIfNecessary(R)}),my.apply(this,arguments)}function GT(p,c,l){return ur.apply(this,arguments)}function ur(){return ur=(0,b.A)(function*(p,c,l){const{auth:g}=p,w={idToken:yield p.getIdToken(),returnSecureToken:!0};c&&(w.email=c),l&&(w.password=l);const R=yield br(p,function TT(p,c){return Hf.apply(this,arguments)}(g,w));yield p._updateTokensIfNecessary(R,!0)}),ur.apply(this,arguments)}class Wa{constructor(c,l,g={}){this.isNewUser=c,this.providerId=l,this.profile=g}}class tp extends Wa{constructor(c,l,g,v){super(c,l,g),this.username=v}}class qT extends Wa{constructor(c,l){super(c,"facebook.com",l)}}class sd extends tp{constructor(c,l){super(c,"github.com",l,"string"==typeof l?.login?l?.login:null)}}class od extends Wa{constructor(c,l){super(c,"google.com",l)}}class np extends tp{constructor(c,l,g){super(c,"twitter.com",l,g)}}function _y(p){const{user:c,_tokenResponse:l}=p;return c.isAnonymous&&!l?{providerId:null,isNewUser:!1,profile:null}:function id(p){var c,l;if(!p)return null;const{providerId:g}=p,v=p.rawUserInfo?JSON.parse(p.rawUserInfo):{},w=p.isNewUser||"identitytoolkit#SignupNewUserResponse"===p.kind;if(!g&&p?.idToken){const R=null===(l=null===(c=ys(p.idToken))||void 0===c?void 0:c.firebase)||void 0===l?void 0:l.sign_in_provider;if(R)return new Wa(w,"anonymous"!==R&&"custom"!==R?R:null)}if(!g)return null;switch(g){case"facebook.com":return new qT(w,v);case"github.com":return new sd(w,v);case"google.com":return new od(w,v);case"twitter.com":return new np(w,v,p.screenName||null);case"custom":case"anonymous":return new Wa(w,null);default:return new Wa(w,g,v)}}(l)}class Ji{constructor(c,l,g){this.type=c,this.credential=l,this.user=g}static _fromIdtoken(c,l){return new Ji("enroll",c,l)}static _fromMfaPendingCredential(c){return new Ji("signin",c)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(c){var l,g;if(c?.multiFactorSession){if(null!==(l=c.multiFactorSession)&&void 0!==l&&l.pendingCredential)return Ji._fromMfaPendingCredential(c.multiFactorSession.pendingCredential);if(null!==(g=c.multiFactorSession)&&void 0!==g&&g.idToken)return Ji._fromIdtoken(c.multiFactorSession.idToken)}return null}}class Dc{constructor(c,l,g){this.session=c,this.hints=l,this.signInResolver=g}static _fromError(c,l){const g=Kt(c),v=l.customData._serverResponse,w=(v.mfaInfo||[]).map(B=>Is._fromServerResponse(g,B));he(v.mfaPendingCredential,g,"internal-error");const R=Ji._fromMfaPendingCredential(v.mfaPendingCredential);return new Dc(R,w,function(){var B=(0,b.A)(function*(ne){const Ie=yield ne._process(g,R);delete v.mfaInfo,delete v.mfaPendingCredential;const Re=Object.assign(Object.assign({},v),{idToken:Ie.idToken,refreshToken:Ie.refreshToken});switch(l.operationType){case"signIn":const xe=yield Qi._fromIdTokenResponse(g,l.operationType,Re);return yield g._updateCurrentUser(xe.user),xe;case"reauthenticate":return he(l.user,g,"internal-error"),Qi._forOperation(l.user,l.operationType,Re);default:Mt(g,"internal-error")}});return function(ne){return B.apply(this,arguments)}}())}resolveSignIn(c){var l=this;return(0,b.A)(function*(){return l.signInResolver(c)})()}}class bt{constructor(c){this.user=c,this.enrolledFactors=[],c._onReload(l=>{l.mfaInfo&&(this.enrolledFactors=l.mfaInfo.map(g=>Is._fromServerResponse(c.auth,g)))})}static _fromUser(c){return new bt(c)}getSession(){var c=this;return(0,b.A)(function*(){return Ji._fromIdtoken(yield c.user.getIdToken(),c.user)})()}enroll(c,l){var g=this;return(0,b.A)(function*(){const v=c,w=yield g.getSession(),R=yield br(g.user,v._process(g.user.auth,w,l));return yield g.user._updateTokensIfNecessary(R),g.user.reload()})()}unenroll(c){var l=this;return(0,b.A)(function*(){const g="string"==typeof c?c:c.uid,v=yield l.user.getIdToken();try{const w=yield br(l.user,function it(p,c){return Ne(p,"POST","/v2/accounts/mfaEnrollment:withdraw",ue(p,c))}(l.user.auth,{idToken:v,mfaEnrollmentId:g}));l.enrolledFactors=l.enrolledFactors.filter(({uid:R})=>R!==g),yield l.user._updateTokensIfNecessary(w),yield l.user.reload()}catch(w){throw w}})()}}const Ty=new WeakMap,ud="__sak";class KT{constructor(c,l){this.storageRetriever=c,this.type=l}_isAvailable(){try{return this.storage?(this.storage.setItem(ud,"1"),this.storage.removeItem(ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,l){return this.storage.setItem(c,JSON.stringify(l)),Promise.resolve()}_get(c){const l=this.storage.getItem(c);return Promise.resolve(l?JSON.parse(l):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ka=(()=>{class p extends KT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(l,g)=>this.onStorageEvent(l,g),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=De(),this._shouldAllowMigration=!0}forAllChangedKeys(l){for(const g of Object.keys(this.listeners)){const v=this.storage.getItem(g),w=this.localCache[g];v!==w&&l(g,w,v)}}onStorageEvent(l,g=!1){if(!l.key)return void this.forAllChangedKeys((B,ne,Ie)=>{this.notifyListeners(B,Ie)});const v=l.key;g?this.detachListener():this.stopPolling();const w=()=>{const B=this.storage.getItem(v);!g&&this.localCache[v]===B||this.notifyListeners(v,B)},R=this.storage.getItem(v);!function ae(){return(0,Z.lT)()&&10===document.documentMode}()||R===l.newValue||l.newValue===l.oldValue?w():setTimeout(w,10)}notifyListeners(l,g){this.localCache[l]=g;const v=this.listeners[l];if(v)for(const w of Array.from(v))w(g&&JSON.parse(g))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((l,g,v)=>{this.onStorageEvent(new StorageEvent("storage",{key:l,oldValue:g,newValue:v}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(l,g){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[l]||(this.listeners[l]=new Set,this.localCache[l]=this.storage.getItem(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(l,g){var v=()=>super._set,w=this;return(0,b.A)(function*(){yield v().call(w,l,g),w.localCache[l]=JSON.stringify(g)})()}_get(l){var g=()=>super._get,v=this;return(0,b.A)(function*(){const w=yield g().call(v,l);return v.localCache[l]=JSON.stringify(w),w})()}_remove(l){var g=()=>super._remove,v=this;return(0,b.A)(function*(){yield g().call(v,l),delete v.localCache[l]})()}}return p.type="LOCAL",p})(),Vn=(()=>{class p extends KT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(l,g){}_removeListener(l,g){}}return p.type="SESSION",p})();let SN=(()=>{class p{constructor(l){this.eventTarget=l,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(l){const g=this.receivers.find(w=>w.isListeningto(l));if(g)return g;const v=new p(l);return this.receivers.push(v),v}isListeningto(l){return this.eventTarget===l}handleEvent(l){var g=this;return(0,b.A)(function*(){const v=l,{eventId:w,eventType:R,data:B}=v.data,ne=g.handlersMap[R];if(!ne?.size)return;v.ports[0].postMessage({status:"ack",eventId:w,eventType:R});const Ie=Array.from(ne).map(function(){var xe=(0,b.A)(function*(_n){return _n(v.origin,B)});return function(_n){return xe.apply(this,arguments)}}()),Re=yield function Cy(p){return Promise.all(p.map(function(){var c=(0,b.A)(function*(l){try{return{fulfilled:!0,value:yield l}}catch(g){return{fulfilled:!1,reason:g}}});return function(l){return c.apply(this,arguments)}}()))}(Ie);v.ports[0].postMessage({status:"done",eventId:w,eventType:R,response:Re})})()}_subscribe(l,g){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[l]||(this.handlersMap[l]=new Set),this.handlersMap[l].add(g)}_unsubscribe(l,g){this.handlersMap[l]&&g&&this.handlersMap[l].delete(g),(!g||0===this.handlersMap[l].size)&&delete this.handlersMap[l],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return p.receivers=[],p})();function cd(p="",c=10){let l="";for(let g=0;g<c;g++)l+=Math.floor(10*Math.random());return p+l}class bc{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}_send(c,l,g=50){var v=this;return(0,b.A)(function*(){const w=typeof MessageChannel<"u"?new MessageChannel:null;if(!w)throw new Error("connection_unavailable");let R,B;return new Promise((ne,Ie)=>{const Re=cd("",20);w.port1.start();const xe=setTimeout(()=>{Ie(new Error("unsupported_event"))},g);B={messageChannel:w,onMessage(_n){const ns=_n;if(ns.data.eventId===Re)switch(ns.data.status){case"ack":clearTimeout(xe),R=setTimeout(()=>{Ie(new Error("timeout"))},3e3);break;case"done":clearTimeout(R),ne(ns.data.response);break;default:clearTimeout(xe),clearTimeout(R),Ie(new Error("invalid_response"))}}},v.handlers.add(B),w.port1.addEventListener("message",B.onMessage),v.target.postMessage({eventType:c,eventId:Re,data:l},[w.port2])}).finally(()=>{B&&v.removeMessageHandler(B)})})()}}function Dn(){return window}function op(){return typeof Dn().WorkerGlobalScope<"u"&&"function"==typeof Dn().importScripts}function ap(){return(ap=(0,b.A)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dy="firebaseLocalStorageDb",dd="firebaseLocalStorage",de="fbase_key";class Ya{constructor(c){this.request=c}toPromise(){return new Promise((c,l)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{l(this.request.error)})})}}function te(p,c){return p.transaction([dd],c?"readwrite":"readonly").objectStore(dd)}function Sc(){const p=indexedDB.open(Dy,1);return new Promise((c,l)=>{p.addEventListener("error",()=>{l(p.error)}),p.addEventListener("upgradeneeded",()=>{const g=p.result;try{g.createObjectStore(dd,{keyPath:de})}catch(v){l(v)}}),p.addEventListener("success",(0,b.A)(function*(){const g=p.result;g.objectStoreNames.contains(dd)?c(g):(g.close(),yield function hd(){const p=indexedDB.deleteDatabase(Dy);return new Ya(p).toPromise()}(),c(yield Sc()))}))})}function Ja(p,c,l){return up.apply(this,arguments)}function up(){return(up=(0,b.A)(function*(p,c,l){const g=te(p,!0).put({[de]:c,value:l});return new Ya(g).toPromise()})).apply(this,arguments)}function cp(){return(cp=(0,b.A)(function*(p,c){const l=te(p,!1).get(c),g=yield new Ya(l).toPromise();return void 0===g?null:g.value})).apply(this,arguments)}function by(p,c){const l=te(p,!0).delete(c);return new Ya(l).toPromise()}const Za=(()=>{class p{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var l=this;return(0,b.A)(function*(){return l.db||(l.db=yield Sc()),l.db})()}_withRetries(l){var g=this;return(0,b.A)(function*(){let v=0;for(;;)try{const w=yield g._openDb();return yield l(w)}catch(w){if(v++>3)throw w;g.db&&(g.db.close(),g.db=void 0)}})()}initializeServiceWorkerMessaging(){var l=this;return(0,b.A)(function*(){return op()?l.initializeReceiver():l.initializeSender()})()}initializeReceiver(){var l=this;return(0,b.A)(function*(){l.receiver=SN._getInstance(function Qa(){return op()?self:null}()),l.receiver._subscribe("keyChanged",function(){var g=(0,b.A)(function*(v,w){return{keyProcessed:(yield l._poll()).includes(w.key)}});return function(v,w){return g.apply(this,arguments)}}()),l.receiver._subscribe("ping",function(){var g=(0,b.A)(function*(v,w){return["keyChanged"]});return function(v,w){return g.apply(this,arguments)}}())})()}initializeSender(){var l=this;return(0,b.A)(function*(){var g,v;if(l.activeServiceWorker=yield function JT(){return ap.apply(this,arguments)}(),!l.activeServiceWorker)return;l.sender=new bc(l.activeServiceWorker);const w=yield l.sender._send("ping",{},800);w&&null!==(g=w[0])&&void 0!==g&&g.fulfilled&&null!==(v=w[0])&&void 0!==v&&v.value.includes("keyChanged")&&(l.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(l){var g=this;return(0,b.A)(function*(){if(g.sender&&g.activeServiceWorker&&function Ay(){var p;return(null===(p=navigator?.serviceWorker)||void 0===p?void 0:p.controller)||null}()===g.activeServiceWorker)try{yield g.sender._send("keyChanged",{key:l},g.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,b.A)(function*(){try{if(!indexedDB)return!1;const l=yield Sc();return yield Ja(l,ud,"1"),yield by(l,ud),!0}catch{}return!1})()}_withPendingWrite(l){var g=this;return(0,b.A)(function*(){g.pendingWrites++;try{yield l()}finally{g.pendingWrites--}})()}_set(l,g){var v=this;return(0,b.A)(function*(){return v._withPendingWrite((0,b.A)(function*(){return yield v._withRetries(w=>Ja(w,l,g)),v.localCache[l]=g,v.notifyServiceWorker(l)}))})()}_get(l){var g=this;return(0,b.A)(function*(){const v=yield g._withRetries(w=>function ZT(p,c){return cp.apply(this,arguments)}(w,l));return g.localCache[l]=v,v})()}_remove(l){var g=this;return(0,b.A)(function*(){return g._withPendingWrite((0,b.A)(function*(){return yield g._withRetries(v=>by(v,l)),delete g.localCache[l],g.notifyServiceWorker(l)}))})()}_poll(){var l=this;return(0,b.A)(function*(){const g=yield l._withRetries(R=>{const B=te(R,!1).getAll();return new Ya(B).toPromise()});if(!g)return[];if(0!==l.pendingWrites)return[];const v=[],w=new Set;if(0!==g.length)for(const{fbase_key:R,value:B}of g)w.add(R),JSON.stringify(l.localCache[R])!==JSON.stringify(B)&&(l.notifyListeners(R,B),v.push(R));for(const R of Object.keys(l.localCache))l.localCache[R]&&!w.has(R)&&(l.notifyListeners(R,null),v.push(R));return v})()}notifyListeners(l,g){this.localCache[l]=g;const v=this.listeners[l];if(v)for(const w of Array.from(v))w(g)}startPolling(){var l=this;this.stopPolling(),this.pollTimer=setInterval((0,b.A)(function*(){return l._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(l,g){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[l]||(this.listeners[l]=new Set,this._get(l)),this.listeners[l].add(g)}_removeListener(l,g){this.listeners[l]&&(this.listeners[l].delete(g),0===this.listeners[l].size&&delete this.listeners[l]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return p.type="LOCAL",p})(),sa=1e12;class fd{constructor(c){this.auth=c,this.counter=sa,this._widgets=new Map}render(c,l){const g=this.counter;return this._widgets.set(g,new dp(c,this.auth.name,l||{})),this.counter++,g}reset(c){var l;const g=c||sa;null===(l=this._widgets.get(g))||void 0===l||l.delete(),this._widgets.delete(g)}getResponse(c){var l;return(null===(l=this._widgets.get(c||sa))||void 0===l?void 0:l.getResponse())||""}execute(c){var l=this;return(0,b.A)(function*(){var g;return null===(g=l._widgets.get(c||sa))||void 0===g||g.execute(),""})()}}class dp{constructor(c,l,g){this.params=g,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const v="string"==typeof c?document.getElementById(c):c;he(v,"argument-error",{appName:l}),this.container=v,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function RN(p){const c=[],l="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<p;g++)c.push(l.charAt(Math.floor(62*Math.random())));return c.join("")}(50);const{callback:c,"expired-callback":l}=this.params;if(c)try{c(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,l)try{l()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const pd=pT("rcb"),PN=new W(3e4,6e4);class mi{constructor(){var c;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(c=Dn().grecaptcha)||void 0===c||!c.render)}load(c,l=""){return he(function hp(p){return p.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(p)}(l),c,"argument-error"),this.shouldResolveImmediately(l)&&Qn(Dn().grecaptcha)?Promise.resolve(Dn().grecaptcha):new Promise((g,v)=>{const w=Dn().setTimeout(()=>{v(xt(c,"network-request-failed"))},PN.get());Dn()[pd]=()=>{Dn().clearTimeout(w),delete Dn()[pd];const B=Dn().grecaptcha;if(!B||!Qn(B))return void v(xt(c,"internal-error"));const ne=B.render;B.render=(Ie,Re)=>{const xe=ne(Ie,Re);return this.counter++,xe},this.hostLanguage=l,g(B)},gc(`${function dT(){return pc.recaptchaV2Script}()}?${(0,Z.Am)({onload:pd,render:"explicit",hl:l})}`).catch(()=>{clearTimeout(w),v(xt(c,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(c){var l;return!(null===(l=Dn().grecaptcha)||void 0===l||!l.render)&&(c===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class eu{load(c){return(0,b.A)(function*(){return new fd(c)})()}clearedOneInstance(){}}const tC="recaptcha",Ry={theme:"light",type:"image"};class ws{constructor(c,l,g=Object.assign({},Ry)){this.parameters=g,this.type=tC,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Kt(c),this.isInvisible="invisible"===this.parameters.size,he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const v="string"==typeof l?document.getElementById(l):l;he(v,this.auth,"argument-error"),this.container=v,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eu:new mi,this.validateStartingState()}verify(){var c=this;return(0,b.A)(function*(){c.assertNotDestroyed();const l=yield c.render(),g=c.getAssertedRecaptcha();return g.getResponse(l)||new Promise(w=>{const R=B=>{B&&(c.tokenChangeListeners.delete(R),w(B))};c.tokenChangeListeners.add(R),c.isInvisible&&g.execute(l)})})()}render(){try{this.assertNotDestroyed()}catch(c){return Promise.reject(c)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(c=>{throw this.renderPromise=null,c})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(c=>{this.container.removeChild(c)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(c){return l=>{if(this.tokenChangeListeners.forEach(g=>g(l)),"function"==typeof c)c(l);else if("string"==typeof c){const g=Dn()[c];"function"==typeof g&&g(l)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var c=this;return(0,b.A)(function*(){if(yield c.init(),!c.widgetId){let l=c.container;if(!c.isInvisible){const g=document.createElement("div");l.appendChild(g),l=g}c.widgetId=c.getAssertedRecaptcha().render(l,c.parameters)}return c.widgetId})()}init(){var c=this;return(0,b.A)(function*(){he(gs()&&!op(),c.auth,"internal-error"),yield function St(){let p=null;return new Promise(c=>{"complete"!==document.readyState?(p=()=>c(),window.addEventListener("load",p)):c()}).catch(c=>{throw p&&window.removeEventListener("load",p),c})}(),c.recaptcha=yield c._recaptchaLoader.load(c.auth,c.auth.languageCode||void 0);const l=yield function cc(p){return xs.apply(this,arguments)}(c.auth);he(l,c.auth,"internal-error"),c.parameters.sitekey=l})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class _i{constructor(c,l){this.verificationId=c,this.onConfirmation=l}confirm(c){const l=na._fromVerification(this.verificationId,c);return this.onConfirmation(l)}}function Pc(){return(Pc=(0,b.A)(function*(p,c,l){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),v=yield md(g,c,(0,Z.Ku)(l));return new _i(v,w=>ce(g,w))})).apply(this,arguments)}function tu(){return(tu=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);yield Zf(!1,g,"phone");const v=yield md(g.auth,c,(0,Z.Ku)(l));return new _i(v,w=>Ic(g,w))})).apply(this,arguments)}function Ts(){return(Ts=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);if((0,Me._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));const v=yield md(g.auth,c,(0,Z.Ku)(l));return new _i(v,w=>BT(g,w))})).apply(this,arguments)}function md(p,c,l){return Nc.apply(this,arguments)}function Nc(){return Nc=(0,b.A)(function*(p,c,l){var g;const v=yield l.verify();try{let w;if(he("string"==typeof v,p,"argument-error"),he(l.type===tC,p,"argument-error"),w="string"==typeof c?{phoneNumber:c}:c,"session"in w){const R=w.session;if("phoneNumber"in w)return he("enroll"===R.type,p,"internal-error"),(yield function Iy(p,c){return Ne(p,"POST","/v2/accounts/mfaEnrollment:start",ue(p,c))}(p,{idToken:R.credential,phoneEnrollmentInfo:{phoneNumber:w.phoneNumber,recaptchaToken:v}})).phoneSessionInfo.sessionInfo;{he("signin"===R.type,p,"internal-error");const B=(null===(g=w.multiFactorHint)||void 0===g?void 0:g.uid)||w.multiFactorUid;return he(B,p,"missing-multi-factor-info"),(yield function ia(p,c){return Ne(p,"POST","/v2/accounts/mfaSignIn:start",ue(p,c))}(p,{mfaPendingCredential:R.credential,mfaEnrollmentId:B,phoneSignInInfo:{recaptchaToken:v}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:R}=yield function yN(p,c){return Jl.apply(this,arguments)}(p,{phoneNumber:w.phoneNumber,recaptchaToken:v});return R}}finally{l._reset()}}),Nc.apply(this,arguments)}function _d(){return(_d=(0,b.A)(function*(p,c){const l=(0,Z.Ku)(p);if((0,Me._isFirebaseServerApp)(l.auth.app))return Promise.reject(Ye(l.auth));yield ny(l,c)})).apply(this,arguments)}let $s=(()=>{class p{constructor(l){this.providerId=p.PROVIDER_ID,this.auth=Kt(l)}verifyPhoneNumber(l,g){return md(this.auth,l,(0,Z.Ku)(g))}static credential(l,g){return na._fromVerification(l,g)}static credentialFromResult(l){return p.credentialFromTaggedObject(l)}static credentialFromError(l){return p.credentialFromTaggedObject(l.customData||{})}static credentialFromTaggedObject({_tokenResponse:l}){if(!l)return null;const{phoneNumber:g,temporaryProof:v}=l;return g&&v?na._fromTokenResponse(g,v):null}}return p.PROVIDER_ID="phone",p.PHONE_SIGN_IN_METHOD="phone",p})();function lo(p,c){return c?$e(c):(he(p._popupRedirectResolver,p,"argument-error"),p._popupRedirectResolver)}class yd extends ta{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Oi(c,this._buildIdpRequest())}_linkToIdToken(c,l){return Oi(c,this._buildIdpRequest(l))}_getReauthenticationResolver(c){return Oi(c,this._buildIdpRequest())}_buildIdpRequest(c){const l={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(l.idToken=c),l}}function nC(p){return UT(p.auth,new yd(p),p.bypassAuthState)}function fp(p){const{auth:c,user:l}=p;return he(l,c,"internal-error"),VT(l,new yd(p),p.bypassAuthState)}function rC(p){return pp.apply(this,arguments)}function pp(){return(pp=(0,b.A)(function*(p){const{auth:c,user:l}=p;return he(l,c,"internal-error"),ny(l,new yd(p),p.bypassAuthState)})).apply(this,arguments)}class ki{constructor(c,l,g,v,w=!1){this.auth=c,this.resolver=g,this.user=v,this.bypassAuthState=w,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(l)?l:[l]}execute(){var c=this;return new Promise(function(){var l=(0,b.A)(function*(g,v){c.pendingPromise={resolve:g,reject:v};try{c.eventManager=yield c.resolver._initialize(c.auth),yield c.onExecution(),c.eventManager.registerConsumer(c)}catch(w){c.reject(w)}});return function(g,v){return l.apply(this,arguments)}}())}onAuthEvent(c){var l=this;return(0,b.A)(function*(){const{urlResponse:g,sessionId:v,postBody:w,tenantId:R,error:B,type:ne}=c;if(B)return void l.reject(B);const Ie={auth:l.auth,requestUri:g,sessionId:v,tenantId:R||void 0,postBody:w||void 0,user:l.user,bypassAuthState:l.bypassAuthState};try{l.resolve(yield l.getIdpTask(ne)(Ie))}catch(Re){l.reject(Re)}})()}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return nC;case"linkViaPopup":case"linkViaRedirect":return rC;case"reauthViaPopup":case"reauthViaRedirect":return fp;default:Mt(this.auth,"internal-error")}}resolve(c){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const iC=new W(2e3,1e4);function gp(){return(gp=(0,b.A)(function*(p,c,l){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(xt(p,"operation-not-supported-in-this-environment"));const g=Kt(p);Tn(p,c,so);const v=lo(g,l);return new _p(g,"signInViaPopup",c,v).executeNotNull()})).apply(this,arguments)}function mp(){return(mp=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);if((0,Me._isFirebaseServerApp)(g.auth.app))return Promise.reject(xt(g.auth,"operation-not-supported-in-this-environment"));Tn(g.auth,c,so);const v=lo(g.auth,l);return new _p(g.auth,"reauthViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}function vd(){return(vd=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);Tn(g.auth,c,so);const v=lo(g.auth,l);return new _p(g.auth,"linkViaPopup",c,v,g).executeNotNull()})).apply(this,arguments)}let _p=(()=>{class p extends ki{constructor(l,g,v,w,R){super(l,g,w,R),this.provider=v,this.authWindow=null,this.pollId=null,p.currentPopupAction&&p.currentPopupAction.cancel(),p.currentPopupAction=this}executeNotNull(){var l=this;return(0,b.A)(function*(){const g=yield l.execute();return he(g,l.auth,"internal-error"),g})()}onExecution(){var l=this;return(0,b.A)(function*(){Ln(1===l.filter.length,"Popup operations only handle one event");const g=cd();l.authWindow=yield l.resolver._openPopup(l.auth,l.provider,l.filter[0],g),l.authWindow.associatedEvent=g,l.resolver._originValidation(l.auth).catch(v=>{l.reject(v)}),l.resolver._isIframeWebStorageSupported(l.auth,v=>{v||l.reject(xt(l.auth,"web-storage-unsupported"))}),l.pollUserCancellation()})()}get eventId(){var l;return(null===(l=this.authWindow)||void 0===l?void 0:l.associatedEvent)||null}cancel(){this.reject(xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,p.currentPopupAction=null}pollUserCancellation(){const l=()=>{var g,v;this.pollId=null!==(v=null===(g=this.authWindow)||void 0===g?void 0:g.window)&&void 0!==v&&v.closed?window.setTimeout(()=>{this.pollId=null,this.reject(xt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(l,iC.get())};l()}}return p.currentPopupAction=null,p})();const aC="pendingRedirect",Mc=new Map;class ho extends ki{constructor(c,l,g=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],l,void 0,g),this.eventId=null}execute(){var c=()=>super.execute,l=this;return(0,b.A)(function*(){let g=Mc.get(l.auth._key());if(!g){try{const w=(yield function uC(p,c){return yp.apply(this,arguments)}(l.resolver,l.auth))?yield c().call(l):null;g=()=>Promise.resolve(w)}catch(v){g=()=>Promise.reject(v)}Mc.set(l.auth._key(),g)}return l.bypassAuthState||Mc.set(l.auth._key(),()=>Promise.resolve(null)),g()})()}onAuthEvent(c){var l=()=>super.onAuthEvent,g=this;return(0,b.A)(function*(){if("signInViaRedirect"===c.type)return l().call(g,c);if("unknown"!==c.type){if(c.eventId){const v=yield g.auth._redirectUserForId(c.eventId);if(v)return g.user=v,l().call(g,c);g.resolve(null)}}else g.resolve(null)})()}onExecution(){return(0,b.A)(function*(){})()}cleanUp(){}}function yp(){return(yp=(0,b.A)(function*(p,c){const l=zn(c),g=dt(p);if(!(yield g._isAvailable()))return!1;const v="true"===(yield g._get(l));return yield g._remove(l),v})).apply(this,arguments)}function gr(p,c){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,b.A)(function*(p,c){return dt(p)._set(zn(c),"true")})).apply(this,arguments)}function mr(p,c){Mc.set(p._key(),c)}function dt(p){return $e(p._redirectPersistence)}function zn(p){return Yn(aC,p.config.apiKey,p.name)}function _r(p,c,l){return function fo(p,c,l){return cr.apply(this,arguments)}(p,c,l)}function cr(){return(cr=(0,b.A)(function*(p,c,l){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p);Tn(p,c,so),yield g._initializationPromise;const v=lo(g,l);return yield gr(v,g),v._openRedirect(g,c,"signInViaRedirect")})).apply(this,arguments)}function xy(p,c,l){return function Oy(p,c,l){return nu.apply(this,arguments)}(p,c,l)}function nu(){return(nu=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);if(Tn(g.auth,c,so),(0,Me._isFirebaseServerApp)(g.auth.app))return Promise.reject(Ye(g.auth));yield g.auth._initializationPromise;const v=lo(g.auth,l);yield gr(v,g.auth);const w=yield hC(g);return v._openRedirect(g.auth,c,"reauthViaRedirect",w)})).apply(this,arguments)}function cC(p,c,l){return function lC(p,c,l){return oa.apply(this,arguments)}(p,c,l)}function oa(){return(oa=(0,b.A)(function*(p,c,l){const g=(0,Z.Ku)(p);Tn(g.auth,c,so),yield g.auth._initializationPromise;const v=lo(g.auth,l);yield Zf(!1,g,c.providerId),yield gr(v,g.auth);const w=yield hC(g);return v._openRedirect(g.auth,c,"linkViaRedirect",w)})).apply(this,arguments)}function xc(){return(xc=(0,b.A)(function*(p,c){return yield Kt(p)._initializationPromise,Oc(p,c,!1)})).apply(this,arguments)}function Oc(p,c){return ru.apply(this,arguments)}function ru(){return(ru=(0,b.A)(function*(p,c,l=!1){if((0,Me._isFirebaseServerApp)(p.app))return Promise.reject(Ye(p));const g=Kt(p),v=lo(g,c),R=yield new ho(g,v,l).execute();return R&&!l&&(delete R.user._redirectEventId,yield g._persistUserIfCurrent(R.user),yield g._setRedirectUser(null,c)),R})).apply(this,arguments)}function hC(p){return kc.apply(this,arguments)}function kc(){return(kc=(0,b.A)(function*(p){const c=cd(`${p.uid}:::`);return p._redirectEventId=c,yield p.auth._setRedirectUser(p),yield p.auth._persistUserIfCurrent(p),c})).apply(this,arguments)}class Id{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let l=!1;return this.consumers.forEach(g=>{this.isEventForConsumer(c,g)&&(l=!0,this.sendToConsumer(c,g),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!function aa(p){switch(p.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ep(p);default:return!1}}(c)||(this.hasHandledPotentialRedirect=!0,l||(this.queuedRedirectEvent=c,l=!0)),l}sendToConsumer(c,l){var g;if(c.error&&!Ep(c)){const v=(null===(g=c.error.code)||void 0===g?void 0:g.split("auth/")[1])||"internal-error";l.onError(xt(this.auth,v))}else l.onAuthEvent(c)}isEventForConsumer(c,l){const g=null===l.eventId||!!c.eventId&&c.eventId===l.eventId;return l.filter.includes(c.type)&&g}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(vp(c))}saveEventToCache(c){this.cachedEventUids.add(vp(c)),this.lastProcessedEventTime=Date.now()}}function vp(p){return[p.type,p.eventId,p.sessionId,p.tenantId].filter(c=>c).join("-")}function Ep({type:p,error:c}){return"unknown"===p&&"auth/no-auth-event"===c?.code}function ky(p){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,b.A)(function*(p,c={}){return Ne(p,"GET","/v1/projects",c)})).apply(this,arguments)}const wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pC=/^https?/;function iu(){return(iu=(0,b.A)(function*(p){if(p.config.emulator)return;const{authorizedDomains:c}=yield ky(p);for(const l of c)try{if(Lr(l))return}catch{}Mt(p,"unauthorized-domain")})).apply(this,arguments)}function Lr(p){const c=Wr(),{protocol:l,hostname:g}=new URL(c);if(p.startsWith("chrome-extension://")){const R=new URL(p);return""===R.hostname&&""===g?"chrome-extension:"===l&&p.replace("chrome-extension://","")===c.replace("chrome-extension://",""):"chrome-extension:"===l&&R.hostname===g}if(!pC.test(l))return!1;if(wd.test(p))return g===p;const v=p.replace(/\./g,"\\.");return new RegExp("^(.+\\."+v+"|"+v+")$","i").test(g)}const su=new W(3e4,6e4);function Td(){const p=Dn().___jsl;if(p?.H)for(const c of Object.keys(p.H))if(p.H[c].r=p.H[c].r||[],p.H[c].L=p.H[c].L||[],p.H[c].r=[...p.H[c].L],p.CP)for(let l=0;l<p.CP.length;l++)p.CP[l]=null}let Cd=null;const ou=new W(5e3,15e3),mC="__/auth/iframe",_C="emulator/auth/iframe",yC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xi(p){const c=p.config;he(c.authDomain,p,"auth-domain-config-required");const l=c.emulator?Y(c,_C):`https://${p.config.authDomain}/${mC}`,g={apiKey:c.apiKey,appName:p.name,v:Me.SDK_VERSION},v=wp.get(p.config.apiHost);v&&(g.eid=v);const w=p._getFrameworks();return w.length&&(g.fw=w.join(",")),`${l}?${(0,Z.Am)(g).slice(1)}`}function au(){return au=(0,b.A)(function*(p){const c=yield function Fy(p){return Cd=Cd||function gC(p){return new Promise((c,l)=>{var g,v,w;function R(){Td(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Td(),l(xt(p,"network-request-failed"))},timeout:su.get()})}if(null!==(v=null===(g=Dn().gapi)||void 0===g?void 0:g.iframes)&&void 0!==v&&v.Iframe)c(gapi.iframes.getContext());else{if(null===(w=Dn().gapi)||void 0===w||!w.load){const B=pT("iframefcb");return Dn()[B]=()=>{gapi.load?R():l(xt(p,"network-request-failed"))},gc(`${function fT(){return pc.gapiScript}()}?onload=${B}`).catch(ne=>l(ne))}R()}}).catch(c=>{throw Cd=null,c})}(p),Cd}(p),l=Dn().gapi;return he(l,p,"internal-error"),c.open({where:document.body,url:Xi(p),messageHandlersFilter:l.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yC,dontclear:!0},g=>new Promise(function(){var v=(0,b.A)(function*(w,R){yield g.restyle({setHideOnLeave:!1});const B=xt(p,"network-request-failed"),ne=Dn().setTimeout(()=>{R(B)},ou.get());function Ie(){Dn().clearTimeout(ne),w(g)}g.ping(Ie).then(Ie,()=>{R(B)})});return function(w,R){return v.apply(this,arguments)}}()))}),au.apply(this,arguments)}const uu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uy{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const wC="__/auth/handler",TC="emulator/auth/handler",CC=encodeURIComponent("fac");function Tp(p,c,l,g,v,w){return Cp.apply(this,arguments)}function Cp(){return(Cp=(0,b.A)(function*(p,c,l,g,v,w){he(p.config.authDomain,p,"auth-domain-config-required"),he(p.config.apiKey,p,"invalid-api-key");const R={apiKey:p.config.apiKey,appName:p.name,authType:l,redirectUrl:g,v:Me.SDK_VERSION,eventId:v};if(c instanceof so){c.setDefaultLanguage(p.languageCode),R.providerId=c.providerId||"",(0,Z.Im)(c.getCustomParameters())||(R.customParameters=JSON.stringify(c.getCustomParameters()));for(const[Re,xe]of Object.entries(w||{}))R[Re]=xe}if(c instanceof ra){const Re=c.getScopes().filter(xe=>""!==xe);Re.length>0&&(R.scopes=Re.join(","))}p.tenantId&&(R.tid=p.tenantId);const B=R;for(const Re of Object.keys(B))void 0===B[Re]&&delete B[Re];const ne=yield p._getAppCheckToken(),Ie=ne?`#${CC}=${encodeURIComponent(ne)}`:"";return`${function Ap({config:p}){return p.emulator?Y(p,TC):`https://${p.authDomain}/${wC}`}(p)}?${(0,Z.Am)(B).slice(1)}${Ie}`})).apply(this,arguments)}const cu="webStorageSupport",ye=class dn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vn,this._completeRedirectFn=Oc,this._overrideRedirectResult=mr}_openPopup(c,l,g,v){var w=this;return(0,b.A)(function*(){var R;Ln(null===(R=w.eventManagers[c._key()])||void 0===R?void 0:R.manager,"_initialize() not called before _openPopup()");const B=yield Tp(c,l,g,Wr(),v);return function Lc(p,c,l,g=500,v=600){const w=Math.max((window.screen.availHeight-v)/2,0).toString(),R=Math.max((window.screen.availWidth-g)/2,0).toString();let B="";const ne=Object.assign(Object.assign({},uu),{width:g.toString(),height:v.toString(),top:w,left:R}),Ie=(0,Z.ZQ)().toLowerCase();l&&(B=ja(Ie)?"_blank":l),vs(Ie)&&(c=c||"http://localhost",ne.scrollbars="yes");const Re=Object.entries(ne).reduce((_n,[ns,xd])=>`${_n}${ns}=${xd},`,"");if(function j(p=(0,Z.ZQ)()){var c;return $a(p)&&!(null===(c=window.navigator)||void 0===c||!c.standalone)}(Ie)&&"_self"!==B)return function IC(p,c){const l=document.createElement("a");l.href=p,l.target=c;const g=document.createEvent("MouseEvent");g.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),l.dispatchEvent(g)}(c||"",B),new Uy(null);const xe=window.open(c||"",B,Re);he(xe,p,"popup-blocked");try{xe.focus()}catch{}return new Uy(xe)}(c,B,cd())})()}_openRedirect(c,l,g,v){var w=this;return(0,b.A)(function*(){return yield w._originValidation(c),function ld(p){Dn().location.href=p}(yield Tp(c,l,g,Wr(),v)),new Promise(()=>{})})()}_initialize(c){const l=c._key();if(this.eventManagers[l]){const{manager:v,promise:w}=this.eventManagers[l];return v?Promise.resolve(v):(Ln(w,"If manager is not set, promise should be"),w)}const g=this.initAndGetManager(c);return this.eventManagers[l]={promise:g},g.catch(()=>{delete this.eventManagers[l]}),g}initAndGetManager(c){var l=this;return(0,b.A)(function*(){const g=yield function Ly(p){return au.apply(this,arguments)}(c),v=new Id(c);return g.register("authEvent",w=>(he(w?.authEvent,c,"invalid-auth-event"),{status:v.onEvent(w.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),l.eventManagers[c._key()]={manager:v},l.iframes[c._key()]=g,v})()}_isIframeWebStorageSupported(c,l){this.iframes[c._key()].send(cu,{type:cu},v=>{var w;const R=null===(w=v?.[0])||void 0===w?void 0:w[cu];void 0!==R&&l(!!R),Mt(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Ip(p){return iu.apply(this,arguments)}(c)),this.originValidationPromises[l]}get _shouldInitProactively(){return De()||Xo()||$a()}};class Ge{constructor(c){this.factorId=c}_process(c,l,g){switch(l.type){case"enroll":return this._finalizeEnroll(c,l.credential,g);case"signin":return this._finalizeSignIn(c,l.credential);default:return ln("unexpected MultiFactorSessionType")}}}class bn extends Ge{constructor(c){super("phone"),this.credential=c}static _fromCredential(c){return new bn(c)}_finalizeEnroll(c,l,g){return function js(p,c){return Ne(p,"POST","/v2/accounts/mfaEnrollment:finalize",ue(p,c))}(c,{idToken:l,displayName:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(c,l){return function eC(p,c){return Ne(p,"POST","/v2/accounts/mfaSignIn:finalize",ue(p,c))}(c,{mfaPendingCredential:l,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let es=(()=>{class p{constructor(){}static assertion(l){return bn._fromCredential(l)}}return p.FACTOR_ID="phone",p})();var Un="@firebase/auth";class et{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),(null===(c=this.auth.currentUser)||void 0===c?void 0:c.uid)||null}getToken(c){var l=this;return(0,b.A)(function*(){return l.assertAuthConfigured(),yield l.auth._initializationPromise,l.auth.currentUser?{accessToken:yield l.auth.currentUser.getIdToken(c)}:null})()}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const l=this.auth.onIdTokenChanged(g=>{c(g?.stsTokenManager.accessToken||null)});this.internalListeners.set(c,l),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const l=this.internalListeners.get(c);l&&(this.internalListeners.delete(c),l(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function mo(){return window}(0,Z.XA)("authIdTokenMaxAge"),function Bf(p){pc=p}({loadJS:p=>new Promise((c,l)=>{const g=document.createElement("script");g.setAttribute("src",p),g.onload=c,g.onerror=v=>{const w=xt("internal-error");w.customData=v,l(w)},g.type="text/javascript",g.charset="UTF-8",function hu(){var p,c;return null!==(c=null===(p=document.getElementsByTagName("head"))||void 0===p?void 0:p[0])&&void 0!==c?c:document}().appendChild(g)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function By(p){(0,Me._registerComponent)(new wn.uA("auth",(c,{options:l})=>{const g=c.getProvider("app").getImmediate(),v=c.getProvider("heartbeat"),w=c.getProvider("app-check-internal"),{apiKey:R,authDomain:B}=g.options;he(R&&!R.includes(":"),"invalid-api-key",{appName:g.name});const ne={apiKey:R,authDomain:B,clientPlatform:p,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xe(p)},Ie=new io(g,v,w,ne);return function vT(p,c){const l=c?.persistence||[],g=(Array.isArray(l)?l:[l]).map($e);c?.errorMap&&p._updateErrorMap(c.errorMap),p._initializeWithPersistence(g,c?.popupRedirectResolver)}(Ie,l),Ie},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,l,g)=>{c.getProvider("auth-internal").initialize()})),(0,Me._registerComponent)(new wn.uA("auth-internal",c=>{const l=Kt(c.getProvider("auth").getImmediate());return new et(l)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Me.registerVersion)(Un,"1.7.7",function Vc(p){switch(p){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(p)),(0,Me.registerVersion)(Un,"1.7.7","esm2017")}("Browser");function Jr(){return Jr=(0,b.A)(function*(p,c,l){var g;const{BuildInfo:v}=mo();Ln(c.sessionId,"AuthEvent did not contain a session ID");const w=yield function Bn(p){return gu.apply(this,arguments)}(c.sessionId),R={};return $a()?R.ibi=v.packageName:ea()?R.apn=v.packageName:Mt(p,"operation-not-supported-in-this-environment"),v.displayName&&(R.appDisplayName=v.displayName),R.sessionId=w,Tp(p,l,c.type,void 0,null!==(g=c.eventId)&&void 0!==g?g:void 0,R)}),Jr.apply(this,arguments)}function Uc(){return(Uc=(0,b.A)(function*(p){const{BuildInfo:c}=mo(),l={};$a()?l.iosBundleId=c.packageName:ea()?l.androidPackageName=c.packageName:Mt(p,"operation-not-supported-in-this-environment"),yield ky(p,l)})).apply(this,arguments)}function fu(){return(fu=(0,b.A)(function*(p,c,l){const{cordova:g}=mo();let v=()=>{};try{yield new Promise((w,R)=>{let B=null;function ne(){var xe;w();const _n=null===(xe=g.plugins.browsertab)||void 0===xe?void 0:xe.close;"function"==typeof _n&&_n(),"function"==typeof l?.close&&l.close()}function Ie(){B||(B=window.setTimeout(()=>{R(xt(p,"redirect-cancelled-by-user"))},2e3))}function Re(){"visible"===document?.visibilityState&&Ie()}c.addPassiveListener(ne),document.addEventListener("resume",Ie,!1),ea()&&document.addEventListener("visibilitychange",Re,!1),v=()=>{c.removePassiveListener(ne),document.removeEventListener("resume",Ie,!1),document.removeEventListener("visibilitychange",Re,!1),B&&window.clearTimeout(B)}})}finally{v()}})).apply(this,arguments)}function gu(){return(gu=(0,b.A)(function*(p){const c=function Xn(p){if(Ln(/[0-9a-zA-Z]+/.test(p),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(p);const c=new ArrayBuffer(p.length),l=new Uint8Array(c);for(let g=0;g<p.length;g++)l[g]=p.charCodeAt(g);return l}(p),l=yield crypto.subtle.digest("SHA-256",c);return Array.from(new Uint8Array(l)).map(v=>v.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Dp extends Id{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(c=>{this.resolveInitialized=c})}addPassiveListener(c){this.passiveListeners.add(c)}removePassiveListener(c){this.passiveListeners.delete(c)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(c){return this.resolveInitialized(),this.passiveListeners.forEach(l=>l(c)),super.onEvent(c)}initialized(){var c=this;return(0,b.A)(function*(){yield c.initPromise})()}}function Fi(p){return la.apply(this,arguments)}function la(){return(la=(0,b.A)(function*(p){const c=yield jc()._get(bd(p));return c&&(yield jc()._remove(bd(p))),c})).apply(this,arguments)}function AC(){const p=[];for(let l=0;l<20;l++){const g=Math.floor(62*Math.random());p.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(g))}return p.join("")}function jc(){return $e(Ka)}function bd(p){return Yn("authEvent",p.config.apiKey,p.name)}function Sp(p){if(!p?.includes("?"))return{};const[c,...l]=p.split("?");return(0,Z.I9)(l.join("?"))}const xN=class MN{constructor(){this._redirectPersistence=Vn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Oc,this._overrideRedirectResult=mr}_initialize(c){var l=this;return(0,b.A)(function*(){const g=c._key();let v=l.eventManagers.get(g);return v||(v=new Dp(c),l.eventManagers.set(g,v),l.attachCallbackListeners(c,v)),v})()}_openPopup(c){Mt(c,"operation-not-supported-in-this-environment")}_openRedirect(c,l,g,v){var w=this;return(0,b.A)(function*(){!function pu(p){var c,l,g,v,w,R,B,ne,Ie,Re;const xe=mo();he("function"==typeof(null===(c=xe?.universalLinks)||void 0===c?void 0:c.subscribe),p,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),he(typeof(null===(l=xe?.BuildInfo)||void 0===l?void 0:l.packageName)<"u",p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),he("function"==typeof(null===(w=null===(v=null===(g=xe?.cordova)||void 0===g?void 0:g.plugins)||void 0===v?void 0:v.browsertab)||void 0===w?void 0:w.openUrl),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(ne=null===(B=null===(R=xe?.cordova)||void 0===R?void 0:R.plugins)||void 0===B?void 0:B.browsertab)||void 0===ne?void 0:ne.isAvailable),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),he("function"==typeof(null===(Re=null===(Ie=xe?.cordova)||void 0===Ie?void 0:Ie.InAppBrowser)||void 0===Re?void 0:Re.open),p,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(c);const R=yield w._initialize(c);yield R.initialized(),R.resetRedirect(),function tt(){Mc.clear()}(),yield w._originValidation(c);const B=function ca(p,c,l=null){return{type:c,eventId:l,urlResponse:null,sessionId:AC(),postBody:null,tenantId:p.tenantId,error:xt(p,"no-auth-event")}}(c,g,v);yield function Dd(p,c){return jc()._set(bd(p),c)}(c,B);const ne=yield function Ad(p,c,l){return Jr.apply(this,arguments)}(c,B,l),Ie=yield function Bc(p){const{cordova:c}=mo();return new Promise(l=>{c.plugins.browsertab.isAvailable(g=>{let v=null;g?c.plugins.browsertab.openUrl(p):v=c.InAppBrowser.open(p,function Q(p=(0,Z.ZQ)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(p)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(p)}()?"_blank":"_system","location=yes"),l(v)})})}(ne);return function Cs(p,c,l){return fu.apply(this,arguments)}(c,R,Ie)})()}_isIframeWebStorageSupported(c,l){throw new Error("Method not implemented.")}_originValidation(c){const l=c._key();return this.originValidationPromises[l]||(this.originValidationPromises[l]=function Be(p){return Uc.apply(this,arguments)}(c)),this.originValidationPromises[l]}attachCallbackListeners(c,l){const{universalLinks:g,handleOpenURL:v,BuildInfo:w}=mo(),R=setTimeout((0,b.A)(function*(){yield Fi(c),l.onEvent(bC())}),500),B=function(){var Re=(0,b.A)(function*(xe){clearTimeout(R);const _n=yield Fi(c);let ns=null;_n&&xe?.url&&(ns=function jy(p,c){var l,g;const v=function bp(p){const c=Sp(p),l=c.link?decodeURIComponent(c.link):void 0,g=Sp(l).link,v=c.deep_link_id?decodeURIComponent(c.deep_link_id):void 0;return Sp(v).link||v||g||l||p}(c);if(v.includes("/__/auth/callback")){const w=Sp(v),R=w.firebaseError?function DC(p){try{return JSON.parse(p)}catch{return null}}(decodeURIComponent(w.firebaseError)):null,B=null===(g=null===(l=R?.code)||void 0===l?void 0:l.split("auth/"))||void 0===g?void 0:g[1],ne=B?xt(B):null;return ne?{type:p.type,eventId:p.eventId,tenantId:p.tenantId,error:ne,urlResponse:null,sessionId:null,postBody:null}:{type:p.type,eventId:p.eventId,tenantId:p.tenantId,sessionId:p.sessionId,urlResponse:v,postBody:null}}return null}(_n,xe.url)),l.onEvent(ns||bC())});return function(_n){return Re.apply(this,arguments)}}();typeof g<"u"&&"function"==typeof g.subscribe&&g.subscribe(null,B);const ne=v,Ie=`${w.packageName.toLowerCase()}://`;mo().handleOpenURL=function(){var Re=(0,b.A)(function*(xe){if(xe.toLowerCase().startsWith(Ie)&&B({url:xe}),"function"==typeof ne)try{ne(xe)}catch(_n){console.error(_n)}});return function(xe){return Re.apply(this,arguments)}}()}};function bC(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:xt("no-auth-event")}}function Sd(){var p;return(null===(p=self?.location)||void 0===p?void 0:p.protocol)||null}function SC(p=(0,Z.ZQ)()){return!("file:"!==Sd()&&"ionic:"!==Sd()&&"capacitor:"!==Sd()||!p.toLowerCase().match(/iphone|ipad|ipod|android/))}function RC(){try{const p=self.localStorage,c=cd();if(p)return p.setItem(c,"1"),p.removeItem(c),!function BN(p=(0,Z.ZQ)()){return function Hy(){return(0,Z.lT)()&&11===document?.documentMode}()||function UN(p=(0,Z.ZQ)()){return/Edge\/\d+/.test(p)}(p)}()||(0,Z.zW)()}catch{return zy()&&(0,Z.zW)()}return!1}function zy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Rp(){return(function VN(){return"http:"===Sd()||"https:"===Sd()}()||(0,Z.sr)()||SC())&&!function $y(){return(0,Z.lV)()||(0,Z.Ll)()}()&&RC()&&!zy()}function Pp(){return SC()&&typeof document<"u"}function Rd(){return(Rd=(0,b.A)(function*(){return!!Pp()&&new Promise(p=>{const c=setTimeout(()=>{p(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(c),p(!0)})})})).apply(this,arguments)}const yi={LOCAL:"local",NONE:"none",SESSION:"session"},mu=he,Np="persistence";function $c(p){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,b.A)(function*(p){yield p._initializationPromise;const c=xp(),l=Yn(Np,p.config.apiKey,p.name);c&&c.setItem(l,p._getPersistence())})).apply(this,arguments)}function xp(){var p;try{return(null===(p=function PC(){return typeof window<"u"?window:null}())||void 0===p?void 0:p.sessionStorage)||null}catch{return null}}const Gy=he;class ht{constructor(){this.browserResolver=$e(ye),this.cordovaResolver=$e(xN),this.underlyingResolver=null,this._redirectPersistence=Vn,this._completeRedirectFn=Oc,this._overrideRedirectResult=mr}_initialize(c){var l=this;return(0,b.A)(function*(){return yield l.selectUnderlyingResolver(),l.assertedUnderlyingResolver._initialize(c)})()}_openPopup(c,l,g,v){var w=this;return(0,b.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openPopup(c,l,g,v)})()}_openRedirect(c,l,g,v){var w=this;return(0,b.A)(function*(){return yield w.selectUnderlyingResolver(),w.assertedUnderlyingResolver._openRedirect(c,l,g,v)})()}_isIframeWebStorageSupported(c,l){this.assertedUnderlyingResolver._isIframeWebStorageSupported(c,l)}_originValidation(c){return this.assertedUnderlyingResolver._originValidation(c)}get _shouldInitProactively(){return Pp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var c=this;return(0,b.A)(function*(){if(c.underlyingResolver)return;const l=yield function Li(){return Rd.apply(this,arguments)}();c.underlyingResolver=l?c.cordovaResolver:c.browserResolver})()}}function Pd(p){return p.unwrap()}function Vr(p){return _u(p)}function _u(p){const{_tokenResponse:c}=p instanceof Z.g?p.customData:p;if(!c)return null;if(!(p instanceof Z.g)&&"temporaryProof"in c&&"phoneNumber"in c)return $s.credentialFromResult(p);const l=c.providerId;if(!l||l===Ft.PASSWORD)return null;let g;switch(l){case Ft.GOOGLE:g=K_;break;case Ft.FACEBOOK:g=xT;break;case Ft.GITHUB:g=OT;break;case Ft.TWITTER:g=Q_;break;default:const{oauthIdToken:v,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:B,nonce:ne}=c;return w||R||v||B?B?l.startsWith("saml.")?vc._create(l,B):Vs._fromParams({providerId:l,signInMethod:l,pendingToken:B,idToken:v,accessToken:w}):new Ga(l).credential({idToken:v,accessToken:w,rawNonce:ne}):null}return p instanceof Z.g?g.credentialFromError(p):g.credentialFromResult(p)}function Gn(p,c){return c.catch(l=>{throw l instanceof Z.g&&function MC(p,c){var l;const g=null===(l=c.customData)||void 0===l?void 0:l._tokenResponse;if("auth/multi-factor-auth-required"===c?.code)c.resolver=new kp(p,function ip(p,c){var l;const g=(0,Z.Ku)(p),v=c;return he(c.customData.operationType,g,"argument-error"),he(null===(l=v.customData._serverResponse)||void 0===l?void 0:l.mfaPendingCredential,g,"argument-error"),Dc._fromError(g,v)}(p,c));else if(g){const v=_u(c),w=c;v&&(w.credential=v,w.tenantId=g.tenantId||void 0,w.email=g.email||void 0,w.phoneNumber=g.phoneNumber||void 0)}}(p,l),l}).then(l=>{const v=l.user;return{operationType:l.operationType,credential:Vr(l),additionalUserInfo:_y(l),user:Hs.getOrCreate(v)}})}function Ur(p,c){return Op.apply(this,arguments)}function Op(){return(Op=(0,b.A)(function*(p,c){const l=yield c;return{verificationId:l.verificationId,confirm:g=>Gn(p,l.confirm(g))}})).apply(this,arguments)}class kp{constructor(c,l){this.resolver=l,this.auth=function Hc(p){return p.wrapped()}(c)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(c){return Gn(Pd(this.auth),this.resolver.resolveSignIn(c))}}class Hs{constructor(c){this._delegate=c,this.multiFactor=function WT(p){const c=(0,Z.Ku)(p);return Ty.has(c)||Ty.set(c,bt._fromUser(c)),Ty.get(c)}(c)}static getOrCreate(c){return Hs.USER_MAP.has(c)||Hs.USER_MAP.set(c,new Hs(c)),Hs.USER_MAP.get(c)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(c){return this._delegate.getIdTokenResult(c)}getIdToken(c){return this._delegate.getIdToken(c)}linkAndRetrieveDataWithCredential(c){return this.linkWithCredential(c)}linkWithCredential(c){var l=this;return(0,b.A)(function*(){return Gn(l.auth,Ic(l._delegate,c))})()}linkWithPhoneNumber(c,l){var g=this;return(0,b.A)(function*(){return Ur(g.auth,function gd(p,c,l){return tu.apply(this,arguments)}(g._delegate,c,l))})()}linkWithPopup(c){var l=this;return(0,b.A)(function*(){return Gn(l.auth,function oC(p,c,l){return vd.apply(this,arguments)}(l._delegate,c,ht))})()}linkWithRedirect(c){var l=this;return(0,b.A)(function*(){return yield $c(Kt(l.auth)),cC(l._delegate,c,ht)})()}reauthenticateAndRetrieveDataWithCredential(c){return this.reauthenticateWithCredential(c)}reauthenticateWithCredential(c){var l=this;return(0,b.A)(function*(){return Gn(l.auth,BT(l._delegate,c))})()}reauthenticateWithPhoneNumber(c,l){return Ur(this.auth,function Zi(p,c,l){return Ts.apply(this,arguments)}(this._delegate,c,l))}reauthenticateWithPopup(c){return Gn(this.auth,function sC(p,c,l){return mp.apply(this,arguments)}(this._delegate,c,ht))}reauthenticateWithRedirect(c){var l=this;return(0,b.A)(function*(){return yield $c(Kt(l.auth)),xy(l._delegate,c,ht)})()}sendEmailVerification(c){return function zT(p,c){return py.apply(this,arguments)}(this._delegate,c)}unlink(c){var l=this;return(0,b.A)(function*(){return yield function ey(p,c){return ty.apply(this,arguments)}(l._delegate,c),l})()}updateEmail(c){return function AN(p,c){const l=(0,Z.Ku)(p);return(0,Me._isFirebaseServerApp)(l.auth.app)?Promise.reject(Ye(l.auth)):GT(l,c,null)}(this._delegate,c)}updatePassword(c){return function Ae(p,c){return GT((0,Z.Ku)(p),null,c)}(this._delegate,c)}updatePhoneNumber(c){return function Ny(p,c){return _d.apply(this,arguments)}(this._delegate,c)}updateProfile(c){return function CN(p,c){return my.apply(this,arguments)}(this._delegate,c)}verifyBeforeUpdateEmail(c,l){return function gi(p,c,l){return We.apply(this,arguments)}(this._delegate,c,l)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Hs.USER_MAP=new WeakMap;const Nr=he;let Fp=(()=>{class p{constructor(l,g){if(this.app=l,g.isInitialized())return this._delegate=g.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:v}=l.options;Nr(v,"invalid-api-key",{appName:l.name}),Nr(v,"invalid-api-key",{appName:l.name});const w=typeof window<"u"?ht:void 0;this._delegate=g.initialize({options:{persistence:qy(v,l.name),popupRedirectResolver:w}}),this._delegate._updateErrorMap(ar),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Hs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(l){this._delegate.languageCode=l}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(l){this._delegate.tenantId=l}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(l,g){!function V_(p,c,l){const g=Kt(p);he(g._canInitEmulator,g,"emulator-config-failed"),he(/^https?:\/\//.test(c),g,"invalid-emulator-scheme");const v=!!l?.disableWarnings,w=ET(c),{host:R,port:B}=function IT(p){const c=ET(p),l=/(\/\/)?([^?#/]+)/.exec(p.substr(c.length));if(!l)return{host:"",port:null};const g=l[2].split("@").pop()||"",v=/^(\[[^\]]+\])(:|$)/.exec(g);if(v){const w=v[1];return{host:w,port:U_(g.substr(w.length+1))}}{const[w,R]=g.split(":");return{host:w,port:U_(R)}}}(c);g.config.emulator={url:`${w}//${R}${null===B?"":`:${B}`}/`},g.settings.appVerificationDisabledForTesting=!0,g.emulatorConfig=Object.freeze({host:R,port:B,protocol:w.replace(":",""),options:Object.freeze({disableWarnings:v})}),v||function wT(){function p(){const c=document.createElement("p"),l=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",l.position="fixed",l.width="100%",l.backgroundColor="#ffffff",l.border=".1em solid #000000",l.color="#b50000",l.bottom="0px",l.left="0px",l.margin="0px",l.zIndex="10000",l.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",p):p())}()}(this._delegate,l,g)}applyActionCode(l){return function Jn(p,c){return Tc.apply(this,arguments)}(this._delegate,l)}checkActionCode(l){return jT(this._delegate,l)}confirmPasswordReset(l,g){return function Bt(p,c,l){return Xf.apply(this,arguments)}(this._delegate,l,g)}createUserWithEmailAndPassword(l,g){var v=this;return(0,b.A)(function*(){return Gn(v._delegate,function rd(p,c,l){return Fr.apply(this,arguments)}(v._delegate,l,g))})()}fetchProvidersForEmail(l){return this.fetchSignInMethodsForEmail(l)}fetchSignInMethodsForEmail(l){return function HT(p,c){return fy.apply(this,arguments)}(this._delegate,l)}isSignInWithEmailLink(l){return function uo(p,c){const l=yc.parseLink(c);return"EMAIL_SIGNIN"===l?.operation}(0,l)}getRedirectResult(){var l=this;return(0,b.A)(function*(){Nr(Rp(),l._delegate,"operation-not-supported-in-this-environment");const g=yield function dC(p,c){return xc.apply(this,arguments)}(l._delegate,ht);return g?Gn(l._delegate,Promise.resolve(g)):{credential:null,user:null}})()}addFrameworkForLogging(l){!function ON(p,c){Kt(p)._logFramework(c)}(this._delegate,l)}onAuthStateChanged(l,g,v){const{next:w,error:R,complete:B}=Lp(l,g,v);return this._delegate.onAuthStateChanged(w,R,B)}onIdTokenChanged(l,g,v){const{next:w,error:R,complete:B}=Lp(l,g,v);return this._delegate.onIdTokenChanged(w,R,B)}sendSignInLinkToEmail(l,g){return function $T(p,c,l){return ly.apply(this,arguments)}(this._delegate,l,g)}sendPasswordResetEmail(l,g){return function vN(p,c,l){return cy.apply(this,arguments)}(this._delegate,l,g||void 0)}setPersistence(l){var g=this;return(0,b.A)(function*(){let v;switch(function NC(p,c){mu(Object.values(yi).includes(c),p,"invalid-persistence-type"),(0,Z.lV)()?mu(c!==yi.SESSION,p,"unsupported-persistence-type"):(0,Z.Ll)()?mu(c===yi.NONE,p,"unsupported-persistence-type"):zy()?mu(c===yi.NONE||c===yi.LOCAL&&(0,Z.zW)(),p,"unsupported-persistence-type"):mu(c===yi.NONE||RC(),p,"unsupported-persistence-type")}(g._delegate,l),l){case yi.SESSION:v=Vn;break;case yi.LOCAL:v=(yield $e(Za)._isAvailable())?Za:Ka;break;case yi.NONE:v=Pe;break;default:return Mt("argument-error",{appName:g._delegate.name})}return g._delegate.setPersistence(v)})()}signInAndRetrieveDataWithCredential(l){return this.signInWithCredential(l)}signInAnonymously(){return Gn(this._delegate,function J_(p){return Ec.apply(this,arguments)}(this._delegate))}signInWithCredential(l){return Gn(this._delegate,ce(this._delegate,l))}signInWithCustomToken(l){return Gn(this._delegate,function qa(p,c){return ao.apply(this,arguments)}(this._delegate,l))}signInWithEmailAndPassword(l,g){return Gn(this._delegate,function EN(p,c,l){return(0,Me._isFirebaseServerApp)(p.app)?Promise.reject(Ye(p)):ce((0,Z.Ku)(p),Jf.credential(c,l)).catch(function(){var g=(0,b.A)(function*(v){throw"auth/password-does-not-meet-requirements"===v.code&&uy(p),v});return function(v){return g.apply(this,arguments)}}())}(this._delegate,l,g))}signInWithEmailLink(l,g){return Gn(this._delegate,function IN(p,c,l){return dy.apply(this,arguments)}(this._delegate,l,g))}signInWithPhoneNumber(l,g){return Ur(this._delegate,function Py(p,c,l){return Pc.apply(this,arguments)}(this._delegate,l,g))}signInWithPopup(l){var g=this;return(0,b.A)(function*(){return Nr(Rp(),g._delegate,"operation-not-supported-in-this-environment"),Gn(g._delegate,function My(p,c,l){return gp.apply(this,arguments)}(g._delegate,l,ht))})()}signInWithRedirect(l){var g=this;return(0,b.A)(function*(){return Nr(Rp(),g._delegate,"operation-not-supported-in-this-environment"),yield $c(g._delegate),_r(g._delegate,l,ht)})()}updateCurrentUser(l){return this._delegate.updateCurrentUser(l)}verifyPasswordResetCode(l){return function Zt(p,c){return Ke.apply(this,arguments)}(this._delegate,l)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return p.Persistence=yi,p})();function Lp(p,c,l){let g=p;"function"!=typeof p&&({next:g,error:c,complete:l}=p);const v=g;return{next:R=>v(R&&Hs.getOrCreate(R)),error:c,complete:l}}function qy(p,c){const l=function As(p,c){const l=xp();if(!l)return[];const g=Yn(Np,p,c);switch(l.getItem(g)){case yi.NONE:return[Pe];case yi.LOCAL:return[Za,Vn];case yi.SESSION:return[Vn];default:return[]}}(p,c);if(typeof self<"u"&&!l.includes(Za)&&l.push(Za),typeof window<"u")for(const g of[Ka,Vn])l.includes(g)||l.push(g);return l.includes(Pe)||l.push(Pe),l}class da{constructor(){this.providerId="phone",this._delegate=new $s(Pd(ke.A.auth()))}static credential(c,l){return $s.credential(c,l)}verifyPhoneNumber(c,l){return this._delegate.verifyPhoneNumber(c,l)}unwrap(){return this._delegate}}da.PHONE_SIGN_IN_METHOD=$s.PHONE_SIGN_IN_METHOD,da.PROVIDER_ID=$s.PROVIDER_ID;const Vp=he;class Nd{constructor(c,l,g=ke.A.app()){var v;Vp(null===(v=g.options)||void 0===v?void 0:v.apiKey,"invalid-api-key",{appName:g.name}),this._delegate=new ws(g.auth(),c,l),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Up(p){p.INTERNAL.registerComponent(new wn.uA("auth-compat",c=>{const l=c.getProvider("app-compat").getImmediate(),g=c.getProvider("auth");return new Fp(l,g)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Jf,FacebookAuthProvider:xT,GithubAuthProvider:OT,GoogleAuthProvider:K_,OAuthProvider:Ga,SAMLAuthProvider:Zl,PhoneAuthProvider:da,PhoneMultiFactorGenerator:es,RecaptchaVerifier:Nd,TwitterAuthProvider:Q_,Auth:Fp,AuthCredential:ta,Error:Z.g}).setInstantiationMode("LAZY").setMultipleInstances(!1)),p.registerVersion("@firebase/auth-compat","0.5.12")}(ke.A)},467:(Ms,Cr,ct)=>{function b(Me,Z,Ut,Ue,wn,Ar,Ft){try{var le=Me[Ar](Ft),_e=le.value}catch(Le){return void Ut(Le)}le.done?Z(_e):Promise.resolve(_e).then(Ue,wn)}function ke(Me){return function(){var Z=this,Ut=arguments;return new Promise(function(Ue,wn){var Ar=Me.apply(Z,Ut);function Ft(_e){b(Ar,Ue,wn,Ft,le,"next",_e)}function le(_e){b(Ar,Ue,wn,Ft,le,"throw",_e)}Ft(void 0)})}}ct.d(Cr,{A:()=>ke})},635:(Ms,Cr,ct)=>{function Z(W,Y){var se={};for(var oe in W)Object.prototype.hasOwnProperty.call(W,oe)&&Y.indexOf(oe)<0&&(se[oe]=W[oe]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var Ee=0;for(oe=Object.getOwnPropertySymbols(W);Ee<oe.length;Ee++)Y.indexOf(oe[Ee])<0&&Object.prototype.propertyIsEnumerable.call(W,oe[Ee])&&(se[oe[Ee]]=W[oe[Ee]])}return se}function Le(W,Y,se,oe){return new(se||(se=Promise))(function(ue,Ne){function wt(Tt){try{Je(oe.next(Tt))}catch(qt){Ne(qt)}}function Cn(Tt){try{Je(oe.throw(Tt))}catch(qt){Ne(qt)}}function Je(Tt){Tt.done?ue(Tt.value):function Ee(ue){return ue instanceof se?ue:new se(function(Ne){Ne(ue)})}(Tt.value).then(wt,Cn)}Je((oe=oe.apply(W,Y||[])).next())})}function rn(W){return this instanceof rn?(this.v=W,this):new rn(W)}function Mt(W,Y,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,oe=se.apply(W,Y||[]),ue=[];return Ee={},wt("next"),wt("throw"),wt("return",function Ne(qe){return function(Hn){return Promise.resolve(Hn).then(qe,qt)}}),Ee[Symbol.asyncIterator]=function(){return this},Ee;function wt(qe,Hn){oe[qe]&&(Ee[qe]=function(An){return new Promise(function(Qn,zt){ue.push([qe,An,Qn,zt])>1||Cn(qe,An)})},Hn&&(Ee[qe]=Hn(Ee[qe])))}function Cn(qe,Hn){try{!function Je(qe){qe.value instanceof rn?Promise.resolve(qe.value.v).then(Tt,qt):ms(ue[0][2],qe)}(oe[qe](Hn))}catch(An){ms(ue[0][3],An)}}function Tt(qe){Cn("next",qe)}function qt(qe){Cn("throw",qe)}function ms(qe,Hn){qe(Hn),ue.shift(),ue.length&&Cn(ue[0][0],ue[0][1])}}function qr(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,Y=W[Symbol.asyncIterator];return Y?Y.call(W):(W=function kt(W){var Y="function"==typeof Symbol&&Symbol.iterator,se=Y&&W[Y],oe=0;if(se)return se.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&oe>=W.length&&(W=void 0),{value:W&&W[oe++],done:!W}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),se={},oe("next"),oe("throw"),oe("return"),se[Symbol.asyncIterator]=function(){return this},se);function oe(ue){se[ue]=W[ue]&&function(Ne){return new Promise(function(wt,Cn){!function Ee(ue,Ne,wt,Cn){Promise.resolve(Cn).then(function(Je){ue({value:Je,done:wt})},Ne)}(wt,Cn,(Ne=W[ue](Ne)).done,Ne.value)})}}}ct.d(Cr,{AQ:()=>Mt,N3:()=>rn,Tt:()=>Z,sH:()=>Le,xN:()=>qr}),"function"==typeof SuppressedError&&SuppressedError}},Ms=>{Ms(Ms.s=187)}]);